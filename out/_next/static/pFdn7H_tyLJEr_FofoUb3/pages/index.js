(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"/9aa":function(e,t,r){var i=r("NykK"),n=r("ExA7"),a="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||n(e)&&i(e)==a}},"03A+":function(e,t,r){var i=r("JTzB"),n=r("ExA7"),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,c=i(function(){return arguments}())?i:function(e){return n(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},"0wEy":function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e.default:e}t.__esModule=!0;var n=r("xCC/");t.Motion=i(n);var a=r("unm8");t.StaggeredMotion=i(a);var o=r("p9CH");t.TransitionMotion=i(o);var s=r("tYRH");t.spring=i(s);var c=r("LQNH");t.presets=i(c);var l=r("u461");t.stripStyle=i(l);var u=r("MEvW");t.reorderKeys=i(u)},"1OKq":function(e,t){THREE.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var r={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1},i=e.getSize();(t=new THREE.WebGLRenderTarget(i.width,i.height,r)).texture.name="EffectComposer.rt1"}this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},Object.assign(THREE.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,r,i=!1,n=this.passes.length;for(r=0;r<n;r++)if(!1!==(t=this.passes[r]).enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var a=this.renderer.context;a.stencilFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.stencilFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==THREE.MaskPass&&(t instanceof THREE.MaskPass?i=!0:t instanceof THREE.ClearMaskPass&&(i=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getSize();(e=this.renderTarget1.clone()).setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(e,t)}}),THREE.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(THREE.Pass.prototype,{setSize:function(e,t){},render:function(e,t,r,i,n){console.error("THREE.Pass: .render() must be implemented in derived pass.")}})},"1c1Y":function(e,t){THREE.RenderPass=function(e,t,r,i,n){THREE.Pass.call(this),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=void 0!==n?n:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},THREE.RenderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.RenderPass,render:function(e,t,r,i,n){var a,o,s=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(a=e.getClearColor().getHex(),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.render(this.scene,this.camera,this.renderToScreen?null:r,this.clear),this.clearColor&&e.setClearColor(a,o),this.scene.overrideMaterial=null,e.autoClear=s}})},"2ByH":function(e,t,r){!function(e){"use strict";function t(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners,i=r[e];if(void 0!==i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,r=t[e.type];if(void 0!==r){e.target=this;var i=[],n=0,a=r.length;for(n=0;n<a;n++)i[n]=r[n];for(n=0;n<a;n++)i[n].call(this,e)}}}});var r,i,n,a,o,s,c="85",l=0,u=1,h=2,d=0,p=1,f=2,m=0,v=1,g=2,y=1,x=2,E=0,b=1,w=2,T=0,M=1,_=2,S=3,R=4,A=5,z=100,C=101,P=102,L=103,D=104,U=200,H=201,O=202,I=203,N=204,B=205,F=206,G=207,V=208,j=209,k=210,W=0,X=1,q=2,Y=3,Z=4,Q=5,J=6,K=7,$=0,ee=1,te=2,re=0,ie=1,ne=2,ae=3,oe=4,se=301,ce=302,le=303,ue=304,he=305,de=306,pe=307,fe=1e3,me=1001,ve=1002,ge=1003,ye=1004,xe=1005,Ee=1006,be=1007,we=1008,Te=1009,Me=1010,_e=1011,Se=1012,Re=1013,Ae=1014,ze=1015,Ce=1016,Pe=1017,Le=1018,De=1019,Ue=1020,He=1021,Oe=1022,Ie=1023,Ne=1024,Be=1025,Fe=Ie,Ge=1026,Ve=1027,je=2001,ke=2002,We=2003,Xe=2004,qe=2100,Ye=2101,Ze=2102,Qe=2103,Je=2151,Ke=2201,$e=2400,et=0,tt=1,rt=2,it=3e3,nt=3001,at=3007,ot=3002,st=3004,ct=3005,lt=3006,ut=3200,ht=3201,dt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),a=0,function(){for(var e=0;e<36;e++)8===e||13===e||18===e||23===e?n[e]="-":14===e?n[e]="4":(a<=2&&(a=33554432+16777216*Math.random()|0),r=15&a,a>>=4,n[e]=i[19===e?3&r|8:r]);return n.join("")}),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*dt.DEG2RAD},radToDeg:function(e){return e*dt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}};function pt(e,t){this.x=e||0,this.y=t||0}Object.defineProperties(pt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(pt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(o=new pt,s=new pt,function(e,t){return o.set(e,e),s.set(t,t),this.clamp(o,s)}),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,a=this.y-e.y;return this.x=n*r-a*i+e.x,this.y=n*i+a*r+e.y,this}});var ft,mt,vt,gt,yt,xt,Et=0;function bt(e,t,r,i,n,a,o,s,c,l){Object.defineProperty(this,"id",{value:Et++}),this.uuid=dt.generateUUID(),this.name="",this.image=void 0!==e?e:bt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:bt.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:me,this.wrapT=void 0!==i?i:me,this.magFilter=void 0!==n?n:Ee,this.minFilter=void 0!==a?a:we,this.anisotropy=void 0!==c?c:1,this.format=void 0!==o?o:Ie,this.type=void 0!==s?s:Te,this.offset=new pt(0,0),this.repeat=new pt(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:it,this.version=0,this.onUpdate=null}function wt(e,t,r,i){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==i?i:1}function Tt(e,t,r){this.uuid=dt.generateUUID(),this.width=e,this.height=t,this.scissor=new wt(0,0,e,t),this.scissorTest=!1,this.viewport=new wt(0,0,e,t),void 0===(r=r||{}).minFilter&&(r.minFilter=Ee),this.texture=new bt(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function Mt(e,t,r){Tt.call(this,e,t,r),this.activeCubeFace=0,this.activeMipMapLevel=0}function _t(e,t,r,i){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==i?i:1}function St(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}function Rt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function At(e,t,r,i,n,a,o,s,c,l,u,h){bt.call(this,null,a,o,s,c,l,i,n,u,h),this.image={data:e,width:t,height:r},this.magFilter=void 0!==c?c:ge,this.minFilter=void 0!==l?l:ge,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function zt(e,t,r,i,n,a,o,s,c,l){e=void 0!==e?e:[],t=void 0!==t?t:se,bt.call(this,e,t,r,i,n,a,o,s,c,l),this.flipY=!1}bt.DEFAULT_IMAGE=void 0,bt.DEFAULT_MAPPING=300,Object.defineProperty(bt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(bt.prototype,t.prototype,{constructor:bt,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=dt.generateUUID()),void 0===e.images[r.uuid]&&(e.images[r.uuid]={uuid:r.uuid,url:function(e){var t;return void 0!==e.toDataURL?t=e:((t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(r)}),t.image=r.uuid}return e.textures[this.uuid]=t,t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case fe:e.x=e.x-Math.floor(e.x);break;case me:e.x=e.x<0?0:1;break;case ve:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case fe:e.y=e.y-Math.floor(e.y);break;case me:e.y=e.y<0?0:1;break;case ve:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.assign(wt.prototype,{isVector4:!0,set:function(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,r=this.y,i=this.z,n=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*n,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*n,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*n,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*n,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,i,n,a=e.elements,o=a[0],s=a[4],c=a[8],l=a[1],u=a[5],h=a[9],d=a[2],p=a[6],f=a[10];if(Math.abs(s-l)<.01&&Math.abs(c-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+d)<.1&&Math.abs(h+p)<.1&&Math.abs(o+u+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(o+1)/2,v=(u+1)/2,g=(f+1)/2,y=(s+l)/4,x=(c+d)/4,E=(h+p)/4;return m>v&&m>g?m<.01?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(m),i=y/r,n=x/r):v>g?v<.01?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(v),r=y/i,n=E/i):g<.01?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(g),r=x/n,i=E/n),this.set(r,i,n,t),this}var b=Math.sqrt((p-h)*(p-h)+(c-d)*(c-d)+(l-s)*(l-s));return Math.abs(b)<.001&&(b=1),this.x=(p-h)/b,this.y=(c-d)/b,this.z=(l-s)/b,this.w=Math.acos((o+u+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e=new wt,t=new wt;return function(r,i){return e.set(r,r,r,r),t.set(i,i,i,i),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Object.assign(Tt.prototype,t.prototype,{isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Mt.prototype=Object.create(Tt.prototype),Mt.prototype.constructor=Mt,Mt.prototype.isWebGLRenderTargetCube=!0,Object.assign(_t,{slerp:function(e,t,r,i){return r.copy(e).slerp(t,i)},slerpFlat:function(e,t,r,i,n,a,o){var s=r[i+0],c=r[i+1],l=r[i+2],u=r[i+3],h=n[a+0],d=n[a+1],p=n[a+2],f=n[a+3];if(u!==f||s!==h||c!==d||l!==p){var m=1-o,v=s*h+c*d+l*p+u*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var x=Math.sqrt(y),E=Math.atan2(x,v*g);m=Math.sin(m*E)/x,o=Math.sin(o*E)/x}var b=o*g;if(s=s*m+h*b,c=c*m+d*b,l=l*m+p*b,u=u*m+f*b,m===1-o){var w=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=w,c*=w,l*=w,u*=w}}e[t]=s,e[t+1]=c,e[t+2]=l,e[t+3]=u}}),Object.defineProperties(_t.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(_t.prototype,{set:function(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1===(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,i=e._y,n=e._z,a=e.order,o=Math.cos,s=Math.sin,c=o(r/2),l=o(i/2),u=o(n/2),h=s(r/2),d=s(i/2),p=s(n/2);return"XYZ"===a?(this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p):"YXZ"===a?(this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p):"ZXY"===a?(this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p):"ZYX"===a?(this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p):"YZX"===a?(this._x=h*l*u+c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u-h*d*p):"XZY"===a&&(this._x=h*l*u-c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u+h*d*p),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,i=r[0],n=r[4],a=r[8],o=r[1],s=r[5],c=r[9],l=r[2],u=r[6],h=r[10],d=i+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(u-c)*t,this._y=(a-l)*t,this._z=(o-n)*t):i>s&&i>h?(t=2*Math.sqrt(1+i-s-h),this._w=(u-c)/t,this._x=.25*t,this._y=(n+o)/t,this._z=(a+l)/t):s>h?(t=2*Math.sqrt(1+s-i-h),this._w=(a-l)/t,this._x=(n+o)/t,this._y=.25*t,this._z=(c+u)/t):(t=2*Math.sqrt(1+h-i-s),this._w=(o-n)/t,this._x=(a+l)/t,this._y=(c+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new St;return function(r,i){return void 0===t&&(t=new St),(e=r.dot(i)+1)<1e-6?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,i=e._y,n=e._z,a=e._w,o=t._x,s=t._y,c=t._z,l=t._w;return this._x=r*l+a*o+i*c-n*s,this._y=i*l+a*s+n*o-r*c,this._z=n*l+a*c+r*s-i*o,this._w=a*l-r*o-i*s-n*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,i=this._y,n=this._z,a=this._w,o=a*e._w+r*e._x+i*e._y+n*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=n,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(r+this._x),this._y=.5*(i+this._y),this._z=.5*(n+this._z),this;var c=Math.atan2(s,o),l=Math.sin((1-t)*c)/s,u=Math.sin(t*c)/s;return this._w=a*l+this._w*u,this._x=r*l+this._x*u,this._y=i*l+this._y*u,this._z=n*l+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(St.prototype,{isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(xt=new _t,function(e){return!1===(e&&e.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(xt.setFromEuler(e))}),applyAxisAngle:function(){var e=new _t;return function(t,r){return this.applyQuaternion(e.setFromAxisAngle(t,r))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this},applyMatrix4:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;this.x=n[0]*t+n[4]*r+n[8]*i+n[12],this.y=n[1]*t+n[5]*r+n[9]*i+n[13],this.z=n[2]*t+n[6]*r+n[10]*i+n[14];var a=n[3]*t+n[7]*r+n[11]*i+n[15];return this.divideScalar(a)},applyQuaternion:function(e){var t=this.x,r=this.y,i=this.z,n=e.x,a=e.y,o=e.z,s=e.w,c=s*t+a*i-o*r,l=s*r+o*t-n*i,u=s*i+n*r-a*t,h=-n*t-a*r-o*i;return this.x=c*s+h*-n+l*-o-u*-a,this.y=l*s+h*-a+u*-n-c*-o,this.z=u*s+h*-o+c*-a-l*-n,this},project:(yt=new Rt,function(e){return yt.multiplyMatrices(e.projectionMatrix,yt.getInverse(e.matrixWorld)),this.applyMatrix4(yt)}),unproject:function(){var e=new Rt;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new St,t=new St;return function(r,i){return e.set(r,r,r),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var r=this.x,i=this.y,n=this.z;return this.x=i*e.z-n*e.y,this.y=n*e.x-r*e.z,this.z=r*e.y-i*e.x,this},crossVectors:function(e,t){var r=e.x,i=e.y,n=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-n*o,this.y=n*a-r*s,this.z=r*o-i*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:(gt=new St,function(e){return gt.copy(this).projectOnVector(e),this.sub(gt)}),reflect:function(){var e=new St;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(dt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Rt.prototype,{isMatrix4:!0,set:function(e,t,r,i,n,a,o,s,c,l,u,h,d,p,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=i,v[1]=n,v[5]=a,v[9]=o,v[13]=s,v[2]=c,v[6]=l,v[10]=u,v[14]=h,v[3]=d,v[7]=p,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Rt).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(){var e=new St;return function(t){var r=this.elements,i=t.elements,n=1/e.setFromMatrixColumn(t,0).length(),a=1/e.setFromMatrixColumn(t,1).length(),o=1/e.setFromMatrixColumn(t,2).length();return r[0]=i[0]*n,r[1]=i[1]*n,r[2]=i[2]*n,r[4]=i[4]*a,r[5]=i[5]*a,r[6]=i[6]*a,r[8]=i[8]*o,r[9]=i[9]*o,r[10]=i[10]*o,this}}(),makeRotationFromEuler:function(e){!1===(e&&e.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,i=e.y,n=e.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(i),c=Math.sin(i),l=Math.cos(n),u=Math.sin(n);if("XYZ"===e.order){var h=a*l,d=a*u,p=o*l,f=o*u;t[0]=s*l,t[4]=-s*u,t[8]=c,t[1]=d+p*c,t[5]=h-f*c,t[9]=-o*s,t[2]=f-h*c,t[6]=p+d*c,t[10]=a*s}else if("YXZ"===e.order){var m=s*l,v=s*u,g=c*l,y=c*u;t[0]=m+y*o,t[4]=g*o-v,t[8]=a*c,t[1]=a*u,t[5]=a*l,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){var m=s*l,v=s*u,g=c*l,y=c*u;t[0]=m-y*o,t[4]=-a*u,t[8]=g+v*o,t[1]=v+g*o,t[5]=a*l,t[9]=y-m*o,t[2]=-a*c,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var h=a*l,d=a*u,p=o*l,f=o*u;t[0]=s*l,t[4]=p*c-d,t[8]=h*c+f,t[1]=s*u,t[5]=f*c+h,t[9]=d*c-p,t[2]=-c,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var x=a*s,E=a*c,b=o*s,w=o*c;t[0]=s*l,t[4]=w-x*u,t[8]=b*u+E,t[1]=u,t[5]=a*l,t[9]=-o*l,t[2]=-c*l,t[6]=E*u+b,t[10]=x-w*u}else if("XZY"===e.order){var x=a*s,E=a*c,b=o*s,w=o*c;t[0]=s*l,t[4]=-u,t[8]=c*l,t[1]=x*u+w,t[5]=a*l,t[9]=E*u-b,t[2]=b*u-E,t[6]=o*l,t[10]=w*u+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,r=e._x,i=e._y,n=e._z,a=e._w,o=r+r,s=i+i,c=n+n,l=r*o,u=r*s,h=r*c,d=i*s,p=i*c,f=n*c,m=a*o,v=a*s,g=a*c;return t[0]=1-(d+f),t[4]=u-g,t[8]=h+v,t[1]=u+g,t[5]=1-(l+f),t[9]=p-m,t[2]=h-v,t[6]=p+m,t[10]=1-(l+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:(ft=new St,mt=new St,vt=new St,function(e,t,r){var i=this.elements;return vt.subVectors(e,t),0===vt.lengthSq()&&(vt.z=1),vt.normalize(),ft.crossVectors(r,vt),0===ft.lengthSq()&&(vt.z+=1e-4,ft.crossVectors(r,vt)),ft.normalize(),mt.crossVectors(vt,ft),i[0]=ft.x,i[4]=mt.x,i[8]=vt.x,i[1]=ft.y,i[5]=mt.y,i[9]=vt.y,i[2]=ft.z,i[6]=mt.z,i[10]=vt.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,i=t.elements,n=this.elements,a=r[0],o=r[4],s=r[8],c=r[12],l=r[1],u=r[5],h=r[9],d=r[13],p=r[2],f=r[6],m=r[10],v=r[14],g=r[3],y=r[7],x=r[11],E=r[15],b=i[0],w=i[4],T=i[8],M=i[12],_=i[1],S=i[5],R=i[9],A=i[13],z=i[2],C=i[6],P=i[10],L=i[14],D=i[3],U=i[7],H=i[11],O=i[15];return n[0]=a*b+o*_+s*z+c*D,n[4]=a*w+o*S+s*C+c*U,n[8]=a*T+o*R+s*P+c*H,n[12]=a*M+o*A+s*L+c*O,n[1]=l*b+u*_+h*z+d*D,n[5]=l*w+u*S+h*C+d*U,n[9]=l*T+u*R+h*P+d*H,n[13]=l*M+u*A+h*L+d*O,n[2]=p*b+f*_+m*z+v*D,n[6]=p*w+f*S+m*C+v*U,n[10]=p*T+f*R+m*P+v*H,n[14]=p*M+f*A+m*L+v*O,n[3]=g*b+y*_+x*z+E*D,n[7]=g*w+y*S+x*C+E*U,n[11]=g*T+y*R+x*P+E*H,n[15]=g*M+y*A+x*L+E*O,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new St;return function(t){for(var r=0,i=t.count;r<i;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix4(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],a=e[1],o=e[5],s=e[9],c=e[13],l=e[2],u=e[6],h=e[10],d=e[14],p=e[3],f=e[7],m=e[11],v=e[15];return p*(+n*s*u-i*c*u-n*o*h+r*c*h+i*o*d-r*s*d)+f*(+t*s*d-t*c*h+n*a*h-i*a*d+i*c*l-n*s*l)+m*(+t*c*u-t*o*d-n*a*u+r*a*d+n*o*l-r*c*l)+v*(-i*o*l-t*s*u+t*o*h+i*a*u-r*a*h+r*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,i=e.elements,n=i[0],a=i[1],o=i[2],s=i[3],c=i[4],l=i[5],u=i[6],h=i[7],d=i[8],p=i[9],f=i[10],m=i[11],v=i[12],g=i[13],y=i[14],x=i[15],E=p*y*h-g*f*h+g*u*m-l*y*m-p*u*x+l*f*x,b=v*f*h-d*y*h-v*u*m+c*y*m+d*u*x-c*f*x,w=d*g*h-v*p*h+v*l*m-c*g*m-d*l*x+c*p*x,T=v*p*u-d*g*u-v*l*f+c*g*f+d*l*y-c*p*y,M=n*E+a*b+o*w+s*T;if(0===M){var _="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(_);return console.warn(_),this.identity()}var S=1/M;return r[0]=E*S,r[1]=(g*f*s-p*y*s-g*o*m+a*y*m+p*o*x-a*f*x)*S,r[2]=(l*y*s-g*u*s+g*o*h-a*y*h-l*o*x+a*u*x)*S,r[3]=(p*u*s-l*f*s-p*o*h+a*f*h+l*o*m-a*u*m)*S,r[4]=b*S,r[5]=(d*y*s-v*f*s+v*o*m-n*y*m-d*o*x+n*f*x)*S,r[6]=(v*u*s-c*y*s-v*o*h+n*y*h+c*o*x-n*u*x)*S,r[7]=(c*f*s-d*u*s+d*o*h-n*f*h-c*o*m+n*u*m)*S,r[8]=w*S,r[9]=(v*p*s-d*g*s-v*a*m+n*g*m+d*a*x-n*p*x)*S,r[10]=(c*g*s-v*l*s+v*a*h-n*g*h-c*a*x+n*l*x)*S,r[11]=(d*l*s-c*p*s-d*a*h+n*p*h+c*a*m-n*l*m)*S,r[12]=T*S,r[13]=(d*g*o-v*p*o+v*a*f-n*g*f-d*a*y+n*p*y)*S,r[14]=(v*l*o-c*g*o-v*a*u+n*g*u+c*a*y-n*l*y)*S,r[15]=(c*p*o-d*l*o+d*a*u-n*p*u-c*a*f+n*l*f)*S,this},scale:function(e){var t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),i=Math.sin(t),n=1-r,a=e.x,o=e.y,s=e.z,c=n*a,l=n*o;return this.set(c*a+r,c*o-i*s,c*s+i*o,0,c*o+i*s,l*o+r,l*s-i*a,0,c*s-i*o,l*s+i*a,n*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r){return this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,r){return this.makeRotationFromQuaternion(t),this.scale(r),this.setPosition(e),this},decompose:function(){var e=new St,t=new Rt;return function(r,i,n){var a=this.elements,o=e.set(a[0],a[1],a[2]).length(),s=e.set(a[4],a[5],a[6]).length(),c=e.set(a[8],a[9],a[10]).length(),l=this.determinant();l<0&&(o=-o),r.x=a[12],r.y=a[13],r.z=a[14],t.copy(this);var u=1/o,h=1/s,d=1/c;return t.elements[0]*=u,t.elements[1]*=u,t.elements[2]*=u,t.elements[4]*=h,t.elements[5]*=h,t.elements[6]*=h,t.elements[8]*=d,t.elements[9]*=d,t.elements[10]*=d,i.setFromRotationMatrix(t),n.x=o,n.y=s,n.z=c,this}}(),makePerspective:function(e,t,r,i,n,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*n/(t-e),c=2*n/(r-i),l=(t+e)/(t-e),u=(r+i)/(r-i),h=-(a+n)/(a-n),d=-2*a*n/(a-n);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=c,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,r,i,n,a){var o=this.elements,s=1/(t-e),c=1/(r-i),l=1/(a-n),u=(t+e)*s,h=(r+i)*c,d=(a+n)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}),At.prototype=Object.create(bt.prototype),At.prototype.constructor=At,At.prototype.isDataTexture=!0,zt.prototype=Object.create(bt.prototype),zt.prototype.constructor=zt,zt.prototype.isCubeTexture=!0,Object.defineProperty(zt.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Ct=new bt,Pt=new zt;function Lt(){this.seq=[],this.map={}}var Dt=[],Ut=[],Ht=new Float32Array(16),Ot=new Float32Array(9);function It(e,t,r){var i=e[0];if(i<=0||i>0)return e;var n=t*r,a=Dt[n];if(void 0===a&&(a=new Float32Array(n),Dt[n]=a),0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=r,e[o].toArray(a,s)}return a}function Nt(e,t){var r=Ut[t];void 0===r&&(r=new Int32Array(t),Ut[t]=r);for(var i=0;i!==t;++i)r[i]=e.allocTextureUnit();return r}function Bt(e,t){e.uniform1f(this.addr,t)}function Ft(e,t){e.uniform1i(this.addr,t)}function Gt(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function Vt(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function jt(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function kt(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function Wt(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(Ot.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Ot))}function Xt(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(Ht.set(t.elements),e.uniformMatrix4fv(this.addr,!1,Ht))}function qt(e,t,r){var i=r.allocTextureUnit();e.uniform1i(this.addr,i),r.setTexture2D(t||Ct,i)}function Yt(e,t,r){var i=r.allocTextureUnit();e.uniform1i(this.addr,i),r.setTextureCube(t||Pt,i)}function Zt(e,t){e.uniform2iv(this.addr,t)}function Qt(e,t){e.uniform3iv(this.addr,t)}function Jt(e,t){e.uniform4iv(this.addr,t)}function Kt(e,t){e.uniform1fv(this.addr,t)}function $t(e,t){e.uniform1iv(this.addr,t)}function er(e,t){e.uniform2fv(this.addr,It(t,this.size,2))}function tr(e,t){e.uniform3fv(this.addr,It(t,this.size,3))}function rr(e,t){e.uniform4fv(this.addr,It(t,this.size,4))}function ir(e,t){e.uniformMatrix2fv(this.addr,!1,It(t,this.size,4))}function nr(e,t){e.uniformMatrix3fv(this.addr,!1,It(t,this.size,9))}function ar(e,t){e.uniformMatrix4fv(this.addr,!1,It(t,this.size,16))}function or(e,t,r){var i=t.length,n=Nt(r,i);e.uniform1iv(this.addr,n);for(var a=0;a!==i;++a)r.setTexture2D(t[a]||Ct,n[a])}function sr(e,t,r){var i=t.length,n=Nt(r,i);e.uniform1iv(this.addr,n);for(var a=0;a!==i;++a)r.setTextureCube(t[a]||Pt,n[a])}function cr(e,t,r){this.id=e,this.addr=r,this.setValue=function(e){switch(e){case 5126:return Bt;case 35664:return Gt;case 35665:return Vt;case 35666:return jt;case 35674:return kt;case 35675:return Wt;case 35676:return Xt;case 35678:return qt;case 35680:return Yt;case 5124:case 35670:return Ft;case 35667:case 35671:return Zt;case 35668:case 35672:return Qt;case 35669:case 35673:return Jt}}(t.type)}function lr(e,t,r){this.id=e,this.addr=r,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Kt;case 35664:return er;case 35665:return tr;case 35666:return rr;case 35674:return ir;case 35675:return nr;case 35676:return ar;case 35678:return or;case 35680:return sr;case 5124:case 35670:return $t;case 35667:case 35671:return Zt;case 35668:case 35672:return Qt;case 35669:case 35673:return Jt}}(t.type)}function ur(e){this.id=e,Lt.call(this)}ur.prototype.setValue=function(e,t){for(var r=this.seq,i=0,n=r.length;i!==n;++i){var a=r[i];a.setValue(e,t[a.id])}};var hr=/([\w\d_]+)(\])?(\[|\.)?/g;function dr(e,t){e.seq.push(t),e.map[t.id]=t}function pr(e,t,r){var i=e.name,n=i.length;for(hr.lastIndex=0;;){var a=hr.exec(i),o=hr.lastIndex,s=a[1],c="]"===a[2],l=a[3];if(c&&(s|=0),void 0===l||"["===l&&o+2===n){dr(r,void 0===l?new cr(s,e,t):new lr(s,e,t));break}var u=r.map,h=u[s];void 0===h&&(h=new ur(s),dr(r,h)),r=h}}function fr(e,t,r){Lt.call(this),this.renderer=r;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;++n){var a=e.getActiveUniform(t,n),o=a.name,s=e.getUniformLocation(t,o);pr(a,s,this)}}fr.prototype.setValue=function(e,t,r){var i=this.map[t];void 0!==i&&i.setValue(e,r,this.renderer)},fr.prototype.setOptional=function(e,t,r){var i=t[r];void 0!==i&&this.setValue(e,r,i)},fr.upload=function(e,t,r,i){for(var n=0,a=t.length;n!==a;++n){var o=t[n],s=r[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}},fr.seqWithValue=function(e,t){for(var r=[],i=0,n=e.length;i!==n;++i){var a=e[i];a.id in t&&r.push(a)}return r};var mr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vr(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}Object.assign(vr.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}return function(t,r,i){if(t=dt.euclideanModulo(t,1),r=dt.clamp(r,0,1),i=dt.clamp(i,0,1),0===r)this.r=this.g=this.b=i;else{var n=i<=.5?i*(1+r):i+r-i*r,a=2*i-n;this.r=e(a,n,t+1/3),this.g=e(a,n,t),this.b=e(a,n,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,n=r[1],a=r[2];switch(n){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,c=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(o,s,c)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=r[1],u=l.length;if(3===u)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(e&&e.length>0){var l=mr[e];void 0!==l?this.setHex(l):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,r,i=e||{h:0,s:0,l:0},n=this.r,a=this.g,o=this.b,s=Math.max(n,a,o),c=Math.min(n,a,o),l=(c+s)/2;if(c===s)t=0,r=0;else{var u=s-c;switch(r=l<=.5?u/(s+c):u/(2-s-c),s){case n:t=(a-o)/u+(a<o?6:0);break;case a:t=(o-n)/u+2;break;case o:t=(n-a)/u+4}t/=6}return i.h=t,i.s=r,i.l=l,i},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){var i=this.getHSL();return i.h+=e,i.s+=t,i.l+=r,this.setHSL(i.h,i.s,i.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var gr={common:{diffuse:{value:new vr(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new wt(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new pt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vr(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new vr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new wt(0,0,1,1)}}},yr={merge:function(e){for(var t={},r=0;r<e.length;r++){var i=this.clone(e[r]);for(var n in i)t[n]=i[n]}return t},clone:function(e){var t={};for(var r in e)for(var i in t[r]={},e[r]){var n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}return t}},xr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"},Er={basic:{uniforms:yr.merge([gr.common,gr.aomap,gr.lightmap,gr.fog]),vertexShader:xr.meshbasic_vert,fragmentShader:xr.meshbasic_frag},lambert:{uniforms:yr.merge([gr.common,gr.aomap,gr.lightmap,gr.emissivemap,gr.fog,gr.lights,{emissive:{value:new vr(0)}}]),vertexShader:xr.meshlambert_vert,fragmentShader:xr.meshlambert_frag},phong:{uniforms:yr.merge([gr.common,gr.aomap,gr.lightmap,gr.emissivemap,gr.bumpmap,gr.normalmap,gr.displacementmap,gr.gradientmap,gr.fog,gr.lights,{emissive:{value:new vr(0)},specular:{value:new vr(1118481)},shininess:{value:30}}]),vertexShader:xr.meshphong_vert,fragmentShader:xr.meshphong_frag},standard:{uniforms:yr.merge([gr.common,gr.aomap,gr.lightmap,gr.emissivemap,gr.bumpmap,gr.normalmap,gr.displacementmap,gr.roughnessmap,gr.metalnessmap,gr.fog,gr.lights,{emissive:{value:new vr(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:xr.meshphysical_vert,fragmentShader:xr.meshphysical_frag},points:{uniforms:yr.merge([gr.points,gr.fog]),vertexShader:xr.points_vert,fragmentShader:xr.points_frag},dashed:{uniforms:yr.merge([gr.common,gr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xr.linedashed_vert,fragmentShader:xr.linedashed_frag},depth:{uniforms:yr.merge([gr.common,gr.displacementmap]),vertexShader:xr.depth_vert,fragmentShader:xr.depth_frag},normal:{uniforms:yr.merge([gr.common,gr.bumpmap,gr.normalmap,gr.displacementmap,{opacity:{value:1}}]),vertexShader:xr.normal_vert,fragmentShader:xr.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xr.cube_vert,fragmentShader:xr.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:xr.equirect_vert,fragmentShader:xr.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new St}},vertexShader:xr.distanceRGBA_vert,fragmentShader:xr.distanceRGBA_frag}};function br(e,t){this.min=void 0!==e?e:new pt(1/0,1/0),this.max=void 0!==t?t:new pt(-1/0,-1/0)}function wr(e,t){var r,i,n,a,o,s,c,l,u=e.context,h=e.state;function d(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),d=new Uint16Array([0,1,2,0,2,3]);r=u.createBuffer(),i=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,r),u.bufferData(u.ARRAY_BUFFER,t,u.STATIC_DRAW),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),u.bufferData(u.ELEMENT_ARRAY_BUFFER,d,u.STATIC_DRAW),c=u.createTexture(),l=u.createTexture(),h.bindTexture(u.TEXTURE_2D,c),u.texImage2D(u.TEXTURE_2D,0,u.RGB,16,16,0,u.RGB,u.UNSIGNED_BYTE,null),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),h.bindTexture(u.TEXTURE_2D,l),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,16,16,0,u.RGBA,u.UNSIGNED_BYTE,null),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),n={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},a=function(t){var r=u.createProgram(),i=u.createShader(u.FRAGMENT_SHADER),n=u.createShader(u.VERTEX_SHADER),a="precision "+e.getPrecision()+" float;\n";return u.shaderSource(i,a+t.fragmentShader),u.shaderSource(n,a+t.vertexShader),u.compileShader(i),u.compileShader(n),u.attachShader(r,i),u.attachShader(r,n),u.linkProgram(r),r}(n),o={vertex:u.getAttribLocation(a,"position"),uv:u.getAttribLocation(a,"uv")},s={renderType:u.getUniformLocation(a,"renderType"),map:u.getUniformLocation(a,"map"),occlusionMap:u.getUniformLocation(a,"occlusionMap"),opacity:u.getUniformLocation(a,"opacity"),color:u.getUniformLocation(a,"color"),scale:u.getUniformLocation(a,"scale"),rotation:u.getUniformLocation(a,"rotation"),screenPosition:u.getUniformLocation(a,"screenPosition")}}this.render=function(n,p,f){if(0!==t.length){var m=new St,v=f.w/f.z,g=.5*f.z,y=.5*f.w,x=16/f.w,E=new pt(x*v,x),b=new St(1,1,0),w=new pt(1,1),T=new br;T.min.set(f.x,f.y),T.max.set(f.x+(f.z-16),f.y+(f.w-16)),void 0===a&&d(),u.useProgram(a),h.initAttributes(),h.enableAttribute(o.vertex),h.enableAttribute(o.uv),h.disableUnusedAttributes(),u.uniform1i(s.occlusionMap,0),u.uniform1i(s.map,1),u.bindBuffer(u.ARRAY_BUFFER,r),u.vertexAttribPointer(o.vertex,2,u.FLOAT,!1,16,0),u.vertexAttribPointer(o.uv,2,u.FLOAT,!1,16,8),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),h.disable(u.CULL_FACE),h.buffers.depth.setMask(!1);for(var M=0,_=t.length;M<_;M++){x=16/f.w,E.set(x*v,x);var S=t[M];if(m.set(S.matrixWorld.elements[12],S.matrixWorld.elements[13],S.matrixWorld.elements[14]),m.applyMatrix4(p.matrixWorldInverse),m.applyMatrix4(p.projectionMatrix),b.copy(m),w.x=f.x+b.x*g+g-8,w.y=f.y+b.y*y+y-8,!0===T.containsPoint(w)){h.activeTexture(u.TEXTURE0),h.bindTexture(u.TEXTURE_2D,null),h.activeTexture(u.TEXTURE1),h.bindTexture(u.TEXTURE_2D,c),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGB,w.x,w.y,16,16,0),u.uniform1i(s.renderType,0),u.uniform2f(s.scale,E.x,E.y),u.uniform3f(s.screenPosition,b.x,b.y,b.z),h.disable(u.BLEND),h.enable(u.DEPTH_TEST),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0),h.activeTexture(u.TEXTURE0),h.bindTexture(u.TEXTURE_2D,l),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGBA,w.x,w.y,16,16,0),u.uniform1i(s.renderType,1),h.disable(u.DEPTH_TEST),h.activeTexture(u.TEXTURE1),h.bindTexture(u.TEXTURE_2D,c),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0),S.positionScreen.copy(b),S.customUpdateCallback?S.customUpdateCallback(S):S.updateLensFlares(),u.uniform1i(s.renderType,2),h.enable(u.BLEND);for(var R=0,A=S.lensFlares.length;R<A;R++){var z=S.lensFlares[R];z.opacity>.001&&z.scale>.001&&(b.x=z.x,b.y=z.y,b.z=z.z,x=z.size*z.scale/f.w,E.x=x*v,E.y=x,u.uniform3f(s.screenPosition,b.x,b.y,b.z),u.uniform2f(s.scale,E.x,E.y),u.uniform1f(s.rotation,z.rotation),u.uniform1f(s.opacity,z.opacity),u.uniform3f(s.color,z.color.r,z.color.g,z.color.b),h.setBlending(z.blending,z.blendEquation,z.blendSrc,z.blendDst),e.setTexture2D(z.texture,1),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0))}}}h.enable(u.CULL_FACE),h.enable(u.DEPTH_TEST),h.buffers.depth.setMask(!0),e.resetGLState()}}}function Tr(e,t){var r,i,n,a,o,s,c=e.context,l=e.state,u=new St,h=new _t,d=new St;function p(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),l=new Uint16Array([0,1,2,0,2,3]);r=c.createBuffer(),i=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,r),c.bufferData(c.ARRAY_BUFFER,t,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),c.bufferData(c.ELEMENT_ARRAY_BUFFER,l,c.STATIC_DRAW),n=function(){var t=c.createProgram(),r=c.createShader(c.VERTEX_SHADER),i=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),c.shaderSource(i,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),c.compileShader(r),c.compileShader(i),c.attachShader(t,r),c.attachShader(t,i),c.linkProgram(t),t}(),a={position:c.getAttribLocation(n,"position"),uv:c.getAttribLocation(n,"uv")},o={uvOffset:c.getUniformLocation(n,"uvOffset"),uvScale:c.getUniformLocation(n,"uvScale"),rotation:c.getUniformLocation(n,"rotation"),scale:c.getUniformLocation(n,"scale"),color:c.getUniformLocation(n,"color"),map:c.getUniformLocation(n,"map"),opacity:c.getUniformLocation(n,"opacity"),modelViewMatrix:c.getUniformLocation(n,"modelViewMatrix"),projectionMatrix:c.getUniformLocation(n,"projectionMatrix"),fogType:c.getUniformLocation(n,"fogType"),fogDensity:c.getUniformLocation(n,"fogDensity"),fogNear:c.getUniformLocation(n,"fogNear"),fogFar:c.getUniformLocation(n,"fogFar"),fogColor:c.getUniformLocation(n,"fogColor"),alphaTest:c.getUniformLocation(n,"alphaTest")};var u=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");u.width=8,u.height=8;var h=u.getContext("2d");h.fillStyle="white",h.fillRect(0,0,8,8),(s=new bt(u)).needsUpdate=!0}function f(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(m,v){if(0!==t.length){void 0===n&&p(),c.useProgram(n),l.initAttributes(),l.enableAttribute(a.position),l.enableAttribute(a.uv),l.disableUnusedAttributes(),l.disable(c.CULL_FACE),l.enable(c.BLEND),c.bindBuffer(c.ARRAY_BUFFER,r),c.vertexAttribPointer(a.position,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(a.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),c.uniformMatrix4fv(o.projectionMatrix,!1,v.projectionMatrix.elements),l.activeTexture(c.TEXTURE0),c.uniform1i(o.map,0);var g=0,y=0,x=m.fog;x?(c.uniform3f(o.fogColor,x.color.r,x.color.g,x.color.b),x.isFog?(c.uniform1f(o.fogNear,x.near),c.uniform1f(o.fogFar,x.far),c.uniform1i(o.fogType,1),g=1,y=1):x.isFogExp2&&(c.uniform1f(o.fogDensity,x.density),c.uniform1i(o.fogType,2),g=2,y=2)):(c.uniform1i(o.fogType,0),g=0,y=0);for(var E=0,b=t.length;E<b;E++){var w=t[E];w.modelViewMatrix.multiplyMatrices(v.matrixWorldInverse,w.matrixWorld),w.z=-w.modelViewMatrix.elements[14]}t.sort(f);for(var T=[],E=0,b=t.length;E<b;E++){var w=t[E],M=w.material;if(!1!==M.visible){c.uniform1f(o.alphaTest,M.alphaTest),c.uniformMatrix4fv(o.modelViewMatrix,!1,w.modelViewMatrix.elements),w.matrixWorld.decompose(u,h,d),T[0]=d.x,T[1]=d.y;var _=0;m.fog&&M.fog&&(_=y),g!==_&&(c.uniform1i(o.fogType,_),g=_),null!==M.map?(c.uniform2f(o.uvOffset,M.map.offset.x,M.map.offset.y),c.uniform2f(o.uvScale,M.map.repeat.x,M.map.repeat.y)):(c.uniform2f(o.uvOffset,0,0),c.uniform2f(o.uvScale,1,1)),c.uniform1f(o.opacity,M.opacity),c.uniform3f(o.color,M.color.r,M.color.g,M.color.b),c.uniform1f(o.rotation,M.rotation),c.uniform2fv(o.scale,T),l.setBlending(M.blending,M.blendEquation,M.blendSrc,M.blendDst),l.buffers.depth.setTest(M.depthTest),l.buffers.depth.setMask(M.depthWrite),M.map?e.setTexture2D(M.map,0):e.setTexture2D(s,0),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)}}l.enable(c.CULL_FACE),e.resetGLState()}}}Er.physical={uniforms:yr.merge([Er.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:xr.meshphysical_vert,fragmentShader:xr.meshphysical_frag},Object.assign(br.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new pt;return function(t,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new pt;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new pt;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var r=t||new pt;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){var r=t||new pt;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new pt;return function(t){var r=e.copy(t).clamp(this.min,this.max);return r.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Mr,_r,Sr,Rr,Ar,zr,Cr,Pr,Lr,Dr,Ur,Hr=0;function Or(){Object.defineProperty(this,"id",{value:Hr++}),this.uuid=dt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=M,this.side=m,this.shading=x,this.vertexColors=E,this.opacity=1,this.transparent=!1,this.blendSrc=N,this.blendDst=B,this.blendEquation=z,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Y,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.needsUpdate=!0}function Ir(e){Or.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Nr(e){Or.call(this),this.type="MeshDepthMaterial",this.depthPacking=ut,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Br(e,t){this.min=void 0!==e?e:new St(1/0,1/0,1/0),this.max=void 0!==t?t:new St(-1/0,-1/0,-1/0)}function Fr(e,t){this.center=void 0!==e?e:new St,this.radius=void 0!==t?t:0}function Gr(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function Vr(e,t){this.normal=void 0!==e?e:new St(1,0,0),this.constant=void 0!==t?t:0}function jr(e,t,r,i,n,a){this.planes=[void 0!==e?e:new Vr,void 0!==t?t:new Vr,void 0!==r?r:new Vr,void 0!==i?i:new Vr,void 0!==n?n:new Vr,void 0!==a?a:new Vr]}function kr(e,t,r,i){var n=e.context,a=e.state,o=new jr,s=new Rt,c=t.shadows,l=new pt,u=new pt(i.maxTextureSize,i.maxTextureSize),h=new St,d=new St,f=1,y=2,x=1+(f|y),E=new Array(x),b=new Array(x),w={},T=[new St(1,0,0),new St(-1,0,0),new St(0,0,1),new St(0,0,-1),new St(0,1,0),new St(0,-1,0)],M=[new St(0,1,0),new St(0,1,0),new St(0,1,0),new St(0,1,0),new St(0,0,1),new St(0,0,-1)],_=[new wt,new wt,new wt,new wt,new wt,new wt],S=new Nr;S.depthPacking=ht,S.clipping=!0;for(var R=Er.distanceRGBA,A=yr.clone(R.uniforms),z=0;z!==x;++z){var C=0!=(z&f),P=0!=(z&y),L=S.clone();L.morphTargets=C,L.skinning=P,E[z]=L;var D=new Ir({defines:{USE_SHADOWMAP:""},uniforms:A,vertexShader:R.vertexShader,fragmentShader:R.fragmentShader,morphTargets:C,skinning:P,clipping:!0});b[z]=D}var U=this;function H(t,r,i,n){var a=t.geometry,o=null,s=E,c=t.customDepthMaterial;if(i&&(s=b,c=t.customDistanceMaterial),c)o=c;else{var l=!1;r.morphTargets&&(a&&a.isBufferGeometry?l=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:a&&a.isGeometry&&(l=a.morphTargets&&a.morphTargets.length>0)),t.isSkinnedMesh&&!1===r.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var u=t.isSkinnedMesh&&r.skinning,h=0;l&&(h|=f),u&&(h|=y),o=s[h]}if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var d=o.uuid,p=r.uuid,x=w[d];void 0===x&&(x={},w[d]=x);var T=x[p];void 0===T&&(T=o.clone(),x[p]=T),o=T}o.visible=r.visible,o.wireframe=r.wireframe;var M=r.side;return U.renderSingleSided&&M==g&&(M=m),U.renderReverseSided&&(M===m?M=v:M===v&&(M=m)),o.side=M,o.clipShadows=r.clipShadows,o.clippingPlanes=r.clippingPlanes,o.wireframeLinewidth=r.wireframeLinewidth,o.linewidth=r.linewidth,i&&void 0!==o.uniforms.lightPos&&o.uniforms.lightPos.value.copy(n),o}function O(t,i,n,a){if(!1!==t.visible){var s=t.layers.test(i.layers);if(s&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(!t.frustumCulled||o.intersectsObject(t))){t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld);var c=r.update(t),l=t.material;if(Array.isArray(l))for(var u=c.groups,h=0,p=u.length;h<p;h++){var f=u[h],m=l[f.materialIndex];if(m&&m.visible){var v=H(t,m,a,d);e.renderBufferDirect(n,null,c,v,t,f)}}else if(l.visible){var v=H(t,l,a,d);e.renderBufferDirect(n,null,c,v,t,null)}}for(var g=t.children,y=0,x=g.length;y<x;y++)O(g[y],i,n,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,r){if(!1!==U.enabled&&(!1!==U.autoUpdate||!1!==U.needsUpdate)&&0!==c.length){var i,p;a.disable(n.BLEND),a.buffers.color.setClear(1,1,1,1),a.buffers.depth.setTest(!0),a.setScissorTest(!1);for(var f=0,m=c.length;f<m;f++){var v=c[f],g=v.shadow;if(void 0!==g){var y=g.camera,x=g.matrix;if(d.setFromMatrixPosition(v.matrixWorld),y.position.copy(d),l.copy(g.mapSize),l.min(u),v&&v.isPointLight){i=6,p=!0;var E=l.x,b=l.y;_[0].set(2*E,b,E,b),_[1].set(0,b,E,b),_[2].set(3*E,b,E,b),_[3].set(E,b,E,b),_[4].set(3*E,0,E,b),_[5].set(E,0,E,b),l.x*=4,l.y*=2,x.makeTranslation(-d.x,-d.y,-d.z)}else i=1,p=!1,h.setFromMatrixPosition(v.target.matrixWorld),y.lookAt(h),y.updateMatrixWorld(),y.matrixWorldInverse.getInverse(y.matrixWorld),x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(y.projectionMatrix),x.multiply(y.matrixWorldInverse);if(null===g.map){var w={minFilter:ge,magFilter:ge,format:Ie};g.map=new Tt(l.x,l.y,w),g.map.texture.name=v.name+".shadowMap",y.updateProjectionMatrix()}g.isSpotLightShadow&&g.update(v);var S=g.map;e.setRenderTarget(S),e.clear();for(var R=0;R<i;R++){if(p){h.copy(y.position),h.add(T[R]),y.up.copy(M[R]),y.lookAt(h),y.updateMatrixWorld(),y.matrixWorldInverse.getInverse(y.matrixWorld);var A=_[R];a.viewport(A)}s.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),o.setFromMatrix(s),O(t,r,y,p)}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}var z=e.getClearColor(),C=e.getClearAlpha();e.setClearColor(z,C),U.needsUpdate=!1}}}function Wr(e,t){this.origin=void 0!==e?e:new St,this.direction=void 0!==t?t:new St}function Xr(e,t,r,i){this._x=e||0,this._y=t||0,this._z=r||0,this._order=i||Xr.DefaultOrder}function qr(){this.mask=1}Object.assign(Or.prototype,t.prototype,{isMaterial:!0,setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){var i=this[t];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]="overdraw"===t?Number(r):r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e;t&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var r in e){var i=e[r];delete i.metadata,t.push(i)}return t}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==M&&(r.blending=this.blending),this.shading!==x&&(r.shading=this.shading),this.side!==m&&(r.side=this.side),this.vertexColors!==E&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),r.skinning=this.skinning,r.morphTargets=this.morphTargets,r.dithering=this.dithering,t){var n=i(e.textures),a=i(e.images);n.length>0&&(r.textures=n),a.length>0&&(r.images=a)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(null!==t){var i=t.length;r=new Array(i);for(var n=0;n!==i;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ir.prototype=Object.create(Or.prototype),Ir.prototype.constructor=Ir,Ir.prototype.isShaderMaterial=!0,Ir.prototype.copy=function(e){return Or.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=yr.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Ir.prototype.toJSON=function(e){var t=Or.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Nr.prototype=Object.create(Or.prototype),Nr.prototype.constructor=Nr,Nr.prototype.isMeshDepthMaterial=!0,Nr.prototype.copy=function(e){return Or.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Object.assign(Br.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,i=1/0,n=-1/0,a=-1/0,o=-1/0,s=0,c=e.length;s<c;s+=3){var l=e[s],u=e[s+1],h=e[s+2];l<t&&(t=l),u<r&&(r=u),h<i&&(i=h),l>n&&(n=l),u>a&&(a=u),h>o&&(o=h)}return this.min.set(t,r,i),this.max.set(n,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,i=1/0,n=-1/0,a=-1/0,o=-1/0,s=0,c=e.count;s<c;s++){var l=e.getX(s),u=e.getY(s),h=e.getZ(s);l<t&&(t=l),u<r&&(r=u),h<i&&(i=h),l>n&&(n=l),u>a&&(a=u),h>o&&(o=h)}return this.min.set(t,r,i),this.max.set(n,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new St;return function(t,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new St;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new St;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e=new St;return function(t){var r=this;return t.updateMatrixWorld(!0),t.traverse(function(t){var i,n,a=t.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(i=0,n=o.length;i<n;i++)e.copy(o[i]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(i=0,n=s.count;i<n;i++)e.fromBufferAttribute(s,i).applyMatrix4(t.matrixWorld),r.expandByPoint(e)}}),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var r=t||new St;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(Ur=new St,function(e){return this.clampPoint(e.center,Ur),Ur.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=e.constant&&r>=e.constant},clampPoint:function(e,t){var r=t||new St;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new St;return function(t){var r=e.copy(t).clamp(this.min,this.max);return r.sub(t).length()}}(),getBoundingSphere:function(){var e=new St;return function(t){var r=t||new Fr;return this.getCenter(r.center),r.radius=.5*this.getSize(e).length(),r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(Dr=[new St,new St,new St,new St,new St,new St,new St,new St],function(e){return this.isEmpty()?this:(Dr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Dr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Dr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Dr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Dr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Dr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Dr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Dr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Dr),this)}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Fr.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(Lr=new Br,function(e,t){var r=this.center;void 0!==t?r.copy(t):Lr.setFromPoints(e).getCenter(r);for(var i=0,n=0,a=e.length;n<a;n++)i=Math.max(i,r.distanceToSquared(e[n]));return this.radius=Math.sqrt(i),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),i=t||new St;return i.copy(e),r>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(e){var t=e||new Br;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(Gr.prototype,{isMatrix3:!0,set:function(e,t,r,i,n,a,o,s,c){var l=this.elements;return l[0]=e,l[1]=i,l[2]=o,l[3]=t,l[4]=n,l[5]=s,l[6]=r,l[7]=a,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new St;return function(t){for(var r=0,i=t.count;r<i;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,i=t.elements,n=this.elements,a=r[0],o=r[3],s=r[6],c=r[1],l=r[4],u=r[7],h=r[2],d=r[5],p=r[8],f=i[0],m=i[3],v=i[6],g=i[1],y=i[4],x=i[7],E=i[2],b=i[5],w=i[8];return n[0]=a*f+o*g+s*E,n[3]=a*m+o*y+s*b,n[6]=a*v+o*x+s*w,n[1]=c*f+l*g+u*E,n[4]=c*m+l*y+u*b,n[7]=c*v+l*x+u*w,n[2]=h*f+d*g+p*E,n[5]=h*m+d*y+p*b,n[8]=h*v+d*x+p*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8];return t*a*l-t*o*c-r*n*l+r*o*s+i*n*c-i*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var r=e.elements,i=this.elements,n=r[0],a=r[1],o=r[2],s=r[3],c=r[4],l=r[5],u=r[6],h=r[7],d=r[8],p=d*c-l*h,f=l*u-d*s,m=h*s-c*u,v=n*p+a*f+o*m;if(0===v){var g="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return i[0]=p*y,i[1]=(o*h-d*a)*y,i[2]=(l*a-o*c)*y,i[3]=f*y,i[4]=(d*n-o*u)*y,i[5]=(o*s-l*n)*y,i[6]=m*y,i[7]=(a*u-h*n)*y,i[8]=(c*n-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},equals:function(e){for(var t=this.elements,r=e.elements,i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}}),Object.assign(Vr.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new St,t=new St;return function(r,i,n){var a=e.subVectors(n,i).cross(t.subVectors(r,i)).normalize();return this.setFromNormalAndCoplanarPoint(a,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var r=this.distanceToPoint(e),i=t||new St;return i.copy(this.normal).multiplyScalar(r)},intersectLine:function(){var e=new St;return function(t,r){var i=r||new St,n=t.delta(e),a=this.normal.dot(n);if(0===a)return 0===this.distanceToPoint(t.start)?i.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/a;return o<0||o>1?void 0:i.copy(n).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new St;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new St,t=new Gr;return function(r,i){var n=this.coplanarPoint(e).applyMatrix4(r),a=i||t.getNormalMatrix(r),o=this.normal.applyMatrix3(a).normalize();return this.constant=-n.dot(o),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(jr.prototype,{set:function(e,t,r,i,n,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(n),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],c=r[5],l=r[6],u=r[7],h=r[8],d=r[9],p=r[10],f=r[11],m=r[12],v=r[13],g=r[14],y=r[15];return t[0].setComponents(o-i,u-s,f-h,y-m).normalize(),t[1].setComponents(o+i,u+s,f+h,y+m).normalize(),t[2].setComponents(o+n,u+c,f+d,y+v).normalize(),t[3].setComponents(o-n,u-c,f-d,y-v).normalize(),t[4].setComponents(o-a,u-l,f-p,y-g).normalize(),t[5].setComponents(o+a,u+l,f+p,y+g).normalize(),this},intersectsObject:(Pr=new Fr,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Pr.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Pr)}),intersectsSprite:function(){var e=new Fr;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,i=-e.radius,n=0;n<6;n++){var a=t[n].distanceToPoint(r);if(a<i)return!1}return!0},intersectsBox:(zr=new St,Cr=new St,function(e){for(var t=this.planes,r=0;r<6;r++){var i=t[r];zr.x=i.normal.x>0?e.min.x:e.max.x,Cr.x=i.normal.x>0?e.max.x:e.min.x,zr.y=i.normal.y>0?e.min.y:e.max.y,Cr.y=i.normal.y>0?e.max.y:e.min.y,zr.z=i.normal.z>0?e.min.z:e.max.z,Cr.z=i.normal.z>0?e.max.z:e.min.z;var n=i.distanceToPoint(zr),a=i.distanceToPoint(Cr);if(n<0&&a<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}}),Object.assign(Wr.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var r=t||new St;return r.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new St;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new St;r.subVectors(e,this.origin);var i=r.dot(this.direction);return i<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new St;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(Sr=new St,Rr=new St,Ar=new St,function(e,t,r,i){Sr.copy(e).add(t).multiplyScalar(.5),Rr.copy(t).sub(e).normalize(),Ar.copy(this.origin).sub(Sr);var n,a,o,s,c=.5*e.distanceTo(t),l=-this.direction.dot(Rr),u=Ar.dot(this.direction),h=-Ar.dot(Rr),d=Ar.lengthSq(),p=Math.abs(1-l*l);if(p>0)if(a=l*u-h,s=c*p,(n=l*h-u)>=0)if(a>=-s)if(a<=s){var f=1/p;o=(n*=f)*(n+l*(a*=f)+2*u)+a*(l*n+a+2*h)+d}else a=c,n=Math.max(0,-(l*a+u)),o=-n*n+a*(a+2*h)+d;else a=-c,n=Math.max(0,-(l*a+u)),o=-n*n+a*(a+2*h)+d;else a<=-s?(n=Math.max(0,-(-l*c+u)),a=n>0?-c:Math.min(Math.max(-c,-h),c),o=-n*n+a*(a+2*h)+d):a<=s?(n=0,a=Math.min(Math.max(-c,-h),c),o=a*(a+2*h)+d):(n=Math.max(0,-(l*c+u)),a=n>0?c:Math.min(Math.max(-c,-h),c),o=-n*n+a*(a+2*h)+d);else a=l>0?-c:c,n=Math.max(0,-(l*a+u)),o=-n*n+a*(a+2*h)+d;return r&&r.copy(this.direction).multiplyScalar(n).add(this.origin),i&&i.copy(Rr).multiplyScalar(a).add(Sr),o}),intersectSphere:function(){var e=new St;return function(t,r){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),n=e.dot(e)-i*i,a=t.radius*t.radius;if(n>a)return null;var o=Math.sqrt(a-n),s=i-o,c=i+o;return s<0&&c<0?null:s<0?this.at(c,r):this.at(s,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var r=e.normal.dot(this.direction);return r*t<0},intersectBox:function(e,t){var r,i,n,a,o,s,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),l>=0?(n=(e.min.y-h.y)*l,a=(e.max.y-h.y)*l):(n=(e.max.y-h.y)*l,a=(e.min.y-h.y)*l),r>a||n>i?null:((n>r||r!=r)&&(r=n),(a<i||i!=i)&&(i=a),u>=0?(o=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(o=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),r>s||o>i?null:((o>r||r!=r)&&(r=o),(s<i||i!=i)&&(i=s),i<0?null:this.at(r>=0?r:i,t)))},intersectsBox:(_r=new St,function(e){return null!==this.intersectBox(e,_r)}),intersectTriangle:function(){var e=new St,t=new St,r=new St,i=new St;return function(n,a,o,s,c){t.subVectors(a,n),r.subVectors(o,n),i.crossVectors(t,r);var l,u=this.direction.dot(i);if(u>0){if(s)return null;l=1}else{if(!(u<0))return null;l=-1,u=-u}e.subVectors(this.origin,n);var h=l*this.direction.dot(r.crossVectors(e,r));if(h<0)return null;var d=l*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>u)return null;var p=-l*e.dot(i);return p<0?null:this.at(p/u,c)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Xr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Xr.DefaultOrder="XYZ",Object.defineProperties(Xr.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(Xr.prototype,{isEuler:!0,set:function(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var i=dt.clamp,n=e.elements,a=n[0],o=n[4],s=n[8],c=n[1],l=n[5],u=n[9],h=n[2],d=n[6],p=n[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,a))):"ZYX"===t?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(i(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-u,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new Rt;return function(t,r,i){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(Mr=new _t,function(e){return Mr.setFromEuler(this),this.setFromQuaternion(Mr,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new St(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(qr.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var Yr,Zr,Qr,Jr,Kr,$r,ei,ti=0;function ri(){Object.defineProperty(this,"id",{value:ti++}),this.uuid=dt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ri.DefaultUp.clone();var e=new St,t=new Xr,r=new _t,i=new St(1,1,1);t.onChange(function(){r.setFromEuler(t,!1)}),r.onChange(function(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new Rt},normalMatrix:{value:new Gr}}),this.matrix=new Rt,this.matrixWorld=new Rt,this.matrixAutoUpdate=ri.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new qr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function ii(e,t){this.start=void 0!==e?e:new St,this.end=void 0!==t?t:new St}function ni(e,t,r){this.a=void 0!==e?e:new St,this.b=void 0!==t?t:new St,this.c=void 0!==r?r:new St}function ai(e,t,r,i,n,a){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new St,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new vr,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==a?a:0}function oi(e){Or.call(this),this.type="MeshBasicMaterial",this.color=new vr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function si(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=dt.generateUUID(),this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function ci(e,t){si.call(this,new Int8Array(e),t)}function li(e,t){si.call(this,new Uint8Array(e),t)}function ui(e,t){si.call(this,new Uint8ClampedArray(e),t)}function hi(e,t){si.call(this,new Int16Array(e),t)}function di(e,t){si.call(this,new Uint16Array(e),t)}function pi(e,t){si.call(this,new Int32Array(e),t)}function fi(e,t){si.call(this,new Uint32Array(e),t)}function mi(e,t){si.call(this,new Float32Array(e),t)}function vi(e,t){si.call(this,new Float64Array(e),t)}function gi(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function yi(e){if(0===e.length)return-1/0;for(var t=e[0],r=1,i=e.length;r<i;++r)e[r]>t&&(t=e[r]);return t}ri.DefaultUp=new St(0,1,0),ri.DefaultMatrixAutoUpdate=!0,Object.assign(ri.prototype,t.prototype,{isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(ei=new _t,function(e,t){return ei.setFromAxisAngle(e,t),this.quaternion.multiply(ei),this}),rotateX:function(){var e=new St(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new St(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new St(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new St;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new St(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new St(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new St(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:($r=new Rt,function(e){return e.applyMatrix4($r.getInverse(this.matrixWorld))}),lookAt:function(){var e=new Rt;return function(t){this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var r=this.children.indexOf(e);-1!==r&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,i=this.children.length;r<i;r++){var n=this.children[r],a=n.getObjectByProperty(e,t);if(void 0!==a)return a}},getWorldPosition:function(e){var t=e||new St;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(Jr=new St,Kr=new St,function(e){var t=e||new _t;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(Jr,t,Kr),t}),getWorldRotation:function(){var e=new _t;return function(t){var r=t||new Xr;return this.getWorldQuaternion(e),r.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new St,t=new _t;return function(r){var i=r||new St;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i),i}}(),getWorldDirection:function(){var e=new _t;return function(t){var r=t||new St;return this.getWorldQuaternion(e),r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,i=t.length;r<i;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||""===e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function n(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(e)),r.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(i.geometry=n(e.geometries,this.geometry)),void 0!==this.material)if(Array.isArray(this.material)){for(var a=[],o=0,s=this.material.length;o<s;o++)a.push(n(e.materials,this.material[o]));i.material=a}else i.material=n(e.materials,this.material);if(this.children.length>0){i.children=[];for(var o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(t){var c=d(e.geometries),l=d(e.materials),u=d(e.textures),h=d(e.images);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),h.length>0&&(r.images=h)}return r.object=i,r;function d(e){var t=[];for(var r in e){var i=e[r];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var r=0;r<e.children.length;r++){var i=e.children[r];this.add(i.clone())}return this}}),Object.assign(ii.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){var t=e||new St;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new St;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new St;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Zr=new St,Qr=new St,function(e,t){Zr.subVectors(e,this.start),Qr.subVectors(this.end,this.start);var r=Qr.dot(Qr),i=Qr.dot(Zr),n=i/r;return t&&(n=dt.clamp(n,0,1)),n}),closestPointToPoint:function(e,t,r){var i=this.closestPointToPointParameter(e,t),n=r||new St;return this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(ni,{normal:(Yr=new St,function(e,t,r,i){var n=i||new St;n.subVectors(r,t),Yr.subVectors(e,t),n.cross(Yr);var a=n.lengthSq();return a>0?n.multiplyScalar(1/Math.sqrt(a)):n.set(0,0,0)}),barycoordFromPoint:function(){var e=new St,t=new St,r=new St;return function(i,n,a,o,s){e.subVectors(o,n),t.subVectors(a,n),r.subVectors(i,n);var c=e.dot(e),l=e.dot(t),u=e.dot(r),h=t.dot(t),d=t.dot(r),p=c*h-l*l,f=s||new St;if(0===p)return f.set(-2,-1,-1);var m=1/p,v=(h*u-l*d)*m,g=(c*d-l*u)*m;return f.set(1-v-g,g,v)}}(),containsPoint:function(){var e=new St;return function(t,r,i,n){var a=ni.barycoordFromPoint(t,r,i,n,e);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}()}),Object.assign(ni.prototype,{set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new St,t=new St;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new St;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return ni.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new Vr;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return ni.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return ni.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e=new Vr,t=[new ii,new ii,new ii],r=new St,i=new St;return function(n,a){var o=a||new St,s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(n,r),!0===this.containsPoint(r))o.copy(r);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var c=0;c<t.length;c++){t[c].closestPointToPoint(r,!0,i);var l=r.distanceToSquared(i);l<s&&(s=l,o.copy(i))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Object.assign(ai.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),oi.prototype=Object.create(Or.prototype),oi.prototype.constructor=oi,oi.prototype.isMeshBasicMaterial=!0,oi.prototype.copy=function(e){return Or.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.defineProperty(si.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(si.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var i=0,n=this.itemSize;i<n;i++)this.array[e+i]=t.array[r+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new vr),t[r++]=a.r,t[r++]=a.g,t[r++]=a.b}return this},copyIndicesArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var a=e[i];t[r++]=a.a,t[r++]=a.b,t[r++]=a.c}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new pt),t[r++]=a.x,t[r++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new St),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new wt),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z,t[r++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this},setXYZW:function(e,t,r,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),ci.prototype=Object.create(si.prototype),ci.prototype.constructor=ci,li.prototype=Object.create(si.prototype),li.prototype.constructor=li,ui.prototype=Object.create(si.prototype),ui.prototype.constructor=ui,hi.prototype=Object.create(si.prototype),hi.prototype.constructor=hi,di.prototype=Object.create(si.prototype),di.prototype.constructor=di,pi.prototype=Object.create(si.prototype),pi.prototype.constructor=pi,fi.prototype=Object.create(si.prototype),fi.prototype.constructor=fi,mi.prototype=Object.create(si.prototype),mi.prototype.constructor=mi,vi.prototype=Object.create(si.prototype),vi.prototype.constructor=vi,Object.assign(gi.prototype,{computeGroups:function(e){for(var t,r=[],i=void 0,n=e.faces,a=0;a<n.length;a++){var o=n[a];o.materialIndex!==i&&(i=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,r.push(t)),t={start:3*a,materialIndex:i})}void 0!==t&&(t.count=3*a-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,r=e.faces,i=e.vertices,n=e.faceVertexUvs,a=n[0]&&n[0].length>0,o=n[1]&&n[1].length>0,s=e.morphTargets,c=s.length;if(c>0){t=[];for(var l=0;l<c;l++)t[l]=[];this.morphTargets.position=t}var u,h=e.morphNormals,d=h.length;if(d>0){u=[];for(var l=0;l<d;l++)u[l]=[];this.morphTargets.normal=u}for(var p=e.skinIndices,f=e.skinWeights,m=p.length===i.length,v=f.length===i.length,l=0;l<r.length;l++){var g=r[l];this.vertices.push(i[g.a],i[g.b],i[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=g.normal;this.normals.push(x,x,x)}var E=g.vertexColors;if(3===E.length)this.colors.push(E[0],E[1],E[2]);else{var b=g.color;this.colors.push(b,b,b)}if(!0===a){var w=n[0][l];void 0!==w?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new pt,new pt,new pt))}if(!0===o){var w=n[1][l];void 0!==w?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new pt,new pt,new pt))}for(var T=0;T<c;T++){var M=s[T].vertices;t[T].push(M[g.a],M[g.b],M[g.c])}for(var T=0;T<d;T++){var _=h[T].vertexNormals[l];u[T].push(_.a,_.b,_.c)}m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var xi,Ei=0;function bi(){return Ei++}function wi(){Object.defineProperty(this,"id",{value:bi()}),this.uuid=dt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ti(){Object.defineProperty(this,"id",{value:bi()}),this.uuid=dt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Mi(e,t){ri.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Ti,this.material=void 0!==t?t:new oi({color:16777215*Math.random()}),this.drawMode=et,this.updateMorphTargets()}function _i(e,t,r,i,n,a){wi.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:a},this.fromBufferGeometry(new Si(e,t,r,i,n,a)),this.mergeVertices()}function Si(e,t,r,i,n,a){Ti.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:a};var o=this;i=Math.floor(i)||1,n=Math.floor(n)||1,a=Math.floor(a)||1;var s=[],c=[],l=[],u=[],h=0,d=0;function p(e,t,r,i,n,a,p,f,m,v,g){var y,x,E=a/m,b=p/v,w=a/2,T=p/2,M=f/2,_=m+1,S=v+1,R=0,A=0,z=new St;for(x=0;x<S;x++){var C=x*b-T;for(y=0;y<_;y++){var P=y*E-w;z[e]=P*i,z[t]=C*n,z[r]=M,c.push(z.x,z.y,z.z),z[e]=0,z[t]=0,z[r]=f>0?1:-1,l.push(z.x,z.y,z.z),u.push(y/m),u.push(1-x/v),R+=1}}for(x=0;x<v;x++)for(y=0;y<m;y++){var L=h+y+_*x,D=h+y+_*(x+1),U=h+(y+1)+_*(x+1),H=h+(y+1)+_*x;s.push(L,D,H),s.push(D,U,H),A+=6}o.addGroup(d,A,g),d+=A,h+=R}p("z","y","x",-1,-1,r,t,e,a,n,0),p("z","y","x",1,-1,r,t,-e,a,n,1),p("x","z","y",1,1,e,r,t,i,a,2),p("x","z","y",1,-1,e,r,-t,i,a,3),p("x","y","z",1,-1,e,t,r,i,n,4),p("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(s),this.addAttribute("position",new mi(c,3)),this.addAttribute("normal",new mi(l,3)),this.addAttribute("uv",new mi(u,2))}function Ri(e,t,r,i){wi.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i},this.fromBufferGeometry(new Ai(e,t,r,i)),this.mergeVertices()}function Ai(e,t,r,i){Ti.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};var n,a,o=e/2,s=t/2,c=Math.floor(r)||1,l=Math.floor(i)||1,u=c+1,h=l+1,d=e/c,p=t/l,f=[],m=[],v=[],g=[];for(a=0;a<h;a++){var y=a*p-s;for(n=0;n<u;n++){var x=n*d-o;m.push(x,-y,0),v.push(0,0,1),g.push(n/c),g.push(1-a/l)}}for(a=0;a<l;a++)for(n=0;n<c;n++){var E=n+u*a,b=n+u*(a+1),w=n+1+u*(a+1),T=n+1+u*a;f.push(E,b,T),f.push(b,w,T)}this.setIndex(f),this.addAttribute("position",new mi(m,3)),this.addAttribute("normal",new mi(v,3)),this.addAttribute("uv",new mi(g,2))}function zi(){ri.call(this),this.type="Camera",this.matrixWorldInverse=new Rt,this.projectionMatrix=new Rt}function Ci(e,t,r,i){zi.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Pi(e,t,r,i,n,a){zi.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=void 0!==n?n:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Li(e){var t={};return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t[e.uuid]},remove:function(r){var i=t[r.uuid];i&&(e.deleteBuffer(i.buffer),delete t[r.uuid])},update:function(r,i){r.isInterleavedBufferAttribute&&(r=r.data);var n=t[r.uuid];void 0===n?t[r.uuid]=function(t,r){var i=t.array,n=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,a=e.createBuffer();e.bindBuffer(r,a),e.bufferData(r,i,n),t.onUploadCallback();var o=e.FLOAT;return i instanceof Float32Array?o=e.FLOAT:i instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):i instanceof Uint16Array?o=e.UNSIGNED_SHORT:i instanceof Int16Array?o=e.SHORT:i instanceof Uint32Array?o=e.UNSIGNED_INT:i instanceof Int32Array?o=e.INT:i instanceof Int8Array?o=e.BYTE:i instanceof Uint8Array&&(o=e.UNSIGNED_BYTE),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(r,i):n.version<r.version&&(function(t,r,i){var n=r.array,a=r.updateRange;e.bindBuffer(i,t),!1===r.dynamic?e.bufferData(i,n,e.STATIC_DRAW):-1===a.count?e.bufferSubData(i,0,n):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,a.offset*n.BYTES_PER_ELEMENT,n.subarray(a.offset,a.offset+a.count)),a.count=0)}(n.buffer,r,i),n.version=r.version)}}}function Di(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ui(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Hi(){var e=[],t=-1,r=[],i=-1;return{opaque:e,transparent:r,init:function(){t=-1,i=-1},push:function(n,a,o,s,c){var l,u;o.transparent?(l=r,u=++i):(l=e,u=++t);var h=l[u];h?(h.id=n.id,h.object=n,h.geometry=a,h.material=o,h.program=o.program,h.renderOrder=n.renderOrder,h.z=s,h.group=c):(h={id:n.id,object:n,geometry:a,material:o,program:o.program,renderOrder:n.renderOrder,z:s,group:c},l.push(h))},finish:function(){e.length=t+1,r.length=i+1},sort:function(){e.sort(Di),r.sort(Ui)}}}function Oi(){var e={};return{get:function(t,r){var i=t.id+","+r.id,n=e[i];return void 0===n&&(n=new Hi,e[i]=n),n},dispose:function(){e={}}}}function Ii(e,t,r){var i,n,a;this.setMode=function(e){i=e},this.setIndex=function(r){r.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(n=e.UNSIGNED_INT,a=4):r.array instanceof Uint16Array?(n=e.UNSIGNED_SHORT,a=2):(n=e.UNSIGNED_BYTE,a=1)},this.render=function(t,o){e.drawElements(i,o,n,t*a),r.calls++,r.vertices+=o,i===e.TRIANGLES&&(r.faces+=o/3)},this.renderInstances=function(o,s,c){var l=t.get("ANGLE_instanced_arrays");null!==l?(l.drawElementsInstancedANGLE(i,c,n,s*a,o.maxInstancedCount),r.calls++,r.vertices+=c*o.maxInstancedCount,i===e.TRIANGLES&&(r.faces+=o.maxInstancedCount*c/3)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function Ni(e,t,r){var i;this.setMode=function(e){i=e},this.render=function(t,n){e.drawArrays(i,t,n),r.calls++,r.vertices+=n,i===e.TRIANGLES&&(r.faces+=n/3)},this.renderInstances=function(n,a,o){var s=t.get("ANGLE_instanced_arrays");if(null!==s){var c=n.attributes.position;c.isInterleavedBufferAttribute?(o=c.data.count,s.drawArraysInstancedANGLE(i,0,o,n.maxInstancedCount)):s.drawArraysInstancedANGLE(i,a,o,n.maxInstancedCount),r.calls++,r.vertices+=o*n.maxInstancedCount,i===e.TRIANGLES&&(r.faces+=n.maxInstancedCount*o/3)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function Bi(e,t,r){var i={},n={};function a(e){var o=e.target,s=i[o.id];for(var c in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[c]);o.removeEventListener("dispose",a),delete i[o.id];var l=n[o.id];l&&(t.remove(l),delete n[o.id]),(l=n[s.id])&&(t.remove(l),delete n[s.id]),r.geometries--}return{get:function(e,t){var n=i[t.id];return n||(t.addEventListener("dispose",a),t.isBufferGeometry?n=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Ti).setFromObject(e)),n=t._bufferGeometry),i[t.id]=n,r.geometries++,n)},update:function(r){var i=r.index,n=r.attributes;for(var a in null!==i&&t.update(i,e.ELEMENT_ARRAY_BUFFER),n)t.update(n[a],e.ARRAY_BUFFER);var o=r.morphAttributes;for(var a in o)for(var s=o[a],c=0,l=s.length;c<l;c++)t.update(s[c],e.ARRAY_BUFFER)},getWireframeAttribute:function(r){var i=n[r.id];if(i)return i;var a=[],o=r.index,s=r.attributes;if(null!==o)for(var c=o.array,l=0,u=c.length;l<u;l+=3){var h=c[l+0],d=c[l+1],p=c[l+2];a.push(h,d,d,p,p,h)}else for(var c=s.position.array,l=0,u=c.length/3-1;l<u;l+=3){var h=l+0,d=l+1,p=l+2;a.push(h,d,d,p,p,h)}return i=new(yi(a)>65535?fi:di)(a,1),t.update(i,e.ELEMENT_ARRAY_BUFFER),n[r.id]=i,i}}}function Fi(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new St,color:new vr,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new pt};break;case"SpotLight":r={position:new St,direction:new St,color:new vr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new pt};break;case"PointLight":r={position:new St,color:new vr,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new pt};break;case"HemisphereLight":r={direction:new St,skyColor:new vr,groundColor:new vr};break;case"RectAreaLight":r={color:new vr,position:new St,halfWidth:new St,halfHeight:new St}}return e[t.id]=r,r}}}function Gi(e,t,r){var i={};return{update:function(e){var n=r.frame,a=e.geometry,o=t.get(e,a);return i[o.id]!==n&&(a.isGeometry&&o.updateFromObject(e),t.update(o),i[o.id]=n),o},clear:function(){i={}}}}function Vi(e,t,r){var i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),!1===e.getShaderParameter(i,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),function(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}(r)),i}Object.assign(wi.prototype,t.prototype,{isGeometry:!0,applyMatrix:function(e){for(var t=(new Gr).getNormalMatrix(e),r=0,i=this.vertices.length;r<i;r++){var n=this.vertices[r];n.applyMatrix4(e)}for(var r=0,i=this.faces.length;r<i;r++){var a=this.faces[r];a.normal.applyMatrix3(t).normalize();for(var o=0,s=a.vertexNormals.length;o<s;o++)a.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new Rt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Rt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Rt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Rt;return function(t,r,i){return e.makeTranslation(t,r,i),this.applyMatrix(e),this}}(),scale:function(){var e=new Rt;return function(t,r,i){return e.makeScale(t,r,i),this.applyMatrix(e),this}}(),lookAt:(xi=new ri,function(e){xi.lookAt(e),xi.updateMatrix(),this.applyMatrix(xi.matrix)}),fromBufferGeometry:function(e){var t=this,r=null!==e.index?e.index.array:void 0,i=e.attributes,n=i.position.array,a=void 0!==i.normal?i.normal.array:void 0,o=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,c=void 0!==i.uv2?i.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var l=[],u=[],h=[],d=0,p=0;d<n.length;d+=3,p+=2)t.vertices.push(new St(n[d],n[d+1],n[d+2])),void 0!==a&&l.push(new St(a[d],a[d+1],a[d+2])),void 0!==o&&t.colors.push(new vr(o[d],o[d+1],o[d+2])),void 0!==s&&u.push(new pt(s[p],s[p+1])),void 0!==c&&h.push(new pt(c[p],c[p+1]));function f(e,r,i,n){var d=void 0!==a?[l[e].clone(),l[r].clone(),l[i].clone()]:[],p=void 0!==o?[t.colors[e].clone(),t.colors[r].clone(),t.colors[i].clone()]:[],f=new ai(e,r,i,d,p,n);t.faces.push(f),void 0!==s&&t.faceVertexUvs[0].push([u[e].clone(),u[r].clone(),u[i].clone()]),void 0!==c&&t.faceVertexUvs[1].push([h[e].clone(),h[r].clone(),h[i].clone()])}var m=e.groups;if(m.length>0)for(var d=0;d<m.length;d++)for(var v=m[d],g=v.start,y=v.count,p=g,x=g+y;p<x;p+=3)void 0!==r?f(r[p],r[p+1],r[p+2],v.materialIndex):f(p,p+1,p+2,v.materialIndex);else if(void 0!==r)for(var d=0;d<r.length;d+=3)f(r[d],r[d+1],r[d+2]);else for(var d=0;d<n.length/3;d+=3)f(d,d+1,d+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,i=new Rt;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new St,t=new St,r=0,i=this.faces.length;r<i;r++){var n=this.faces[r],a=this.vertices[n.a],o=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e){var t,r,i,n,a,o;for(void 0===e&&(e=!0),o=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)o[t]=new St;if(e){var s,c,l,u=new St,h=new St;for(i=0,n=this.faces.length;i<n;i++)a=this.faces[i],s=this.vertices[a.a],c=this.vertices[a.b],l=this.vertices[a.c],u.subVectors(l,c),h.subVectors(s,c),u.cross(h),o[a.a].add(u),o[a.b].add(u),o[a.c].add(u)}else for(this.computeFaceNormals(),i=0,n=this.faces.length;i<n;i++)a=this.faces[i],o[a.a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,r=this.vertices.length;t<r;t++)o[t].normalize();for(i=0,n=this.faces.length;i<n;i++){var d=(a=this.faces[i]).vertexNormals;3===d.length?(d[0].copy(o[a.a]),d[1].copy(o[a.b]),d[2].copy(o[a.c])):(d[0]=o[a.a].clone(),d[1]=o[a.b].clone(),d[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(r=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,i,n;for(r=0,i=this.faces.length;r<i;r++)for((n=this.faces[r]).__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;e<t;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var a=new wi;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(r=0,i=this.faces.length;r<i;r++)c=new St,l={a:new St,b:new St,c:new St},o.push(c),s.push(l)}var c,l,u=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),r=0,i=this.faces.length;r<i;r++)n=this.faces[r],c=u.faceNormals[r],l=u.vertexNormals[r],c.copy(n.normal),l.a.copy(n.vertexNormals[0]),l.b.copy(n.vertexNormals[1]),l.c.copy(n.vertexNormals[2])}for(r=0,i=this.faces.length;r<i;r++)(n=this.faces[r]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,r=0,i=t.length;r<i;r++)r>0&&(e+=t[r].distanceTo(t[r-1])),this.lineDistances[r]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Br),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Fr),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(!1!==(e&&e.isGeometry)){var i,n=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,c=e.faces,l=this.faceVertexUvs[0],u=e.faceVertexUvs[0],h=this.colors,d=e.colors;void 0===r&&(r=0),void 0!==t&&(i=(new Gr).getNormalMatrix(t));for(var p=0,f=o.length;p<f;p++){var m=o[p],v=m.clone();void 0!==t&&v.applyMatrix4(t),a.push(v)}for(var p=0,f=d.length;p<f;p++)h.push(d[p].clone());for(p=0,f=c.length;p<f;p++){var g,y,x,E=c[p],b=E.vertexNormals,w=E.vertexColors;(g=new ai(E.a+n,E.b+n,E.c+n)).normal.copy(E.normal),void 0!==i&&g.normal.applyMatrix3(i).normalize();for(var T=0,M=b.length;T<M;T++)y=b[T].clone(),void 0!==i&&y.applyMatrix3(i).normalize(),g.vertexNormals.push(y);g.color.copy(E.color);for(var T=0,M=w.length;T<M;T++)x=w[T],g.vertexColors.push(x.clone());g.materialIndex=E.materialIndex+r,s.push(g)}for(p=0,f=u.length;p<f;p++){var _=u[p],S=[];if(void 0!==_){for(var T=0,M=_.length;T<M;T++)S.push(_[T].clone());l.push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){!1!==(e&&e.isMesh)?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,r,i,n,a,o,s,c={},l=[],u=[],h=Math.pow(10,4);for(r=0,i=this.vertices.length;r<i;r++)e=this.vertices[r],t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h),void 0===c[t]?(c[t]=r,l.push(this.vertices[r]),u[r]=l.length-1):u[r]=u[c[t]];var d=[];for(r=0,i=this.faces.length;r<i;r++){(n=this.faces[r]).a=u[n.a],n.b=u[n.b],n.c=u[n.c],a=[n.a,n.b,n.c];for(var p=0;p<3;p++)if(a[p]===a[(p+1)%3]){d.push(r);break}}for(r=d.length-1;r>=0;r--){var f=d[r];for(this.faces.splice(f,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(f,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var i,n,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===t&&(i=[]),o&&o.length===t&&(n=[]);for(var r=0;r<t;r++){var s=e[r]._id;i&&i.push(a[s]),n&&n.push(o[s])}i&&(this.faceVertexUvs[0]=i),n&&(this.faceVertexUvs[1]=n)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}for(var i=[],n=0;n<this.vertices.length;n++){var a=this.vertices[n];i.push(a.x,a.y,a.z)}for(var o=[],s=[],c={},l=[],u={},h=[],d={},n=0;n<this.faces.length;n++){var p=this.faces[n],f=void 0!==this.faceVertexUvs[0][n],m=p.normal.length()>0,v=p.vertexNormals.length>0,g=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,x=0;if(x=T(x,0,0),x=T(x,1,!0),x=T(x,2,!1),x=T(x,3,f),x=T(x,4,m),x=T(x,5,v),x=T(x,6,g),x=T(x,7,y),o.push(x),o.push(p.a,p.b,p.c),o.push(p.materialIndex),f){var E=this.faceVertexUvs[0][n];o.push(S(E[0]),S(E[1]),S(E[2]))}if(m&&o.push(M(p.normal)),v){var b=p.vertexNormals;o.push(M(b[0]),M(b[1]),M(b[2]))}if(g&&o.push(_(p.color)),y){var w=p.vertexColors;o.push(_(w[0]),_(w[1]),_(w[2]))}}function T(e,t,r){return r?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]?c[t]:(c[t]=s.length/3,s.push(e.x,e.y,e.z),c[t])}function _(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]?u[t]:(u[t]=l.length,l.push(e.getHex()),u[t])}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/2,h.push(e.x,e.y),d[t])}return e.data={},e.data.vertices=i,e.data.normals=s,l.length>0&&(e.data.colors=l),h.length>0&&(e.data.uvs=[h]),e.data.faces=o,e},clone:function(){return(new wi).copy(this)},copy:function(e){var t,r,i,n,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,r=s.length;t<r;t++)this.vertices.push(s[t].clone());var c=e.colors;for(t=0,r=c.length;t<r;t++)this.colors.push(c[t].clone());var l=e.faces;for(t=0,r=l.length;t<r;t++)this.faces.push(l[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,n=u.length;i<n;i++){var h=u[i],d=[];for(a=0,o=h.length;a<o;a++){var p=h[a];d.push(p.clone())}this.faceVertexUvs[t].push(d)}}var f=e.morphTargets;for(t=0,r=f.length;t<r;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],i=0,n=f[t].vertices.length;i<n;i++)m.vertices.push(f[t].vertices[i].clone());if(void 0!==f[t].normals)for(m.normals=[],i=0,n=f[t].normals.length;i<n;i++)m.normals.push(f[t].normals[i].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,r=v.length;t<r;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],i=0,n=v[t].vertexNormals.length;i<n;i++){var y=v[t].vertexNormals[i],x={};x.a=y.a.clone(),x.b=y.b.clone(),x.c=y.c.clone(),g.vertexNormals.push(x)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],i=0,n=v[t].faceNormals.length;i<n;i++)g.faceNormals.push(v[t].faceNormals[i].clone());this.morphNormals.push(g)}var E=e.skinWeights;for(t=0,r=E.length;t<r;t++)this.skinWeights.push(E[t].clone());var b=e.skinIndices;for(t=0,r=b.length;t<r;t++)this.skinIndices.push(b[t].clone());var w=e.lineDistances;for(t=0,r=w.length;t<r;t++)this.lineDistances.push(w[t]);var T=e.boundingBox;null!==T&&(this.boundingBox=T.clone());var M=e.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ti.MaxIndex=65535,Object.assign(Ti.prototype,t.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(yi(e)>65535?fi:di)(e,1):this.index=e},addAttribute:function(e,t){return!1===(t&&t.isBufferAttribute)&&!1===(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new si(arguments[1],arguments[2]))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this)},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){var i=(new Gr).getNormalMatrix(e);i.applyToBufferAttribute(r),r.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new Rt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Rt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Rt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Rt;return function(t,r,i){return e.makeTranslation(t,r,i),this.applyMatrix(e),this}}(),scale:function(){var e=new Rt;return function(t,r,i){return e.makeScale(t,r,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new ri;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new mi(3*t.vertices.length,3),i=new mi(3*t.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var n=new mi(t.lineDistances.length,1);this.addAttribute("lineDistance",n.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t,r=e.geometry;if(e.isMesh){var i=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(i=void 0,r.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(r);i.verticesNeedUpdate=r.verticesNeedUpdate,i.normalsNeedUpdate=r.normalsNeedUpdate,i.colorsNeedUpdate=r.colorsNeedUpdate,i.uvsNeedUpdate=r.uvsNeedUpdate,i.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=i}return!0===r.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(r.vertices),t.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(r.normals),t.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(r.colors),t.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(r.uvs),t.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(r.lineDistances),t.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(e.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new gi).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new si(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.addAttribute("normal",new si(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new si(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var n=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new si(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new si(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var o=yi(e.indices)>65535?Uint32Array:Uint16Array,s=new o(3*e.indices.length);this.setIndex(new si(s,1).copyIndicesArray(e.indices))}for(var c in this.groups=e.groups,e.morphTargets){for(var l=[],u=e.morphTargets[c],h=0,d=u.length;h<d;h++){var p=u[h],f=new mi(3*p.length,3);l.push(f.copyVector3sArray(p))}this.morphAttributes[c]=l}if(e.skinIndices.length>0){var m=new mi(4*e.skinIndices.length,4);this.addAttribute("skinIndex",m.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var v=new mi(4*e.skinWeights.length,4);this.addAttribute("skinWeight",v.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Br);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Br,t=new St;return function(){null===this.boundingSphere&&(this.boundingSphere=new Fr);var r=this.attributes.position;if(r){var i=this.boundingSphere.center;e.setFromBufferAttribute(r),e.getCenter(i);for(var n=0,a=0,o=r.count;a<o;a++)t.x=r.getX(a),t.y=r.getY(a),t.z=r.getZ(a),n=Math.max(n,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,r=this.groups;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new si(new Float32Array(i.length),3));else for(var n=t.normal.array,a=0,o=n.length;a<o;a++)n[a]=0;var s,c,l,u=t.normal.array,h=new St,d=new St,p=new St,f=new St,m=new St;if(e){var v=e.array;0===r.length&&this.addGroup(0,v.length);for(var g=0,y=r.length;g<y;++g)for(var x=r[g],E=x.start,b=x.count,a=E,o=E+b;a<o;a+=3)s=3*v[a+0],c=3*v[a+1],l=3*v[a+2],h.fromArray(i,s),d.fromArray(i,c),p.fromArray(i,l),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),u[s]+=f.x,u[s+1]+=f.y,u[s+2]+=f.z,u[c]+=f.x,u[c+1]+=f.y,u[c+2]+=f.z,u[l]+=f.x,u[l+1]+=f.y,u[l+2]+=f.z}else for(var a=0,o=i.length;a<o;a+=9)h.fromArray(i,a),d.fromArray(i,a+3),p.fromArray(i,a+6),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),u[a]=f.x,u[a+1]=f.y,u[a+2]=f.z,u[a+3]=f.x,u[a+4]=f.y,u[a+5]=f.z,u[a+6]=f.x,u[a+7]=f.y,u[a+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!1!==(e&&e.isBufferGeometry)){void 0===t&&(t=0);var r=this.attributes;for(var i in r)if(void 0!==e.attributes[i])for(var n=r[i],a=n.array,o=e.attributes[i],s=o.array,c=o.itemSize,l=0,u=c*t;l<s.length;l++,u++)a[u]=s[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e,t,r,i,n=this.attributes.normal,a=0,o=n.count;a<o;a++)e=n.getX(a),t=n.getY(a),r=n.getZ(a),i=1/Math.sqrt(e*e+t*t+r*r),n.setXYZ(a,e*i,t*i,r*i)},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Ti,t=this.index.array,r=this.attributes;for(var i in r){for(var n=r[i],a=n.array,o=n.itemSize,s=new a.constructor(t.length*o),c=0,l=0,u=0,h=t.length;u<h;u++){c=t[u]*o;for(var d=0;d<o;d++)s[l++]=a[c++]}e.addAttribute(i,new si(s,o))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var n=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:n}}var a=this.attributes;for(var r in a){var o=a[r],n=Array.prototype.slice.call(o.array);e.data.attributes[r]={itemSize:o.itemSize,type:o.array.constructor.name,array:n,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return(new Ti).copy(this)},copy:function(e){var t,r,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var c=[],l=s[t];for(r=0,i=l.length;r<i;r++)c.push(l[r].clone());this.morphAttributes[t]=c}var u=e.groups;for(r=0,i=u.length;r<i;r++){var h=u[r];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Mi.prototype=Object.assign(Object.create(ri.prototype),{constructor:Mi,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return ri.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry.morphTargets;if(void 0!==e&&e.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,r=e.length;t<r;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){var e=new Rt,t=new Wr,r=new Fr,i=new St,n=new St,a=new St,o=new St,s=new St,c=new St,l=new pt,u=new pt,h=new pt,d=new St,p=new St,f=new St;function m(e,t,r,i,n,a,o){return ni.barycoordFromPoint(e,t,r,i,d),n.multiplyScalar(d.x),a.multiplyScalar(d.y),o.multiplyScalar(d.z),n.add(a).add(o),n.clone()}function y(e,t,r,i,n,a,o){var s=e.material;if(null===(s.side===v?r.intersectTriangle(a,n,i,!0,o):r.intersectTriangle(i,n,a,s.side!==g,o)))return null;f.copy(o),f.applyMatrix4(e.matrixWorld);var c=t.ray.origin.distanceTo(f);return c<t.near||c>t.far?null:{distance:c,point:f.clone(),object:e}}function x(e,t,r,o,s,c,d,f){i.fromBufferAttribute(o,c),n.fromBufferAttribute(o,d),a.fromBufferAttribute(o,f);var v=y(e,t,r,i,n,a,p);return v&&(s&&(l.fromBufferAttribute(s,c),u.fromBufferAttribute(s,d),h.fromBufferAttribute(s,f),v.uv=m(p,i,n,a,l,u,h)),v.face=new ai(c,d,f,ni.normal(i,n,a)),v.faceIndex=c),v}return function(d,f){var v,g=this.geometry,E=this.material,b=this.matrixWorld;if(void 0!==E&&(null===g.boundingSphere&&g.computeBoundingSphere(),r.copy(g.boundingSphere),r.applyMatrix4(b),!1!==d.ray.intersectsSphere(r)&&(e.getInverse(b),t.copy(d.ray).applyMatrix4(e),null===g.boundingBox||!1!==t.intersectsBox(g.boundingBox))))if(g.isBufferGeometry){var w,T,M,_,S,R=g.index,A=g.attributes.position,z=g.attributes.uv;if(null!==R)for(_=0,S=R.count;_<S;_+=3)w=R.getX(_),T=R.getX(_+1),M=R.getX(_+2),(v=x(this,d,t,A,z,w,T,M))&&(v.faceIndex=Math.floor(_/3),f.push(v));else for(_=0,S=A.count;_<S;_+=3)(v=x(this,d,t,A,z,w=_,T=_+1,M=_+2))&&(v.index=w,f.push(v))}else if(g.isGeometry){var C,P,L,D,U=Array.isArray(E),H=g.vertices,O=g.faces,I=g.faceVertexUvs[0];I.length>0&&(D=I);for(var N=0,B=O.length;N<B;N++){var F=O[N],G=U?E[F.materialIndex]:E;if(void 0!==G){if(C=H[F.a],P=H[F.b],L=H[F.c],!0===G.morphTargets){var V=g.morphTargets,j=this.morphTargetInfluences;i.set(0,0,0),n.set(0,0,0),a.set(0,0,0);for(var k=0,W=V.length;k<W;k++){var X=j[k];if(0!==X){var q=V[k].vertices;i.addScaledVector(o.subVectors(q[F.a],C),X),n.addScaledVector(s.subVectors(q[F.b],P),X),a.addScaledVector(c.subVectors(q[F.c],L),X)}}i.add(C),n.add(P),a.add(L),C=i,P=n,L=a}if(v=y(this,d,t,C,P,L,p)){if(D&&D[N]){var Y=D[N];l.copy(Y[0]),u.copy(Y[1]),h.copy(Y[2]),v.uv=m(p,C,P,L,l,u,h)}v.face=F,v.faceIndex=N,f.push(v)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),_i.prototype=Object.create(wi.prototype),_i.prototype.constructor=_i,Si.prototype=Object.create(Ti.prototype),Si.prototype.constructor=Si,Ri.prototype=Object.create(wi.prototype),Ri.prototype.constructor=Ri,Ai.prototype=Object.create(Ti.prototype),Ai.prototype.constructor=Ai,zi.prototype=Object.assign(Object.create(ri.prototype),{constructor:zi,isCamera:!0,copy:function(e){return ri.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new _t;return function(t){var r=t||new St;return this.getWorldQuaternion(e),r.set(0,0,-1).applyQuaternion(e)}}(),clone:function(){return(new this.constructor).copy(this)}}),Ci.prototype=Object.assign(Object.create(zi.prototype),{constructor:Ci,isPerspectiveCamera:!0,copy:function(e){return zi.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*dt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*dt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*dt.RAD2DEG*Math.atan(Math.tan(.5*dt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,i,n,a){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:i,width:n,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*dt.DEG2RAD*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,a=this.view;if(null!==a){var o=a.fullWidth,s=a.fullHeight;n+=a.offsetX*i/o,t-=a.offsetY*r/s,i*=a.width/o,r*=a.height/s}var c=this.filmOffset;0!==c&&(n+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-r,e,this.far)},toJSON:function(e){var t=ri.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Pi.prototype=Object.assign(Object.create(zi.prototype),{constructor:Pi,isOrthographicCamera:!0,copy:function(e){return zi.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,r,i,n,a){this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:i,width:n,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,a=r+e,o=i+t,s=i-t;if(null!==this.view){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;n+=u*(this.view.offsetX/c),a=n+u*(this.view.width/c),o-=h*(this.view.offsetY/l),s=o-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(n,a,o,s,this.near,this.far)},toJSON:function(e){var t=ri.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}});var ji,ki,Wi,Xi,qi,Yi,Zi=0;function Qi(e){switch(e){case it:return["Linear","( value )"];case nt:return["sRGB","( value )"];case ot:return["RGBE","( value )"];case st:return["RGBM","( value, 7.0 )"];case ct:return["RGBM","( value, 16.0 )"];case lt:return["RGBD","( value, 256.0 )"];case at:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Ji(e,t){var r=Qi(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function Ki(e,t){var r;switch(t){case ie:r="Linear";break;case ne:r="Reinhard";break;case ae:r="Uncharted2";break;case oe:r="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function $i(e){return""!==e}function en(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function tn(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(e,t){var r=xr[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return tn(r)})}function rn(e){return e.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,r,i){for(var n="",a=parseInt(t);a<parseInt(r);a++)n+=i.replace(/\[ i \]/g,"[ "+a+" ]");return n})}function nn(e,t,r,i){var n=e.context,a=r.extensions,o=r.defines,s=r.__webglShader.vertexShader,c=r.__webglShader.fragmentShader,l="SHADOWMAP_TYPE_BASIC";i.shadowMapType===p?l="SHADOWMAP_TYPE_PCF":i.shadowMapType===f&&(l="SHADOWMAP_TYPE_PCF_SOFT");var u="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(i.envMap){switch(r.envMap.mapping){case se:case ce:u="ENVMAP_TYPE_CUBE";break;case de:case pe:u="ENVMAP_TYPE_CUBE_UV";break;case le:case ue:u="ENVMAP_TYPE_EQUIREC";break;case he:u="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case ce:case ue:h="ENVMAP_MODE_REFRACTION"}switch(r.combine){case $:d="ENVMAP_BLENDING_MULTIPLY";break;case ee:d="ENVMAP_BLENDING_MIX";break;case te:d="ENVMAP_BLENDING_ADD"}}var m,v,g,y,x,E=e.gammaFactor>0?e.gammaFactor:1,b=function(e,t,r){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter($i).join("\n")}(a,i,e.extensions),w=function(e){var t=[];for(var r in e){var i=e[r];!1!==i&&t.push("#define "+r+" "+i)}return t.join("\n")}(o),T=n.createProgram();r.isRawShaderMaterial?(m=[w,"\n"].filter($i).join("\n"),v=[b,w,"\n"].filter($i).join("\n")):(m=["precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,w,i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+E,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+h:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter($i).join("\n"),v=[b,"precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,w,i.alphaTest?"#define ALPHATEST "+i.alphaTest:"","#define GAMMA_FACTOR "+E,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+u:"",i.envMap?"#define "+h:"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(i.numClippingPlanes-i.numClipIntersection),i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",i.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",i.toneMapping!==re?"#define TONE_MAPPING":"",i.toneMapping!==re?xr.tonemapping_pars_fragment:"",i.toneMapping!==re?Ki("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.outputEncoding||i.mapEncoding||i.envMapEncoding||i.emissiveMapEncoding?xr.encodings_pars_fragment:"",i.mapEncoding?Ji("mapTexelToLinear",i.mapEncoding):"",i.envMapEncoding?Ji("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMapEncoding?Ji("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.outputEncoding?(g="linearToOutputTexel",y=i.outputEncoding,x=Qi(y),"vec4 "+g+"( vec4 value ) { return LinearTo"+x[0]+x[1]+"; }"):"",i.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter($i).join("\n")),s=en(s=tn(s),i),c=en(c=tn(c),i),r.isShaderMaterial||(s=rn(s),c=rn(c));var M=m+s,_=v+c,S=Vi(n,n.VERTEX_SHADER,M),R=Vi(n,n.FRAGMENT_SHADER,_);n.attachShader(T,S),n.attachShader(T,R),void 0!==r.index0AttributeName?n.bindAttribLocation(T,0,r.index0AttributeName):!0===i.morphTargets&&n.bindAttribLocation(T,0,"position"),n.linkProgram(T);var A,z,C=n.getProgramInfoLog(T),P=n.getShaderInfoLog(S),L=n.getShaderInfoLog(R),D=!0,U=!0;return!1===n.getProgramParameter(T,n.LINK_STATUS)?(D=!1,console.error("THREE.WebGLProgram: shader error: ",n.getError(),"gl.VALIDATE_STATUS",n.getProgramParameter(T,n.VALIDATE_STATUS),"gl.getProgramInfoLog",C,P,L)):""!==C?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",C):""!==P&&""!==L||(U=!1),U&&(this.diagnostics={runnable:D,material:r,programLog:C,vertexShader:{log:P,prefix:m},fragmentShader:{log:L,prefix:v}}),n.deleteShader(S),n.deleteShader(R),this.getUniforms=function(){return void 0===A&&(A=new fr(n,T,e)),A},this.getAttributes=function(){return void 0===z&&(z=function(e,t,r){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<n;a++){var o=e.getActiveAttrib(t,a),s=o.name;i[s]=e.getAttribLocation(t,s)}return i}(n,T)),z},this.destroy=function(){n.deleteProgram(T),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Zi++,this.code=t,this.usedTimes=1,this.program=T,this.vertexShader=S,this.fragmentShader=R,this}function an(e,t){var r=[],i={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},n=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var r;return e?e.isTexture?r=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=e.texture.encoding):r=it,r===it&&t&&(r=at),r}this.getParameters=function(r,n,o,s,c,l){var u=i[r.type],h=l.isSkinnedMesh?function(e){var r=e.skeleton.bones;if(t.floatVertexTextures)return 1024;var i=t.maxVertexUniforms,n=Math.floor((i-20)/4),a=Math.min(n,r.length);return a<r.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+a+"."),0):a}(l):0,d=e.getPrecision();null!==r.precision&&(d=t.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",d,"instead.");var p=e.getRenderTarget(),f={shaderID:u,precision:d,supportsVertexTextures:t.vertexTextures,outputEncoding:a(p?p.texture:null,e.gammaOutput),map:!!r.map,mapEncoding:a(r.map,e.gammaInput),envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,envMapEncoding:a(r.envMap,e.gammaInput),envMapCubeUV:!!r.envMap&&(r.envMap.mapping===de||r.envMap.mapping===pe),lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:a(r.emissiveMap,e.gammaInput),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,combine:r.combine,vertexColors:r.vertexColors,fog:!!o,useFog:r.fog,fogExp:o&&o.isFogExp2,flatShading:r.shading===y,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:r.skinning&&h>0,maxBones:h,useVertexTexture:t.floatVertexTextures,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:s,numClipIntersection:c,dithering:r.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.receiveShadow&&n.shadows.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===g,flipSided:r.side===v,depthPacking:void 0!==r.depthPacking&&r.depthPacking};return f},this.getProgramCode=function(e,t){var r=[];if(t.shaderID?r.push(t.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)r.push(i),r.push(e.defines[i]);for(var a=0;a<n.length;a++)r.push(t[n[a]]);return r.join()},this.acquireProgram=function(t,i,n){for(var a,o=0,s=r.length;o<s;o++){var c=r[o];if(c.code===n){++(a=c).usedTimes;break}}return void 0===a&&(a=new nn(e,n,t,i),r.push(a)),a},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function on(e,t,r,i,n,a,o){var s="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;function c(e,t){if(e.width>t||e.height>t){var r=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=Math.floor(e.width*r),i.height=Math.floor(e.height*r);var n=i.getContext("2d");return n.drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function l(e){return dt.isPowerOfTwo(e.width)&&dt.isPowerOfTwo(e.height)}function u(t){return t===ge||t===ye||t===xe?e.NEAREST:e.LINEAR}function h(t){var r=t.target;r.removeEventListener("dispose",h),function(t){var r=i.get(t);if(t.image&&r.__image__webglTextureCube)e.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture)}i.remove(t)}(r),o.textures--}function d(t){var r=t.target;r.removeEventListener("dispose",d),function(t){var r=i.get(t),n=i.get(t.texture);if(t){if(void 0!==n.__webglTexture&&e.deleteTexture(n.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(r.__webglFramebuffer[a]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[a]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}}(r),o.textures--}function p(t,u){var d=i.get(t);if(t.version>0&&d.__version!==t.version){var p=t.image;if(void 0===p)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==p.complete)return void function(t,i,u){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",h),t.__webglTexture=e.createTexture(),o.textures++),r.activeTexture(e.TEXTURE0+u),r.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment);var d=c(i.image,n.maxTextureSize);(function(e){return e.wrapS!==me||e.wrapT!==me||e.minFilter!==ge&&e.minFilter!==Ee})(i)&&!1===l(d)&&(d=function(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=dt.nearestPowerOfTwo(e.width),t.height=dt.nearestPowerOfTwo(e.height);var r=t.getContext("2d");return r.drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}(d));var p=l(d),m=a(i.format),v=a(i.type);f(e.TEXTURE_2D,i,p);var g,y=i.mipmaps;if(i.isDepthTexture){var x=e.DEPTH_COMPONENT;if(i.type===ze){if(!s)throw new Error("Float Depth Texture only supported in WebGL2.0");x=e.DEPTH_COMPONENT32F}else s&&(x=e.DEPTH_COMPONENT16);i.format===Ge&&x===e.DEPTH_COMPONENT&&i.type!==Se&&i.type!==Ae&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Se,v=a(i.type)),i.format===Ve&&(x=e.DEPTH_STENCIL,i.type!==Ue&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Ue,v=a(i.type))),r.texImage2D(e.TEXTURE_2D,0,x,d.width,d.height,0,m,v,null)}else if(i.isDataTexture)if(y.length>0&&p){for(var E=0,b=y.length;E<b;E++)g=y[E],r.texImage2D(e.TEXTURE_2D,E,m,g.width,g.height,0,m,v,g.data);i.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,m,d.width,d.height,0,m,v,d.data);else if(i.isCompressedTexture)for(var E=0,b=y.length;E<b;E++)g=y[E],i.format!==Ie&&i.format!==Oe?r.getCompressedTextureFormats().indexOf(m)>-1?r.compressedTexImage2D(e.TEXTURE_2D,E,m,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(e.TEXTURE_2D,E,m,g.width,g.height,0,m,v,g.data);else if(y.length>0&&p){for(var E=0,b=y.length;E<b;E++)g=y[E],r.texImage2D(e.TEXTURE_2D,E,m,m,v,g);i.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,m,m,v,d);i.generateMipmaps&&p&&e.generateMipmap(e.TEXTURE_2D),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}(d,t,u);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}r.activeTexture(e.TEXTURE0+u),r.bindTexture(e.TEXTURE_2D,d.__webglTexture)}function f(r,o,s){var c;if(s?(e.texParameteri(r,e.TEXTURE_WRAP_S,a(o.wrapS)),e.texParameteri(r,e.TEXTURE_WRAP_T,a(o.wrapT)),e.texParameteri(r,e.TEXTURE_MAG_FILTER,a(o.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,a(o.minFilter))):(e.texParameteri(r,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(r,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),o.wrapS===me&&o.wrapT===me||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",o),e.texParameteri(r,e.TEXTURE_MAG_FILTER,u(o.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,u(o.minFilter)),o.minFilter!==ge&&o.minFilter!==Ee&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",o)),c=t.get("EXT_texture_filter_anisotropic")){if(o.type===ze&&null===t.get("OES_texture_float_linear"))return;if(o.type===Ce&&null===t.get("OES_texture_half_float_linear"))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(e.texParameterf(r,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,n.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function m(t,n,o,s){var c=a(n.texture.format),l=a(n.texture.type);r.texImage2D(s,0,c,n.width,n.height,0,c,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,o,s,i.get(n.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function v(t,r){e.bindRenderbuffer(e.RENDERBUFFER,t),r.depthBuffer&&!r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):r.depthBuffer&&r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,r.width,r.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function g(t){var r=i.get(t),n=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),p(r.depthTexture,0);var n=i.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Ge)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,n,0);else{if(r.depthTexture.format!==Ve)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,n,0)}}(r.__webglFramebuffer,t)}else if(n){r.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[a]),r.__webglDepthbuffer[a]=e.createRenderbuffer(),v(r.__webglDepthbuffer[a],t)}else e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),v(r.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}this.setTexture2D=p,this.setTextureCube=function(t,s){var u=i.get(t);if(6===t.image.length)if(t.version>0&&u.__version!==t.version){u.__image__webglTextureCube||(t.addEventListener("dispose",h),u.__image__webglTextureCube=e.createTexture(),o.textures++),r.activeTexture(e.TEXTURE0+s),r.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var d=t&&t.isCompressedTexture,p=t.image[0]&&t.image[0].isDataTexture,m=[],v=0;v<6;v++)m[v]=d||p?p?t.image[v].image:t.image[v]:c(t.image[v],n.maxCubemapSize);var g=m[0],y=l(g),x=a(t.format),E=a(t.type);f(e.TEXTURE_CUBE_MAP,t,y);for(var v=0;v<6;v++)if(d)for(var b,w=m[v].mipmaps,T=0,M=w.length;T<M;T++)b=w[T],t.format!==Ie&&t.format!==Oe?r.getCompressedTextureFormats().indexOf(x)>-1?r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,T,x,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,T,x,b.width,b.height,0,x,E,b.data);else p?r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,x,m[v].width,m[v].height,0,x,E,m[v].data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,x,x,E,m[v]);t.generateMipmaps&&y&&e.generateMipmap(e.TEXTURE_CUBE_MAP),u.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(e.TEXTURE0+s),r.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,n){r.activeTexture(e.TEXTURE0+n),r.bindTexture(e.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)},this.setupRenderTarget=function(t){var n=i.get(t),a=i.get(t.texture);t.addEventListener("dispose",d),a.__webglTexture=e.createTexture(),o.textures++;var s=!0===t.isWebGLRenderTargetCube,c=l(t);if(s){n.__webglFramebuffer=[];for(var u=0;u<6;u++)n.__webglFramebuffer[u]=e.createFramebuffer()}else n.__webglFramebuffer=e.createFramebuffer();if(s){r.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture),f(e.TEXTURE_CUBE_MAP,t.texture,c);for(var u=0;u<6;u++)m(n.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);t.texture.generateMipmaps&&c&&e.generateMipmap(e.TEXTURE_CUBE_MAP),r.bindTexture(e.TEXTURE_CUBE_MAP,null)}else r.bindTexture(e.TEXTURE_2D,a.__webglTexture),f(e.TEXTURE_2D,t.texture,c),m(n.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&c&&e.generateMipmap(e.TEXTURE_2D),r.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&g(t)},this.updateRenderTargetMipmap=function(t){var n=t.texture;if(n.generateMipmaps&&l(t)&&n.minFilter!==ge&&n.minFilter!==Ee){var a=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=i.get(n).__webglTexture;r.bindTexture(a,o),e.generateMipmap(a),r.bindTexture(a,null)}}}function sn(){var e={};return{get:function(t){var r=t.uuid,i=e[r];return void 0===i&&(i={},e[r]=i),i},remove:function(t){delete e[t.uuid]},clear:function(){e={}}}}function cn(e,t,r){var i=new function(){var t=!1,r=new wt,i=null,n=new wt;return{setMask:function(r){i===r||t||(e.colorMask(r,r,r,r),i=r)},setLocked:function(e){t=e},setClear:function(t,i,a,o,s){!0===s&&(t*=o,i*=o,a*=o),r.set(t,i,a,o),!1===n.equals(r)&&(e.clearColor(t,i,a,o),n.copy(r))},reset:function(){t=!1,i=null,n.set(0,0,0,1)}}},n=new function(){var t=!1,r=null,i=null,n=null;return{setTest:function(t){t?ee(e.DEPTH_TEST):te(e.DEPTH_TEST)},setMask:function(i){r===i||t||(e.depthMask(i),r=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case W:e.depthFunc(e.NEVER);break;case X:e.depthFunc(e.ALWAYS);break;case q:e.depthFunc(e.LESS);break;case Y:e.depthFunc(e.LEQUAL);break;case Z:e.depthFunc(e.EQUAL);break;case Q:e.depthFunc(e.GEQUAL);break;case J:e.depthFunc(e.GREATER);break;case K:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);i=t}},setLocked:function(e){t=e},setClear:function(t){n!==t&&(e.clearDepth(t),n=t)},reset:function(){t=!1,r=null,i=null,n=null}}},a=new function(){var t=!1,r=null,i=null,n=null,a=null,o=null,s=null,c=null,l=null;return{setTest:function(t){t?ee(e.STENCIL_TEST):te(e.STENCIL_TEST)},setMask:function(i){r===i||t||(e.stencilMask(i),r=i)},setFunc:function(t,r,o){i===t&&n===r&&a===o||(e.stencilFunc(t,r,o),i=t,n=r,a=o)},setOp:function(t,r,i){o===t&&s===r&&c===i||(e.stencilOp(t,r,i),o=t,s=r,c=i)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,r=null,i=null,n=null,a=null,o=null,s=null,c=null,l=null}}},o=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=new Uint8Array(o),c=new Uint8Array(o),d=new Uint8Array(o),p={},f=null,m=null,y=null,x=null,E=null,b=null,w=null,z=null,C=!1,P=null,L=null,D=null,U=null,H=null,O=null,I=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),N=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),B=parseFloat(N)>=1,F=null,G={},V=new wt,j=new wt;function k(t,r,i){var n=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var o=0;o<i;o++)e.texImage2D(r+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n);return a}var $={};function ee(t){!0!==p[t]&&(e.enable(t),p[t]=!0)}function te(t){!1!==p[t]&&(e.disable(t),p[t]=!1)}function re(t,i,n,a,o,s,c,l){t!==T?ee(e.BLEND):te(e.BLEND),t===m&&l===C||(t===_?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===S?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===R?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),m=t,C=l),t===A?(o=o||i,s=s||n,c=c||a,i===y&&o===b||(e.blendEquationSeparate(r(i),r(o)),y=i,b=o),n===x&&a===E&&s===w&&c===z||(e.blendFuncSeparate(r(n),r(a),r(s),r(c)),x=n,E=a,w=s,z=c)):(y=null,x=null,E=null,b=null,w=null,z=null)}function ie(t){P!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),P=t)}function ne(t){t!==l?(ee(e.CULL_FACE),t!==L&&(t===u?e.cullFace(e.BACK):t===h?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):te(e.CULL_FACE),L=t}function ae(t,r,i){t?(ee(e.POLYGON_OFFSET_FILL),U===r&&H===i||(e.polygonOffset(r,i),U=r,H=i)):te(e.POLYGON_OFFSET_FILL)}function oe(t){void 0===t&&(t=e.TEXTURE0+I-1),F!==t&&(e.activeTexture(t),F=t)}return $[e.TEXTURE_2D]=k(e.TEXTURE_2D,e.TEXTURE_2D,1),$[e.TEXTURE_CUBE_MAP]=k(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:i,depth:n,stencil:a},init:function(){i.setClear(0,0,0,1),n.setClear(1),a.setClear(0),ee(e.DEPTH_TEST),n.setFunc(Y),ie(!1),ne(u),ee(e.CULL_FACE),ee(e.BLEND),re(M)},initAttributes:function(){for(var e=0,t=s.length;e<t;e++)s[e]=0},enableAttribute:function(r){if(s[r]=1,0===c[r]&&(e.enableVertexAttribArray(r),c[r]=1),0!==d[r]){var i=t.get("ANGLE_instanced_arrays");i.vertexAttribDivisorANGLE(r,0),d[r]=0}},enableAttributeAndDivisor:function(r,i){if(s[r]=1,0===c[r]&&(e.enableVertexAttribArray(r),c[r]=1),d[r]!==i){var n=t.get("ANGLE_instanced_arrays");n.vertexAttribDivisorANGLE(r,i),d[r]=i}},disableUnusedAttributes:function(){for(var t=0,r=c.length;t!==r;++t)c[t]!==s[t]&&(e.disableVertexAttribArray(t),c[t]=0)},enable:ee,disable:te,getCompressedTextureFormats:function(){if(null===f&&(f=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var r=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),i=0;i<r.length;i++)f.push(r[i]);return f},setBlending:re,setMaterial:function(t){t.side===g?te(e.CULL_FACE):ee(e.CULL_FACE),ie(t.side===v),!0===t.transparent?re(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):re(T),n.setFunc(t.depthFunc),n.setTest(t.depthTest),n.setMask(t.depthWrite),i.setMask(t.colorWrite),ae(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:ie,setCullFace:ne,setLineWidth:function(t){t!==D&&(B&&e.lineWidth(t),D=t)},setPolygonOffset:ae,getScissorTest:function(){return O},setScissorTest:function(t){O=t,t?ee(e.SCISSOR_TEST):te(e.SCISSOR_TEST)},activeTexture:oe,bindTexture:function(t,r){null===F&&oe();var i=G[F];void 0===i&&(i={type:void 0,texture:void 0},G[F]=i),i.type===t&&i.texture===r||(e.bindTexture(t,r||$[t]),i.type=t,i.texture=r)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error(t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error(t)}},scissor:function(t){!1===V.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),V.copy(t))},viewport:function(t){!1===j.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),j.copy(t))},reset:function(){for(var t=0;t<c.length;t++)1===c[t]&&(e.disableVertexAttribArray(t),c[t]=0);p={},f=null,F=null,G={},m=null,P=null,L=null,i.reset(),n.reset(),a.reset()}}}function ln(e,t,r){var i;function n(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a=void 0!==r.precision?r.precision:"highp",o=n(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);var s=!0===r.logarithmicDepthBuffer&&!!t.get("EXT_frag_depth"),c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_TEXTURE_SIZE),h=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),f=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=l>0,g=!!t.get("OES_texture_float"),y=v&&g;return{getMaxAnisotropy:function(){if(void 0!==i)return i;var r=t.get("EXT_texture_filter_anisotropic");return i=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:a,logarithmicDepthBuffer:s,maxTextures:c,maxVertexTextures:l,maxTextureSize:u,maxCubemapSize:h,maxAttributes:d,maxVertexUniforms:p,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:g,floatVertexTextures:y}}function un(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var i;switch(r){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=e.getExtension("WEBGL_compressed_texture_etc1");break;default:i=e.getExtension(r)}return null===i&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=i,i}}}function hn(){var e=this,t=null,r=0,i=!1,n=!1,a=new Vr,o=new Gr,s={value:null,needsUpdate:!1};function c(){s.value!==t&&(s.value=t,s.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function l(t,r,i,n){var c=null!==t?t.length:0,l=null;if(0!==c){if(l=s.value,!0!==n||null===l){var u=i+4*c,h=r.matrixWorldInverse;o.getNormalMatrix(h),(null===l||l.length<u)&&(l=new Float32Array(u));for(var d=0,p=i;d!==c;++d,p+=4)a.copy(t[d]).applyMatrix4(h,o),a.normal.toArray(l,p),l[p+3]=a.constant}s.value=l,s.needsUpdate=!0}return e.numPlanes=c,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,n,a){var o=0!==e.length||n||0!==r||i;return i=n,t=l(e,a,0),r=e.length,o},this.beginShadows=function(){n=!0,l(null)},this.endShadows=function(){n=!1,c()},this.setState=function(e,a,o,u,h,d){if(!i||null===e||0===e.length||n&&!o)n?l(null):c();else{var p=n?0:r,f=4*p,m=h.clippingState||null;s.value=m,m=l(e,u,f,d);for(var v=0;v!==f;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=p}}}function dn(e){console.log("THREE.WebGLRenderer",c);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,n=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=[],h=null,p=new Float32Array(8),f=[],m=[];this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ie,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var g,x=this,b=null,w=null,T=null,M=-1,_="",S=null,R=new wt,A=null,W=new wt,X=0,q=new vr(0),Y=0,Z=t.width,Q=t.height,J=1,K=new wt(0,0,Z,Q),$=!1,ee=new wt(0,0,Z,Q),te=new jr,re=new hn,ne=!1,ae=!1,oe=new Rt,se=new St,ce=new Rt,le=new Rt,ue={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},he={geometries:0,textures:0},de={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:de,memory:he,programs:null};try{var pe={alpha:i,depth:n,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l};if(null===(g=r||t.getContext("webgl",pe)||t.getContext("experimental-webgl",pe)))throw null!==t.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===g.getShaderPrecisionFormat&&(g.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),t.addEventListener("webglcontextlost",zt,!1)}catch(Vt){console.error("THREE.WebGLRenderer: "+Vt)}var Fe=new un(g);Fe.get("WEBGL_depth_texture"),Fe.get("OES_texture_float"),Fe.get("OES_texture_float_linear"),Fe.get("OES_texture_half_float"),Fe.get("OES_texture_half_float_linear"),Fe.get("OES_standard_derivatives"),Fe.get("ANGLE_instanced_arrays"),Fe.get("OES_element_index_uint")&&(Ti.MaxIndex=4294967296);var Ke=new ln(g,Fe,e),$e=new cn(g,Fe,Gt),it=new sn,nt=new on(g,Fe,$e,it,Ke,Gt,he),at=new Li(g),ot=new Bi(g,at,he),st=new Gi(g,ot,de),ct=new an(this,Ke),lt=new Fi,ut=new Oi;this.info.programs=ct.programs;var ht,pt,ft,mt,vt=new Ni(g,Fe,de),gt=new Ii(g,Fe,de);function yt(){return null===w?J:1}function xt(){$e.init(),$e.scissor(R.copy(K).multiplyScalar(J)),$e.viewport(W.copy(ee).multiplyScalar(J)),$e.buffers.color.setClear(q.r,q.g,q.b,Y,s)}function Et(){b=null,S=null,_="",M=-1,$e.reset()}xt(),this.context=g,this.capabilities=Ke,this.extensions=Fe,this.properties=it,this.state=$e;var bt=new kr(this,ue,st,Ke);this.shadowMap=bt;var Tt,Mt=new Tr(this,f),_t=new wr(this,m);function zt(e){e.preventDefault(),Et(),xt(),it.clear(),st.clear()}function Ct(e){var t=e.target;t.removeEventListener("dispose",Ct),function(e){Pt(e),it.remove(e)}(t)}function Pt(e){var t=it.get(e).program;e.program=void 0,void 0!==t&&ct.releaseProgram(t)}function Lt(e,t){return Math.abs(t[0])-Math.abs(e[0])}function Dt(e,t,r,i){for(var n=0,a=e.length;n<a;n++){var o=e[n],s=o.object,c=o.geometry,l=void 0===i?o.material:i,u=o.group;if(s.onBeforeRender(x,t,r,c,l,u),r.isArrayCamera&&r.enabled)for(var h=r.cameras,d=0,p=h.length;d<p;d++){var f=h[d],m=f.bounds;x.setViewport(m.x*Z*J,m.y*Q*J,m.z*Z*J,m.w*Q*J),x.setScissor(m.x*Z*J,m.y*Q*J,m.z*Z*J,m.w*Q*J),x.setScissorTest(!0),Ut(s,t,f,c,l,u)}else Ut(s,t,r,c,l,u);s.onAfterRender(x,t,r,c,l,u)}}function Ut(e,t,r,i,n,a){if(e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){$e.setMaterial(n);var o=Ot(r,t.fog,n,e);_="",function(e,t,r){e.render(function(e){x.renderBufferImmediate(e,t,r)})}(e,o,n)}else x.renderBufferDirect(r,t.fog,i,n,e,a)}function Ht(e,t,r){var i=it.get(e),n=ct.getParameters(e,ue,t,re.numPlanes,re.numIntersection,r),a=ct.getProgramCode(e,n),o=i.program,s=!0;if(void 0===o)e.addEventListener("dispose",Ct);else if(o.code!==a)Pt(e);else{if(void 0!==n.shaderID)return;s=!1}if(s){if(n.shaderID){var c=Er[n.shaderID];i.__webglShader={name:e.type,uniforms:yr.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else i.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=i.__webglShader,o=ct.acquireProgram(e,n,a),i.program=o,e.program=o}var l=o.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var u=0;u<x.maxMorphTargets;u++)l["morphTarget"+u]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var u=0;u<x.maxMorphNormals;u++)l["morphNormal"+u]>=0&&e.numSupportedMorphNormals++}var h=i.__webglShader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=re.numPlanes,i.numIntersection=re.numIntersection,h.clippingPlanes=re.uniform),i.fog=t,i.lightsHash=ue.hash,e.lights&&(h.ambientLightColor.value=ue.ambient,h.directionalLights.value=ue.directional,h.spotLights.value=ue.spot,h.rectAreaLights.value=ue.rectArea,h.pointLights.value=ue.point,h.hemisphereLights.value=ue.hemi,h.directionalShadowMap.value=ue.directionalShadowMap,h.directionalShadowMatrix.value=ue.directionalShadowMatrix,h.spotShadowMap.value=ue.spotShadowMap,h.spotShadowMatrix.value=ue.spotShadowMatrix,h.pointShadowMap.value=ue.pointShadowMap,h.pointShadowMatrix.value=ue.pointShadowMatrix);var d=i.program.getUniforms(),p=fr.seqWithValue(d.seq,h);i.uniformsList=p}function Ot(e,t,r,i){X=0;var n=it.get(r);if(ne&&(ae||e!==S)){var a=e===S&&r.id===M;re.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,n,a)}!1===r.needsUpdate&&(void 0===n.program?r.needsUpdate=!0:r.fog&&n.fog!==t?r.needsUpdate=!0:r.lights&&n.lightsHash!==ue.hash?r.needsUpdate=!0:void 0===n.numClippingPlanes||n.numClippingPlanes===re.numPlanes&&n.numIntersection===re.numIntersection||(r.needsUpdate=!0)),r.needsUpdate&&(Ht(r,t,i),r.needsUpdate=!1);var o,s,c=!1,l=!1,u=!1,h=n.program,d=h.getUniforms(),p=n.__webglShader.uniforms;if(h.id!==b&&(g.useProgram(h.program),b=h.id,c=!0,l=!0,u=!0),r.id!==M&&(M=r.id,l=!0),c||e!==S){if(d.setValue(g,"projectionMatrix",e.projectionMatrix),Ke.logarithmicDepthBuffer&&d.setValue(g,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),e!==S&&(S=e,l=!0,u=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var f=d.map.cameraPosition;void 0!==f&&f.setValue(g,se.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&d.setValue(g,"viewMatrix",e.matrixWorldInverse),d.setValue(g,"toneMappingExposure",x.toneMappingExposure),d.setValue(g,"toneMappingWhitePoint",x.toneMappingWhitePoint)}if(r.skinning){d.setOptional(g,i,"bindMatrix"),d.setOptional(g,i,"bindMatrixInverse");var m=i.skeleton;if(m){var v=m.bones;if(Ke.floatVertexTextures){if(void 0===m.boneTexture){var y=Math.sqrt(4*v.length);y=dt.nextPowerOfTwo(Math.ceil(y)),y=Math.max(y,4);var E=new Float32Array(y*y*4);E.set(m.boneMatrices);var w=new At(E,y,y,Ie,ze);m.boneMatrices=E,m.boneTexture=w,m.boneTextureSize=y}d.setValue(g,"boneTexture",m.boneTexture),d.setValue(g,"boneTextureSize",m.boneTextureSize)}else d.setOptional(g,m,"boneMatrices")}}return l&&(r.lights&&(s=u,(o=p).ambientLightColor.needsUpdate=s,o.directionalLights.needsUpdate=s,o.pointLights.needsUpdate=s,o.spotLights.needsUpdate=s,o.rectAreaLights.needsUpdate=s,o.hemisphereLights.needsUpdate=s),t&&r.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(p,t),(r.isMeshBasicMaterial||r.isMeshLambertMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.isMeshNormalMaterial||r.isMeshDepthMaterial)&&function(e,t){var r;if(e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?r=t.map:t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.roughnessMap?r=t.roughnessMap:t.metalnessMap?r=t.metalnessMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap),void 0!==r){r.isWebGLRenderTarget&&(r=r.texture);var i=r.offset,n=r.repeat;e.offsetRepeat.value.set(i.x,i.y,n.x,n.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}(p,r),r.isLineBasicMaterial?It(p,r):r.isLineDashedMaterial?(It(p,r),function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(p,r)):r.isPointsMaterial?function(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*J,e.scale.value=.5*Q,e.map.value=t.map,null!==t.map){var r=t.map.offset,i=t.map.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}}(p,r):r.isMeshLambertMaterial?function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(p,r):r.isMeshToonMaterial?function(e,t){Nt(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(p,r):r.isMeshPhongMaterial?Nt(p,r):r.isMeshPhysicalMaterial?function(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,Bt(e,t)}(p,r):r.isMeshStandardMaterial?Bt(p,r):r.isMeshDepthMaterial?r.displacementMap&&(p.displacementMap.value=r.displacementMap,p.displacementScale.value=r.displacementScale,p.displacementBias.value=r.displacementBias):r.isMeshNormalMaterial&&function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(p,r),void 0!==p.ltcMat&&(p.ltcMat.value=gr.LTC_MAT_TEXTURE),void 0!==p.ltcMag&&(p.ltcMag.value=gr.LTC_MAG_TEXTURE),fr.upload(g,n.uniformsList,p,x)),d.setValue(g,"modelViewMatrix",i.modelViewMatrix),d.setValue(g,"normalMatrix",i.normalMatrix),d.setValue(g,"modelMatrix",i.matrixWorld),h}function It(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function Nt(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Bt(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function Ft(e,t){var r,i,n,a,o,s,c,l,u=0,h=0,d=0,p=t.matrixWorldInverse,f=0,m=0,v=0,g=0,y=0;for(r=0,i=e.length;r<i;r++)if(n=e[r],o=n.color,s=n.intensity,c=n.distance,l=n.shadow&&n.shadow.map?n.shadow.map.texture:null,n.isAmbientLight)u+=o.r*s,h+=o.g*s,d+=o.b*s;else if(n.isDirectionalLight){var x=lt.get(n);x.color.copy(n.color).multiplyScalar(n.intensity),x.direction.setFromMatrixPosition(n.matrixWorld),se.setFromMatrixPosition(n.target.matrixWorld),x.direction.sub(se),x.direction.transformDirection(p),x.shadow=n.castShadow,n.castShadow&&(a=n.shadow,x.shadowBias=a.bias,x.shadowRadius=a.radius,x.shadowMapSize=a.mapSize),ue.directionalShadowMap[f]=l,ue.directionalShadowMatrix[f]=n.shadow.matrix,ue.directional[f]=x,f++}else if(n.isSpotLight){var x=lt.get(n);x.position.setFromMatrixPosition(n.matrixWorld),x.position.applyMatrix4(p),x.color.copy(o).multiplyScalar(s),x.distance=c,x.direction.setFromMatrixPosition(n.matrixWorld),se.setFromMatrixPosition(n.target.matrixWorld),x.direction.sub(se),x.direction.transformDirection(p),x.coneCos=Math.cos(n.angle),x.penumbraCos=Math.cos(n.angle*(1-n.penumbra)),x.decay=0===n.distance?0:n.decay,x.shadow=n.castShadow,n.castShadow&&(a=n.shadow,x.shadowBias=a.bias,x.shadowRadius=a.radius,x.shadowMapSize=a.mapSize),ue.spotShadowMap[v]=l,ue.spotShadowMatrix[v]=n.shadow.matrix,ue.spot[v]=x,v++}else if(n.isRectAreaLight){var x=lt.get(n);x.color.copy(o).multiplyScalar(s/(n.width*n.height)),x.position.setFromMatrixPosition(n.matrixWorld),x.position.applyMatrix4(p),le.identity(),ce.copy(n.matrixWorld),ce.premultiply(p),le.extractRotation(ce),x.halfWidth.set(.5*n.width,0,0),x.halfHeight.set(0,.5*n.height,0),x.halfWidth.applyMatrix4(le),x.halfHeight.applyMatrix4(le),ue.rectArea[g]=x,g++}else if(n.isPointLight){var x=lt.get(n);x.position.setFromMatrixPosition(n.matrixWorld),x.position.applyMatrix4(p),x.color.copy(n.color).multiplyScalar(n.intensity),x.distance=n.distance,x.decay=0===n.distance?0:n.decay,x.shadow=n.castShadow,n.castShadow&&(a=n.shadow,x.shadowBias=a.bias,x.shadowRadius=a.radius,x.shadowMapSize=a.mapSize),ue.pointShadowMap[m]=l,ue.pointShadowMatrix[m]=n.shadow.matrix,ue.point[m]=x,m++}else if(n.isHemisphereLight){var x=lt.get(n);x.direction.setFromMatrixPosition(n.matrixWorld),x.direction.transformDirection(p),x.direction.normalize(),x.skyColor.copy(n.color).multiplyScalar(s),x.groundColor.copy(n.groundColor).multiplyScalar(s),ue.hemi[y]=x,y++}ue.ambient[0]=u,ue.ambient[1]=h,ue.ambient[2]=d,ue.directional.length=f,ue.spot.length=v,ue.rectArea.length=g,ue.point.length=m,ue.hemi.length=y,ue.hash=f+","+m+","+v+","+g+","+y+","+ue.shadows.length}function Gt(e){var t;if(e===fe)return g.REPEAT;if(e===me)return g.CLAMP_TO_EDGE;if(e===ve)return g.MIRRORED_REPEAT;if(e===ge)return g.NEAREST;if(e===ye)return g.NEAREST_MIPMAP_NEAREST;if(e===xe)return g.NEAREST_MIPMAP_LINEAR;if(e===Ee)return g.LINEAR;if(e===be)return g.LINEAR_MIPMAP_NEAREST;if(e===we)return g.LINEAR_MIPMAP_LINEAR;if(e===Te)return g.UNSIGNED_BYTE;if(e===Pe)return g.UNSIGNED_SHORT_4_4_4_4;if(e===Le)return g.UNSIGNED_SHORT_5_5_5_1;if(e===De)return g.UNSIGNED_SHORT_5_6_5;if(e===Me)return g.BYTE;if(e===_e)return g.SHORT;if(e===Se)return g.UNSIGNED_SHORT;if(e===Re)return g.INT;if(e===Ae)return g.UNSIGNED_INT;if(e===ze)return g.FLOAT;if(e===Ce&&null!==(t=Fe.get("OES_texture_half_float")))return t.HALF_FLOAT_OES;if(e===He)return g.ALPHA;if(e===Oe)return g.RGB;if(e===Ie)return g.RGBA;if(e===Ne)return g.LUMINANCE;if(e===Be)return g.LUMINANCE_ALPHA;if(e===Ge)return g.DEPTH_COMPONENT;if(e===Ve)return g.DEPTH_STENCIL;if(e===z)return g.FUNC_ADD;if(e===C)return g.FUNC_SUBTRACT;if(e===P)return g.FUNC_REVERSE_SUBTRACT;if(e===U)return g.ZERO;if(e===H)return g.ONE;if(e===O)return g.SRC_COLOR;if(e===I)return g.ONE_MINUS_SRC_COLOR;if(e===N)return g.SRC_ALPHA;if(e===B)return g.ONE_MINUS_SRC_ALPHA;if(e===F)return g.DST_ALPHA;if(e===G)return g.ONE_MINUS_DST_ALPHA;if(e===V)return g.DST_COLOR;if(e===j)return g.ONE_MINUS_DST_COLOR;if(e===k)return g.SRC_ALPHA_SATURATE;if((e===je||e===ke||e===We||e===Xe)&&null!==(t=Fe.get("WEBGL_compressed_texture_s3tc"))){if(e===je)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===ke)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===We)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Xe)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===qe||e===Ye||e===Ze||e===Qe)&&null!==(t=Fe.get("WEBGL_compressed_texture_pvrtc"))){if(e===qe)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Ye)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Ze)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Qe)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Je&&null!==(t=Fe.get("WEBGL_compressed_texture_etc1")))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===L||e===D)&&null!==(t=Fe.get("EXT_blend_minmax"))){if(e===L)return t.MIN_EXT;if(e===D)return t.MAX_EXT}return e===Ue&&null!==(t=Fe.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:0}this.getContext=function(){return g},this.getContextAttributes=function(){return g.getContextAttributes()},this.forceContextLoss=function(){var e=Fe.get("WEBGL_lose_context");e&&e.loseContext()},this.getMaxAnisotropy=function(){return Ke.getMaxAnisotropy()},this.getPrecision=function(){return Ke.precision},this.getPixelRatio=function(){return J},this.setPixelRatio=function(e){void 0!==e&&(J=e,this.setSize(ee.z,ee.w,!1))},this.getSize=function(){return{width:Z,height:Q}},this.setSize=function(e,r,i){Z=e,Q=r,t.width=e*J,t.height=r*J,!1!==i&&(t.style.width=e+"px",t.style.height=r+"px"),this.setViewport(0,0,e,r)},this.setViewport=function(e,t,r,i){$e.viewport(ee.set(e,t,r,i))},this.setScissor=function(e,t,r,i){$e.scissor(K.set(e,t,r,i))},this.setScissorTest=function(e){$e.setScissorTest($=e)},this.getClearColor=function(){return q},this.setClearColor=function(e,t){q.set(e),Y=void 0!==t?t:1,$e.buffers.color.setClear(q.r,q.g,q.b,Y,s)},this.getClearAlpha=function(){return Y},this.setClearAlpha=function(e){Y=e,$e.buffers.color.setClear(q.r,q.g,q.b,Y,s)},this.clear=function(e,t,r){var i=0;(void 0===e||e)&&(i|=g.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=g.DEPTH_BUFFER_BIT),(void 0===r||r)&&(i|=g.STENCIL_BUFFER_BIT),g.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,r,i){this.setRenderTarget(e),this.clear(t,r,i)},this.resetGLState=Et,this.dispose=function(){t.removeEventListener("webglcontextlost",zt,!1),ut.dispose()},this.renderBufferImmediate=function(e,t,r){$e.initAttributes();var i=it.get(e);e.hasPositions&&!i.position&&(i.position=g.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=g.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=g.createBuffer()),e.hasColors&&!i.color&&(i.color=g.createBuffer());var n=t.getAttributes();if(e.hasPositions&&(g.bindBuffer(g.ARRAY_BUFFER,i.position),g.bufferData(g.ARRAY_BUFFER,e.positionArray,g.DYNAMIC_DRAW),$e.enableAttribute(n.position),g.vertexAttribPointer(n.position,3,g.FLOAT,!1,0,0)),e.hasNormals){if(g.bindBuffer(g.ARRAY_BUFFER,i.normal),!r.isMeshPhongMaterial&&!r.isMeshStandardMaterial&&!r.isMeshNormalMaterial&&r.shading===y)for(var a=0,o=3*e.count;a<o;a+=9){var s=e.normalArray,c=(s[a+0]+s[a+3]+s[a+6])/3,l=(s[a+1]+s[a+4]+s[a+7])/3,u=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=c,s[a+1]=l,s[a+2]=u,s[a+3]=c,s[a+4]=l,s[a+5]=u,s[a+6]=c,s[a+7]=l,s[a+8]=u}g.bufferData(g.ARRAY_BUFFER,e.normalArray,g.DYNAMIC_DRAW),$e.enableAttribute(n.normal),g.vertexAttribPointer(n.normal,3,g.FLOAT,!1,0,0)}e.hasUvs&&r.map&&(g.bindBuffer(g.ARRAY_BUFFER,i.uv),g.bufferData(g.ARRAY_BUFFER,e.uvArray,g.DYNAMIC_DRAW),$e.enableAttribute(n.uv),g.vertexAttribPointer(at.uv,2,g.FLOAT,!1,0,0)),e.hasColors&&r.vertexColors!==E&&(g.bindBuffer(g.ARRAY_BUFFER,i.color),g.bufferData(g.ARRAY_BUFFER,e.colorArray,g.DYNAMIC_DRAW),$e.enableAttribute(n.color),g.vertexAttribPointer(n.color,3,g.FLOAT,!1,0,0)),$e.disableUnusedAttributes(),g.drawArrays(g.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,r,i,n,a){$e.setMaterial(i);var o=Ot(e,t,i,n),s=r.id+"_"+o.id+"_"+(!0===i.wireframe),c=!1;s!==_&&(_=s,c=!0);var l=n.morphTargetInfluences;if(void 0!==l){for(var u=[],h=0,d=l.length;h<d;h++){var f=l[h];u.push([f,h])}u.sort(Lt),u.length>8&&(u.length=8);for(var m=r.morphAttributes,h=0,d=u.length;h<d;h++){var f=u[h];if(p[h]=f[0],0!==f[0]){var v=f[1];!0===i.morphTargets&&m.position&&r.addAttribute("morphTarget"+h,m.position[v]),!0===i.morphNormals&&m.normal&&r.addAttribute("morphNormal"+h,m.normal[v])}else!0===i.morphTargets&&r.removeAttribute("morphTarget"+h),!0===i.morphNormals&&r.removeAttribute("morphNormal"+h)}for(var h=u.length,y=p.length;h<y;h++)p[h]=0;o.getUniforms().setValue(g,"morphTargetInfluences",p),c=!0}var v=r.index,x=r.attributes.position,E=1;!0===i.wireframe&&(v=ot.getWireframeAttribute(r),E=2);var b=vt;null!==v&&(b=gt).setIndex(v),c&&(function(e,t,r,i){if(r&&r.isInstancedBufferGeometry&&null===Fe.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===i&&(i=0),$e.initAttributes();var n=r.attributes,a=t.getAttributes(),o=e.defaultAttributeValues;for(var s in a){var c=a[s];if(c>=0){var l=n[s];if(void 0!==l){var u=l.normalized,h=l.itemSize,d=at.get(l),p=d.buffer,f=d.type,m=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var v=l.data,y=v.stride,x=l.offset;v&&v.isInstancedInterleavedBuffer?($e.enableAttributeAndDivisor(c,v.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=v.meshPerAttribute*v.count)):$e.enableAttribute(c),g.bindBuffer(g.ARRAY_BUFFER,p),g.vertexAttribPointer(c,h,f,u,y*m,(i*y+x)*m)}else l.isInstancedBufferAttribute?($e.enableAttributeAndDivisor(c,l.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=l.meshPerAttribute*l.count)):$e.enableAttribute(c),g.bindBuffer(g.ARRAY_BUFFER,p),g.vertexAttribPointer(c,h,f,u,0,i*h*m)}else if(void 0!==o){var E=o[s];if(void 0!==E)switch(E.length){case 2:g.vertexAttrib2fv(c,E);break;case 3:g.vertexAttrib3fv(c,E);break;case 4:g.vertexAttrib4fv(c,E);break;default:g.vertexAttrib1fv(c,E)}}}}$e.disableUnusedAttributes()}}(i,o,r),null!==v&&g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,at.get(v).buffer));var w=0;null!==v?w=v.count:void 0!==x&&(w=x.count);var T=r.drawRange.start*E,M=r.drawRange.count*E,S=null!==a?a.start*E:0,R=null!==a?a.count*E:1/0,A=Math.max(T,S),z=Math.min(w,T+M,S+R)-1,C=Math.max(0,z-A+1);if(0!==C){if(n.isMesh)if(!0===i.wireframe)$e.setLineWidth(i.wireframeLinewidth*yt()),b.setMode(g.LINES);else switch(n.drawMode){case et:b.setMode(g.TRIANGLES);break;case tt:b.setMode(g.TRIANGLE_STRIP);break;case rt:b.setMode(g.TRIANGLE_FAN)}else if(n.isLine){var P=i.linewidth;void 0===P&&(P=1),$e.setLineWidth(P*yt()),n.isLineSegments?b.setMode(g.LINES):n.isLineLoop?b.setMode(g.LINE_LOOP):b.setMode(g.LINE_STRIP)}else n.isPoints&&b.setMode(g.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&b.renderInstances(r,A,C):b.render(A,C)}},this.compile=function(e,t){u=[],e.traverse(function(e){e.isLight&&u.push(e)}),Ft(u,t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var r=0;r<t.material.length;r++)Ht(t.material[r],e.fog,t);else Ht(t.material,e.fog,t)})},this.render=function(e,t,r,i){if(void 0===t||!0===t.isCamera){_="",M=-1,S=null,!0===e.autoUpdate&&e.updateMatrixWorld(),t.onBeforeRender(x),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),oe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),te.setFromMatrix(oe),u.length=0,f.length=0,m.length=0,ae=this.localClippingEnabled,ne=re.init(this.clippingPlanes,ae,t),(h=ut.get(e,t)).init(),function e(t,r,i){if(t.visible){var n=t.layers.test(r.layers);if(n)if(t.isLight)u.push(t);else if(t.isSprite)t.frustumCulled&&!te.intersectsSprite(t)||f.push(t);else if(t.isLensFlare)m.push(t);else if(t.isImmediateRenderObject)i&&se.setFromMatrixPosition(t.matrixWorld).applyMatrix4(oe),h.push(t,null,t.material,se.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||te.intersectsObject(t))){i&&se.setFromMatrixPosition(t.matrixWorld).applyMatrix4(oe);var a=st.update(t),o=t.material;if(Array.isArray(o))for(var s=a.groups,c=0,l=s.length;c<l;c++){var d=s[c],p=o[d.materialIndex];p&&p.visible&&h.push(t,a,p,se.z,d)}else o.visible&&h.push(t,a,o,se.z,null)}for(var v=t.children,c=0,l=v.length;c<l;c++)e(v[c],r,i)}}(e,t,x.sortObjects),h.finish(),!0===x.sortObjects&&h.sort(),ne&&re.beginShadows(),function(e){for(var t=0,r=0,i=e.length;r<i;r++){var n=e[r];n.castShadow&&(ue.shadows[t]=n,t++)}ue.shadows.length=t}(u),bt.render(e,t),Ft(u,t),ne&&re.endShadows(),de.frame++,de.calls=0,de.vertices=0,de.faces=0,de.points=0,void 0===r&&(r=null),this.setRenderTarget(r);var n=e.background;null===n?$e.buffers.color.setClear(q.r,q.g,q.b,Y,s):n&&n.isColor&&($e.buffers.color.setClear(n.r,n.g,n.b,1,s),i=!0),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),n&&n.isCubeTexture?(void 0===ft&&(ft=new Ci,mt=new Mi(new Si(5,5,5),new Ir({uniforms:Er.cube.uniforms,vertexShader:Er.cube.vertexShader,fragmentShader:Er.cube.fragmentShader,side:v,depthTest:!1,depthWrite:!1,fog:!1}))),ft.projectionMatrix.copy(t.projectionMatrix),ft.matrixWorld.extractRotation(t.matrixWorld),ft.matrixWorldInverse.getInverse(ft.matrixWorld),mt.material.uniforms.tCube.value=n,mt.modelViewMatrix.multiplyMatrices(ft.matrixWorldInverse,mt.matrixWorld),st.update(mt),x.renderBufferDirect(ft,null,mt.geometry,mt.material,mt,null)):n&&n.isTexture&&(void 0===ht&&(ht=new Pi(-1,1,1,-1,0,1),pt=new Mi(new Ai(2,2),new oi({depthTest:!1,depthWrite:!1,fog:!1}))),pt.material.map=n,st.update(pt),x.renderBufferDirect(ht,null,pt.geometry,pt.material,pt,null));var a=h.opaque,o=h.transparent;if(e.overrideMaterial){var c=e.overrideMaterial;a.length&&Dt(a,e,t,c),o.length&&Dt(o,e,t,c)}else a.length&&Dt(a,e,t),o.length&&Dt(o,e,t);Mt.render(e,t),_t.render(e,t,W),r&&nt.updateRenderTargetMipmap(r),$e.buffers.depth.setTest(!0),$e.buffers.depth.setMask(!0),$e.buffers.color.setMask(!0),t.isArrayCamera&&t.enabled&&x.setScissorTest(!1),t.onAfterRender(x)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(e,t){$e.setCullFace(e),$e.setFlipSided(t===d)},this.allocTextureUnit=function(){var e=X;return e>=Ke.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Ke.maxTextures),X+=1,e},this.setTexture2D=(Tt=!1,function(e,t){e&&e.isWebGLRenderTarget&&(Tt||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Tt=!0),e=e.texture),nt.setTexture2D(e,t)}),this.setTexture=function(){var e=!1;return function(t,r){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),nt.setTexture2D(t,r)}}(),this.setTextureCube=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?nt.setTextureCube(t,r):nt.setTextureCubeDynamic(t,r)}}(),this.getRenderTarget=function(){return w},this.setRenderTarget=function(e){w=e,e&&void 0===it.get(e).__webglFramebuffer&&nt.setupRenderTarget(e);var t,r=e&&e.isWebGLRenderTargetCube;if(e){var i=it.get(e);t=r?i.__webglFramebuffer[e.activeCubeFace]:i.__webglFramebuffer,R.copy(e.scissor),A=e.scissorTest,W.copy(e.viewport)}else t=null,R.copy(K).multiplyScalar(J),A=$,W.copy(ee).multiplyScalar(J);if(T!==t&&(g.bindFramebuffer(g.FRAMEBUFFER,t),T=t),$e.scissor(R),$e.setScissorTest(A),$e.viewport(W),r){var n=it.get(e.texture);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,n.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,r,i,n,a){if(!1!==(e&&e.isWebGLRenderTarget)){var o=it.get(e).__webglFramebuffer;if(o){var s=!1;o!==T&&(g.bindFramebuffer(g.FRAMEBUFFER,o),s=!0);try{var c=e.texture,l=c.format,u=c.type;if(l!==Ie&&Gt(l)!==g.getParameter(g.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===Te||Gt(u)===g.getParameter(g.IMPLEMENTATION_COLOR_READ_TYPE)||u===ze&&(Fe.get("OES_texture_float")||Fe.get("WEBGL_color_buffer_float"))||u===Ce&&Fe.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");g.checkFramebufferStatus(g.FRAMEBUFFER)===g.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-i&&r>=0&&r<=e.height-n&&g.readPixels(t,r,i,n,Gt(l),Gt(u),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&g.bindFramebuffer(g.FRAMEBUFFER,T)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function pn(e,t){this.name="",this.color=new vr(e),this.density=void 0!==t?t:25e-5}function fn(e,t,r){this.name="",this.color=new vr(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3}function mn(){ri.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function vn(e,t,r,i,n){ri.call(this),this.lensFlares=[],this.positionScreen=new St,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,r,i,n)}function gn(e){Or.call(this),this.type="SpriteMaterial",this.color=new vr(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function yn(e){ri.call(this),this.type="Sprite",this.material=void 0!==e?e:new gn}function xn(){ri.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function En(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Rt)}}function bn(){ri.call(this),this.type="Bone"}function wn(e,t){Mi.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Rt,this.bindMatrixInverse=new Rt;var r=this.initBones(),i=new En(r);this.bind(i,this.matrixWorld),this.normalizeSkinWeights()}function Tn(e){Or.call(this),this.type="LineBasicMaterial",this.color=new vr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Mn(e,t,r){if(1===r)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new _n(e,t);ri.call(this),this.type="Line",this.geometry=void 0!==e?e:new Ti,this.material=void 0!==t?t:new Tn({color:16777215*Math.random()})}function _n(e,t){Mn.call(this,e,t),this.type="LineSegments"}function Sn(e,t){Mn.call(this,e,t),this.type="LineLoop"}function Rn(e){Or.call(this),this.type="PointsMaterial",this.color=new vr(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function An(e,t){ri.call(this),this.type="Points",this.geometry=void 0!==e?e:new Ti,this.material=void 0!==t?t:new Rn({color:16777215*Math.random()})}function zn(){ri.call(this),this.type="Group"}function Cn(e,t,r,i,n,a,o,s,c){bt.call(this,e,t,r,i,n,a,o,s,c),this.generateMipmaps=!1;var l=this;!function t(){requestAnimationFrame(t),e.readyState>=e.HAVE_CURRENT_DATA&&(l.needsUpdate=!0)}()}function Pn(e,t,r,i,n,a,o,s,c,l,u,h){bt.call(this,null,a,o,s,c,l,i,n,u,h),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Ln(e,t,r,i,n,a,o,s,c){bt.call(this,e,t,r,i,n,a,o,s,c),this.needsUpdate=!0}function Dn(e,t,r,i,n,a,o,s,c,l){if((l=void 0!==l?l:Ge)!==Ge&&l!==Ve)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&l===Ge&&(r=Se),void 0===r&&l===Ve&&(r=Ue),bt.call(this,null,i,n,a,o,s,l,r,c),this.image={width:e,height:t},this.magFilter=void 0!==o?o:ge,this.minFilter=void 0!==s?s:ge,this.flipY=!1,this.generateMipmaps=!1}function Un(e){Ti.call(this),this.type="WireframeGeometry";var t,r,i,n,a,o,s,c,l,u,h=[],d=[0,0],p={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,i=m.length;t<i;t++){var v=m[t];for(r=0;r<3;r++)s=v[f[r]],c=v[f[(r+1)%3]],d[0]=Math.min(s,c),d[1]=Math.max(s,c),l=d[0]+","+d[1],void 0===p[l]&&(p[l]={index1:d[0],index2:d[1]})}for(l in p)o=p[l],u=e.vertices[o.index1],h.push(u.x,u.y,u.z),u=e.vertices[o.index2],h.push(u.x,u.y,u.z)}else if(e&&e.isBufferGeometry){var g,y,x,E,b,w,T,M;if(u=new St,null!==e.index){for(g=e.attributes.position,y=e.index,0===(x=e.groups).length&&(x=[{start:0,count:y.count,materialIndex:0}]),n=0,a=x.length;n<a;++n)for(E=x[n],b=E.start,w=E.count,t=b,i=b+w;t<i;t+=3)for(r=0;r<3;r++)s=y.getX(t+r),c=y.getX(t+(r+1)%3),d[0]=Math.min(s,c),d[1]=Math.max(s,c),l=d[0]+","+d[1],void 0===p[l]&&(p[l]={index1:d[0],index2:d[1]});for(l in p)o=p[l],u.fromBufferAttribute(g,o.index1),h.push(u.x,u.y,u.z),u.fromBufferAttribute(g,o.index2),h.push(u.x,u.y,u.z)}else for(g=e.attributes.position,t=0,i=g.count/3;t<i;t++)for(r=0;r<3;r++)T=3*t+r,u.fromBufferAttribute(g,T),h.push(u.x,u.y,u.z),M=3*t+(r+1)%3,u.fromBufferAttribute(g,M),h.push(u.x,u.y,u.z)}this.addAttribute("position",new mi(h,3))}function Hn(e,t,r){wi.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new On(e,t,r)),this.mergeVertices()}function On(e,t,r){Ti.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var i,n,a=[],o=[],s=[],c=[],l=new St,u=new St,h=new St,d=new St,p=new St,f=t+1;for(i=0;i<=r;i++){var m=i/r;for(n=0;n<=t;n++){var v=n/t;u=e(v,m,u),o.push(u.x,u.y,u.z),v-1e-5>=0?(h=e(v-1e-5,m,h),d.subVectors(u,h)):(h=e(v+1e-5,m,h),d.subVectors(h,u)),m-1e-5>=0?(h=e(v,m-1e-5,h),p.subVectors(u,h)):(h=e(v,m+1e-5,h),p.subVectors(h,u)),l.crossVectors(d,p).normalize(),s.push(l.x,l.y,l.z),c.push(v,m)}}for(i=0;i<r;i++)for(n=0;n<t;n++){var g=i*f+n,y=i*f+n+1,x=(i+1)*f+n+1,E=(i+1)*f+n;a.push(g,y,E),a.push(y,x,E)}this.setIndex(a),this.addAttribute("position",new mi(o,3)),this.addAttribute("normal",new mi(s,3)),this.addAttribute("uv",new mi(c,2))}function In(e,t,r,i){wi.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i},this.fromBufferGeometry(new Nn(e,t,r,i)),this.mergeVertices()}function Nn(e,t,r,i){Ti.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i},r=r||1;var n=[],a=[];function o(e,t,r,i){var n,a,o=Math.pow(2,i),c=[];for(n=0;n<=o;n++){c[n]=[];var l=e.clone().lerp(r,n/o),u=t.clone().lerp(r,n/o),h=o-n;for(a=0;a<=h;a++)c[n][a]=0===a&&n===o?l:l.clone().lerp(u,a/h)}for(n=0;n<o;n++)for(a=0;a<2*(o-n)-1;a++){var d=Math.floor(a/2);a%2==0?(s(c[n][d+1]),s(c[n+1][d]),s(c[n][d])):(s(c[n][d+1]),s(c[n+1][d+1]),s(c[n+1][d]))}}function s(e){n.push(e.x,e.y,e.z)}function c(t,r){var i=3*t;r.x=e[i+0],r.y=e[i+1],r.z=e[i+2]}function l(e,t,r,i){i<0&&1===e.x&&(a[t]=e.x-1),0===r.x&&0===r.z&&(a[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){for(var r=new St,i=new St,n=new St,a=0;a<t.length;a+=3)c(t[a+0],r),c(t[a+1],i),c(t[a+2],n),o(r,i,n,e)}(i=i||0),function(e){for(var t=new St,r=0;r<n.length;r+=3)t.x=n[r+0],t.y=n[r+1],t.z=n[r+2],t.normalize().multiplyScalar(e),n[r+0]=t.x,n[r+1]=t.y,n[r+2]=t.z}(r),function(){for(var e=new St,t=0;t<n.length;t+=3){e.x=n[t+0],e.y=n[t+1],e.z=n[t+2];var r=u(e)/2/Math.PI+.5,i=(o=e,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(r,1-i)}var o;(function(){for(var e=new St,t=new St,r=new St,i=new St,o=new pt,s=new pt,c=new pt,h=0,d=0;h<n.length;h+=9,d+=6){e.set(n[h+0],n[h+1],n[h+2]),t.set(n[h+3],n[h+4],n[h+5]),r.set(n[h+6],n[h+7],n[h+8]),o.set(a[d+0],a[d+1]),s.set(a[d+2],a[d+3]),c.set(a[d+4],a[d+5]),i.copy(e).add(t).add(r).divideScalar(3);var p=u(i);l(o,d+0,e,p),l(s,d+2,t,p),l(c,d+4,r,p)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],r=a[e+2],i=a[e+4],n=Math.max(t,r,i),o=Math.min(t,r,i);n>.9&&o<.1&&(t<.2&&(a[e+0]+=1),r<.2&&(a[e+2]+=1),i<.2&&(a[e+4]+=1))}}()}(),this.addAttribute("position",new mi(n,3)),this.addAttribute("normal",new mi(n.slice(),3)),this.addAttribute("uv",new mi(a,2)),this.normalizeNormals()}function Bn(e,t){wi.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Fn(e,t)),this.mergeVertices()}function Fn(e,t){Nn.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Gn(e,t){wi.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Vn(e,t)),this.mergeVertices()}function Vn(e,t){Nn.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function jn(e,t){wi.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new kn(e,t)),this.mergeVertices()}function kn(e,t){var r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1];Nn.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Wn(e,t){wi.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Xn(e,t)),this.mergeVertices()}function Xn(e,t){var r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i];Nn.call(this,n,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function qn(e,t,r,i,n,a){wi.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:n},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Yn(e,t,r,i,n);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Yn(e,t,r,i,n){Ti.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:n},t=t||64,r=r||1,i=i||8,n=n||!1;var a=e.computeFrenetFrames(t,n);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,c=new St,l=new St,u=new pt,h=[],d=[],p=[],f=[];function m(n){var o=e.getPointAt(n/t),u=a.normals[n],p=a.binormals[n];for(s=0;s<=i;s++){var f=s/i*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);l.x=v*u.x+m*p.x,l.y=v*u.y+m*p.y,l.z=v*u.z+m*p.z,l.normalize(),d.push(l.x,l.y,l.z),c.x=o.x+r*l.x,c.y=o.y+r*l.y,c.z=o.z+r*l.z,h.push(c.x,c.y,c.z)}}!function(){for(o=0;o<t;o++)m(o);m(!1===n?t:0),function(){for(o=0;o<=t;o++)for(s=0;s<=i;s++)u.x=o/t,u.y=s/i,p.push(u.x,u.y)}(),function(){for(s=1;s<=t;s++)for(o=1;o<=i;o++){var e=(i+1)*(s-1)+(o-1),r=(i+1)*s+(o-1),n=(i+1)*s+o,a=(i+1)*(s-1)+o;f.push(e,r,a),f.push(r,n,a)}}()}(),this.setIndex(f),this.addAttribute("position",new mi(h,3)),this.addAttribute("normal",new mi(d,3)),this.addAttribute("uv",new mi(p,2))}function Zn(e,t,r,i,n,a,o){wi.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Qn(e,t,r,i,n,a)),this.mergeVertices()}function Qn(e,t,r,i,n,a){Ti.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:a},e=e||100,t=t||40,r=Math.floor(r)||64,i=Math.floor(i)||8,n=n||2,a=a||3;var o,s,c=[],l=[],u=[],h=[],d=new St,p=new St,f=new St,m=new St,v=new St,g=new St,y=new St;for(o=0;o<=r;++o){var x=o/r*n*Math.PI*2;for(R(x,n,a,e,f),R(x+.01,n,a,e,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=i;++s){var E=s/i*Math.PI*2,b=-t*Math.cos(E),w=t*Math.sin(E);d.x=f.x+(b*y.x+w*v.x),d.y=f.y+(b*y.y+w*v.y),d.z=f.z+(b*y.z+w*v.z),l.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),u.push(p.x,p.y,p.z),h.push(o/r),h.push(s/i)}}for(s=1;s<=r;s++)for(o=1;o<=i;o++){var T=(i+1)*(s-1)+(o-1),M=(i+1)*s+(o-1),_=(i+1)*s+o,S=(i+1)*(s-1)+o;c.push(T,M,S),c.push(M,_,S)}function R(e,t,r,i,n){var a=Math.cos(e),o=Math.sin(e),s=r/t*e,c=Math.cos(s);n.x=i*(2+c)*.5*a,n.y=i*(2+c)*o*.5,n.z=i*Math.sin(s)*.5}this.setIndex(c),this.addAttribute("position",new mi(l,3)),this.addAttribute("normal",new mi(u,3)),this.addAttribute("uv",new mi(h,2))}function Jn(e,t,r,i,n){wi.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:n},this.fromBufferGeometry(new Kn(e,t,r,i,n)),this.mergeVertices()}function Kn(e,t,r,i,n){Ti.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:n},e=e||100,t=t||40,r=Math.floor(r)||8,i=Math.floor(i)||6,n=n||2*Math.PI;var a,o,s=[],c=[],l=[],u=[],h=new St,d=new St,p=new St;for(a=0;a<=r;a++)for(o=0;o<=i;o++){var f=o/i*n,m=a/r*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(f),d.y=(e+t*Math.cos(m))*Math.sin(f),d.z=t*Math.sin(m),c.push(d.x,d.y,d.z),h.x=e*Math.cos(f),h.y=e*Math.sin(f),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),u.push(o/i),u.push(a/r)}for(a=1;a<=r;a++)for(o=1;o<=i;o++){var v=(i+1)*a+o-1,g=(i+1)*(a-1)+o-1,y=(i+1)*(a-1)+o,x=(i+1)*a+o;s.push(v,g,x),s.push(g,y,x)}this.setIndex(s),this.addAttribute("position",new mi(c,3)),this.addAttribute("normal",new mi(l,3)),this.addAttribute("uv",new mi(u,2))}pn.prototype.isFogExp2=!0,pn.prototype.clone=function(){return new pn(this.color.getHex(),this.density)},pn.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},fn.prototype.isFog=!0,fn.prototype.clone=function(){return new fn(this.color.getHex(),this.near,this.far)},fn.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},mn.prototype=Object.assign(Object.create(ri.prototype),{constructor:mn,copy:function(e,t){return ri.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=ri.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),vn.prototype=Object.assign(Object.create(ri.prototype),{constructor:vn,isLensFlare:!0,copy:function(e){ri.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,r=e.lensFlares.length;t<r;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,r,i,n,a){void 0===t&&(t=-1),void 0===r&&(r=0),void 0===a&&(a=1),void 0===n&&(n=new vr(16777215)),void 0===i&&(i=M),r=Math.min(r,Math.max(0,r)),this.lensFlares.push({texture:e,size:t,distance:r,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:n,blending:i})},updateLensFlares:function(){var e,t,r=this.lensFlares.length,i=2*-this.positionScreen.x,n=2*-this.positionScreen.y;for(e=0;e<r;e++)(t=this.lensFlares[e]).x=this.positionScreen.x+i*t.distance,t.y=this.positionScreen.y+n*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),gn.prototype=Object.create(Or.prototype),gn.prototype.constructor=gn,gn.prototype.isSpriteMaterial=!0,gn.prototype.copy=function(e){return Or.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},yn.prototype=Object.assign(Object.create(ri.prototype),{constructor:yn,isSprite:!0,raycast:(Xi=new St,qi=new St,Yi=new St,function(e,t){qi.setFromMatrixPosition(this.matrixWorld),e.ray.closestPointToPoint(qi,Xi),Yi.setFromMatrixScale(this.matrixWorld);var r=Yi.x*Yi.y/4;if(!(qi.distanceToSquared(Xi)>r)){var i=e.ray.origin.distanceTo(Xi);i<e.near||i>e.far||t.push({distance:i,point:Xi.clone(),face:null,object:this})}}),clone:function(){return new this.constructor(this.material).copy(this)}}),xn.prototype=Object.assign(Object.create(ri.prototype),{constructor:xn,copy:function(e){ri.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,i=t.length;r<i;r++){var n=t[r];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,i=0;i<r.length&&!(t<r[i].distance);i++);r.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,r=1,i=t.length;r<i&&!(e<t[r].distance);r++);return t[r-1].object},raycast:(Wi=new St,function(e,t){Wi.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(Wi);this.getObjectForDistance(r).raycast(e,t)}),update:function(){var e=new St,t=new St;return function(r){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var n=e.distanceTo(t);i[0].object.visible=!0;for(var a=1,o=i.length;a<o&&n>=i[a].distance;a++)i[a-1].object.visible=!1,i[a].object.visible=!0;for(;a<o;a++)i[a].object.visible=!1}}}(),toJSON:function(e){var t=ri.prototype.toJSON.call(this,e);t.object.levels=[];for(var r=this.levels,i=0,n=r.length;i<n;i++){var a=r[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Object.assign(En.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new Rt;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){var e,t,r;for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(ji=new Rt,ki=new Rt,function(){for(var e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture,n=0,a=e.length;n<a;n++){var o=e[n]?e[n].matrixWorld:ki;ji.multiplyMatrices(o,t[n]),ji.toArray(r,16*n)}void 0!==i&&(i.needsUpdate=!0)}),clone:function(){return new En(this.bones,this.boneInverses)}}),bn.prototype=Object.assign(Object.create(ri.prototype),{constructor:bn,isBone:!0}),wn.prototype=Object.assign(Object.create(Mi.prototype),{constructor:wn,isSkinnedMesh:!0,initBones:function(){var e,t,r,i,n=[];if(this.geometry&&void 0!==this.geometry.bones){for(r=0,i=this.geometry.bones.length;r<i;r++)t=this.geometry.bones[r],e=new bn,n.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(r=0,i=this.geometry.bones.length;r<i;r++)-1!==(t=this.geometry.bones[r]).parent&&null!==t.parent&&void 0!==n[t.parent]?n[t.parent].add(n[r]):this.add(n[r])}return this.updateMatrixWorld(!0),n},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var r=this.geometry.skinWeights[t];(e=1/r.lengthManhattan())!=1/0?r.multiplyScalar(e):r.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new wt,n=this.geometry.attributes.skinWeight;for(t=0;t<n.count;t++)i.x=n.getX(t),i.y=n.getY(t),i.z=n.getZ(t),i.w=n.getW(t),(e=1/i.lengthManhattan())!=1/0?i.multiplyScalar(e):i.set(1,0,0,0),n.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(e){Mi.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Tn.prototype=Object.create(Or.prototype),Tn.prototype.constructor=Tn,Tn.prototype.isLineBasicMaterial=!0,Tn.prototype.copy=function(e){return Or.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Mn.prototype=Object.assign(Object.create(ri.prototype),{constructor:Mn,isLine:!0,raycast:function(){var e=new Rt,t=new Wr,r=new Fr;return function(i,n){var a=i.linePrecision,o=a*a,s=this.geometry,c=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(c),!1!==i.ray.intersectsSphere(r)){e.getInverse(c),t.copy(i.ray).applyMatrix4(e);var l=new St,u=new St,h=new St,d=new St,p=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var f=s.index,m=s.attributes,v=m.position.array;if(null!==f)for(var g=f.array,y=0,x=g.length-1;y<x;y+=p){var E=g[y],b=g[y+1];l.fromArray(v,3*E),u.fromArray(v,3*b);var w=t.distanceSqToSegment(l,u,d,h);if(!(w>o)){d.applyMatrix4(this.matrixWorld);var T=i.ray.origin.distanceTo(d);T<i.near||T>i.far||n.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(var y=0,x=v.length/3-1;y<x;y+=p){l.fromArray(v,3*y),u.fromArray(v,3*y+3);var w=t.distanceSqToSegment(l,u,d,h);if(!(w>o)){d.applyMatrix4(this.matrixWorld);var T=i.ray.origin.distanceTo(d);T<i.near||T>i.far||n.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}else if(s.isGeometry)for(var M=s.vertices,_=M.length,y=0;y<_-1;y+=p){var w=t.distanceSqToSegment(M[y],M[y+1],d,h);if(!(w>o)){d.applyMatrix4(this.matrixWorld);var T=i.ray.origin.distanceTo(d);T<i.near||T>i.far||n.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),_n.prototype=Object.assign(Object.create(Mn.prototype),{constructor:_n,isLineSegments:!0}),Sn.prototype=Object.assign(Object.create(Mn.prototype),{constructor:Sn,isLineLoop:!0}),Rn.prototype=Object.create(Or.prototype),Rn.prototype.constructor=Rn,Rn.prototype.isPointsMaterial=!0,Rn.prototype.copy=function(e){return Or.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},An.prototype=Object.assign(Object.create(ri.prototype),{constructor:An,isPoints:!0,raycast:function(){var e=new Rt,t=new Wr,r=new Fr;return function(i,n){var a=this,o=this.geometry,s=this.matrixWorld,c=i.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),r.copy(o.boundingSphere),r.applyMatrix4(s),r.radius+=c,!1!==i.ray.intersectsSphere(r)){e.getInverse(s),t.copy(i.ray).applyMatrix4(e);var l=c/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=new St;if(o.isBufferGeometry){var d=o.index,p=o.attributes,f=p.position.array;if(null!==d)for(var m=d.array,v=0,g=m.length;v<g;v++){var y=m[v];h.fromArray(f,3*y),b(h,y)}else for(var v=0,x=f.length/3;v<x;v++)h.fromArray(f,3*v),b(h,v)}else for(var E=o.vertices,v=0,x=E.length;v<x;v++)b(E[v],v)}function b(e,r){var o=t.distanceSqToPoint(e);if(o<u){var c=t.closestPointToPoint(e);c.applyMatrix4(s);var l=i.ray.origin.distanceTo(c);if(l<i.near||l>i.far)return;n.push({distance:l,distanceToRay:Math.sqrt(o),point:c.clone(),index:r,face:null,object:a})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),zn.prototype=Object.assign(Object.create(ri.prototype),{constructor:zn}),Cn.prototype=Object.create(bt.prototype),Cn.prototype.constructor=Cn,Pn.prototype=Object.create(bt.prototype),Pn.prototype.constructor=Pn,Pn.prototype.isCompressedTexture=!0,Ln.prototype=Object.create(bt.prototype),Ln.prototype.constructor=Ln,Dn.prototype=Object.create(bt.prototype),Dn.prototype.constructor=Dn,Dn.prototype.isDepthTexture=!0,Un.prototype=Object.create(Ti.prototype),Un.prototype.constructor=Un,Hn.prototype=Object.create(wi.prototype),Hn.prototype.constructor=Hn,On.prototype=Object.create(Ti.prototype),On.prototype.constructor=On,In.prototype=Object.create(wi.prototype),In.prototype.constructor=In,Nn.prototype=Object.create(Ti.prototype),Nn.prototype.constructor=Nn,Bn.prototype=Object.create(wi.prototype),Bn.prototype.constructor=Bn,Fn.prototype=Object.create(Nn.prototype),Fn.prototype.constructor=Fn,Gn.prototype=Object.create(wi.prototype),Gn.prototype.constructor=Gn,Vn.prototype=Object.create(Nn.prototype),Vn.prototype.constructor=Vn,jn.prototype=Object.create(wi.prototype),jn.prototype.constructor=jn,kn.prototype=Object.create(Nn.prototype),kn.prototype.constructor=kn,Wn.prototype=Object.create(wi.prototype),Wn.prototype.constructor=Wn,Xn.prototype=Object.create(Nn.prototype),Xn.prototype.constructor=Xn,qn.prototype=Object.create(wi.prototype),qn.prototype.constructor=qn,Yn.prototype=Object.create(Ti.prototype),Yn.prototype.constructor=Yn,Zn.prototype=Object.create(wi.prototype),Zn.prototype.constructor=Zn,Qn.prototype=Object.create(Ti.prototype),Qn.prototype.constructor=Qn,Jn.prototype=Object.create(wi.prototype),Jn.prototype.constructor=Jn,Kn.prototype=Object.create(Ti.prototype),Kn.prototype.constructor=Kn;var $n={area:function(e){for(var t=e.length,r=0,i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return.5*r},triangulate:function(){function e(e,t,r,i,n,a){var o,s,c,l,u,h,d,p,f,m,v,g,y,x,E,b,w;if(s=e[a[t]].x,c=e[a[t]].y,l=e[a[r]].x,u=e[a[r]].y,h=e[a[i]].x,d=e[a[i]].y,(l-s)*(d-c)-(u-c)*(h-s)<=0)return!1;for(m=h-l,v=d-u,g=s-h,y=c-d,x=l-s,E=u-c,o=0;o<n;o++)if(p=e[a[o]].x,f=e[a[o]].y,!(p===s&&f===c||p===l&&f===u||p===h&&f===d)&&(b=x*(f-c)-E*(p-s),w=g*(f-d)-y*(p-h),m*(f-u)-v*(p-l)>=-Number.EPSILON&&w>=-Number.EPSILON&&b>=-Number.EPSILON))return!1;return!0}return function(t,r){var i=t.length;if(i<3)return null;var n,a,o,s=[],c=[],l=[];if($n.area(t)>0)for(a=0;a<i;a++)c[a]=a;else for(a=0;a<i;a++)c[a]=i-1-a;var u=i,h=2*u;for(a=u-1;u>2;){if(h--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),r?l:s;if(u<=(n=a)&&(n=0),u<=(a=n+1)&&(a=0),u<=(o=a+1)&&(o=0),e(t,n,a,o,u,c)){var d,p,f,m,v;for(d=c[n],p=c[a],f=c[o],s.push([t[d],t[p],t[f]]),l.push([c[n],c[a],c[o]]),m=a,v=a+1;v<u;m++,v++)c[m]=c[v];h=2*--u}}return r?l:s}}(),triangulateShape:function(e,t){function r(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function i(e,t,r){return e.x!==t.x?e.x<t.x?e.x<=r.x&&r.x<=t.x:t.x<=r.x&&r.x<=e.x:e.y<t.y?e.y<=r.y&&r.y<=t.y:t.y<=r.y&&r.y<=e.y}function n(e,t,r,n,a){var o=t.x-e.x,s=t.y-e.y,c=n.x-r.x,l=n.y-r.y,u=e.x-r.x,h=e.y-r.y,d=s*c-o*l,p=s*u-o*h;if(Math.abs(d)>Number.EPSILON){var f;if(d>0){if(p<0||p>d)return[];if((f=l*u-c*h)<0||f>d)return[]}else{if(p>0||p<d)return[];if((f=l*u-c*h)>0||f<d)return[]}if(0===f)return!a||0!==p&&p!==d?[e]:[];if(f===d)return!a||0!==p&&p!==d?[t]:[];if(0===p)return[r];if(p===d)return[n];var m=f/d;return[{x:e.x+m*o,y:e.y+m*s}]}if(0!==p||l*u!=c*h)return[];var v,g,y,x,E,b,w,T,M=0===o&&0===s,_=0===c&&0===l;return M&&_?e.x!==r.x||e.y!==r.y?[]:[e]:M?i(r,n,e)?[e]:[]:_?i(e,t,r)?[r]:[]:(0!==o?(e.x<t.x?(v=e,y=e.x,g=t,x=t.x):(v=t,y=t.x,g=e,x=e.x),r.x<n.x?(E=r,w=r.x,b=n,T=n.x):(E=n,w=n.x,b=r,T=r.x)):(e.y<t.y?(v=e,y=e.y,g=t,x=t.y):(v=t,y=t.y,g=e,x=e.y),r.y<n.y?(E=r,w=r.y,b=n,T=n.y):(E=n,w=n.y,b=r,T=r.y)),y<=w?x<w?[]:x===w?a?[]:[E]:x<=T?[E,g]:[E,b]:y>T?[]:y===T?a?[]:[v]:x<=T?[v,g]:[v,b])}function a(e,t,r,i){var n=t.x-e.x,a=t.y-e.y,o=r.x-e.x,s=r.y-e.y,c=i.x-e.x,l=i.y-e.y,u=n*s-a*o,h=n*l-a*c;if(Math.abs(u)>Number.EPSILON){var d=c*s-l*o;return u>0?h>=0&&d>=0:h>=0||d>=0}return h>0}r(e),t.forEach(r);for(var o,s,c,l,u,h,d={},p=e.concat(),f=0,m=t.length;f<m;f++)Array.prototype.push.apply(p,t[f]);for(o=0,s=p.length;o<s;o++)u=p[o].x+":"+p[o].y,void 0!==d[u]&&console.warn("THREE.ShapeUtils: Duplicate point",u,o),d[u]=o;var v=function(e,t){var r,i=e.concat();function o(e,t){var n=i.length-1,o=e-1;o<0&&(o=n);var s=e+1;s>n&&(s=0);var c=a(i[e],i[o],i[s],r[t]);if(!c)return!1;var l=r.length-1,u=t-1;u<0&&(u=l);var h=t+1;return h>l&&(h=0),!!(c=a(r[t],r[u],r[h],i[e]))}function s(e,t){var r,a;for(r=0;r<i.length;r++)if(a=r+1,a%=i.length,n(e,t,i[r],i[a],!0).length>0)return!0;return!1}var c=[];function l(e,r){var i,a,o,s;for(i=0;i<c.length;i++)for(a=t[c[i]],o=0;o<a.length;o++)if(s=o+1,s%=a.length,n(e,r,a[o],a[s],!0).length>0)return!0;return!1}for(var u,h,d,p,f,m,v,g,y,x,E=[],b=0,w=t.length;b<w;b++)c.push(b);for(var T=0,M=2*c.length;c.length>0;){if(--M<0){console.log("Infinite Loop! Holes left:"+c.length+", Probably Hole outside Shape!");break}for(h=T;h<i.length;h++){d=i[h],u=-1;for(var b=0;b<c.length;b++)if(f=c[b],m=d.x+":"+d.y+":"+f,void 0===E[m]){r=t[f];for(var _=0;_<r.length;_++)if(p=r[_],o(h,_)&&!s(d,p)&&!l(d,p)){u=_,c.splice(b,1),v=i.slice(0,h+1),g=i.slice(h),y=r.slice(u),x=r.slice(0,u+1),i=v.concat(y).concat(x).concat(g),T=h;break}if(u>=0)break;E[m]=!0}if(u>=0)break}}return i}(e,t),g=$n.triangulate(v,!1);for(o=0,s=g.length;o<s;o++)for(l=g[o],c=0;c<3;c++)u=l[c].x+":"+l[c].y,void 0!==(h=d[u])&&(l[c]=h);return g.concat()},isClockWise:function(e){return $n.area(e)<0}};function ea(e,t){wi.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ta(e,t)),this.mergeVertices()}function ta(e,t){void 0!==e?(Ti.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals()):e=[]}function ra(e,t){wi.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new ia(e,t)),this.mergeVertices()}function ia(e,t){var r=(t=t||{}).font;if(!1===(r&&r.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new wi;var i=r.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),ta.call(this,i,t),this.type="TextBufferGeometry"}function na(e,t,r,i,n,a,o){wi.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new aa(e,t,r,i,n,a,o)),this.mergeVertices()}function aa(e,t,r,i,n,a,o){Ti.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:a,thetaLength:o},e=e||50,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var s,c,l=a+o,u=0,h=[],d=new St,p=new St,f=[],m=[],v=[],g=[];for(c=0;c<=r;c++){var y=[],x=c/r;for(s=0;s<=t;s++){var E=s/t;d.x=-e*Math.cos(i+E*n)*Math.sin(a+x*o),d.y=e*Math.cos(a+x*o),d.z=e*Math.sin(i+E*n)*Math.sin(a+x*o),m.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),v.push(p.x,p.y,p.z),g.push(E,1-x),y.push(u++)}h.push(y)}for(c=0;c<r;c++)for(s=0;s<t;s++){var b=h[c][s+1],w=h[c][s],T=h[c+1][s],M=h[c+1][s+1];(0!==c||a>0)&&f.push(b,w,M),(c!==r-1||l<Math.PI)&&f.push(w,T,M)}this.setIndex(f),this.addAttribute("position",new mi(m,3)),this.addAttribute("normal",new mi(v,3)),this.addAttribute("uv",new mi(g,2))}function oa(e,t,r,i,n,a){wi.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:n,thetaLength:a},this.fromBufferGeometry(new sa(e,t,r,i,n,a)),this.mergeVertices()}function sa(e,t,r,i,n,a){Ti.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:n,thetaLength:a},e=e||20,t=t||50,n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI,r=void 0!==r?Math.max(3,r):8,i=void 0!==i?Math.max(1,i):1;var o,s,c,l=[],u=[],h=[],d=[],p=e,f=(t-e)/i,m=new St,v=new pt;for(s=0;s<=i;s++){for(c=0;c<=r;c++)o=n+c/r*a,m.x=p*Math.cos(o),m.y=p*Math.sin(o),u.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,d.push(v.x,v.y);p+=f}for(s=0;s<i;s++){var g=s*(r+1);for(c=0;c<r;c++){var y=o=c+g,x=o+r+1,E=o+r+2,b=o+1;l.push(y,x,b),l.push(x,E,b)}}this.setIndex(l),this.addAttribute("position",new mi(u,3)),this.addAttribute("normal",new mi(h,3)),this.addAttribute("uv",new mi(d,2))}function ca(e,t,r,i){wi.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},this.fromBufferGeometry(new la(e,t,r,i)),this.mergeVertices()}function la(e,t,r,i){Ti.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t)||12,r=r||0,i=i||2*Math.PI,i=dt.clamp(i,0,2*Math.PI);var n,a,o,s=[],c=[],l=[],u=1/t,h=new St,d=new pt;for(a=0;a<=t;a++){var p=r+a*u*i,f=Math.sin(p),m=Math.cos(p);for(o=0;o<=e.length-1;o++)h.x=e[o].x*f,h.y=e[o].y,h.z=e[o].x*m,c.push(h.x,h.y,h.z),d.x=a/t,d.y=o/(e.length-1),l.push(d.x,d.y)}for(a=0;a<t;a++)for(o=0;o<e.length-1;o++){var v=n=o+a*e.length,g=n+e.length,y=n+e.length+1,x=n+1;s.push(v,g,x),s.push(g,y,x)}if(this.setIndex(s),this.addAttribute("position",new mi(c,3)),this.addAttribute("uv",new mi(l,2)),this.computeVertexNormals(),i===2*Math.PI){var E=this.attributes.normal.array,b=new St,w=new St,T=new St;for(n=t*e.length*3,a=0,o=0;a<e.length;a++,o+=3)b.x=E[o+0],b.y=E[o+1],b.z=E[o+2],w.x=E[n+o+0],w.y=E[n+o+1],w.z=E[n+o+2],T.addVectors(b,w).normalize(),E[o+0]=E[n+o+0]=T.x,E[o+1]=E[n+o+1]=T.y,E[o+2]=E[n+o+2]=T.z}}function ua(e,t){wi.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ha(e,t)),this.mergeVertices()}function ha(e,t){Ti.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],i=[],n=[],a=[],o=0,s=0;if(!1===Array.isArray(e))l(e);else for(var c=0;c<e.length;c++)l(e[c]),this.addGroup(o,s,c),o+=s,s=0;function l(e){var o,c,l,u=i.length/3,h=e.extractPoints(t),d=h.shape,p=h.holes;if(!1===$n.isClockWise(d))for(d=d.reverse(),o=0,c=p.length;o<c;o++)l=p[o],!0===$n.isClockWise(l)&&(p[o]=l.reverse());var f=$n.triangulateShape(d,p);for(o=0,c=p.length;o<c;o++)l=p[o],d=d.concat(l);for(o=0,c=d.length;o<c;o++){var m=d[o];i.push(m.x,m.y,0),n.push(0,0,1),a.push(m.x,m.y)}for(o=0,c=f.length;o<c;o++){var v=f[o],g=v[0]+u,y=v[1]+u,x=v[2]+u;r.push(g,y,x),s+=3}}this.setIndex(r),this.addAttribute("position",new mi(i,3)),this.addAttribute("normal",new mi(n,3)),this.addAttribute("uv",new mi(a,2))}function da(e,t){Ti.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var r,i,n,a,o=[],s=Math.cos(dt.DEG2RAD*t),c=[0,0],l={},u=["a","b","c"];e.isBufferGeometry?(a=new wi).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,d=a.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],v=0;v<3;v++)r=m[u[v]],i=m[u[(v+1)%3]],c[0]=Math.min(r,i),c[1]=Math.max(r,i),n=c[0]+","+c[1],void 0===l[n]?l[n]={index1:c[0],index2:c[1],face1:p,face2:void 0}:l[n].face2=p;for(n in l){var g=l[n];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=s){var y=h[g.index1];o.push(y.x,y.y,y.z),y=h[g.index2],o.push(y.x,y.y,y.z)}}this.addAttribute("position",new mi(o,3))}function pa(e,t,r,i,n,a,o,s){wi.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new fa(e,t,r,i,n,a,o,s)),this.mergeVertices()}function fa(e,t,r,i,n,a,o,s){Ti.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s};var c=this;e=void 0!==e?e:20,t=void 0!==t?t:20,r=void 0!==r?r:100,i=Math.floor(i)||8,n=Math.floor(n)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var l=[],u=[],h=[],d=[],p=0,f=[],m=r/2,v=0;function g(r){var n,a,f,g=new pt,y=new St,x=0,E=!0===r?e:t,b=!0===r?1:-1;for(a=p,n=1;n<=i;n++)u.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),p++;for(f=p,n=0;n<=i;n++){var w=n/i,T=w*s+o,M=Math.cos(T),_=Math.sin(T);y.x=E*_,y.y=m*b,y.z=E*M,u.push(y.x,y.y,y.z),h.push(0,b,0),g.x=.5*M+.5,g.y=.5*_*b+.5,d.push(g.x,g.y),p++}for(n=0;n<i;n++){var S=a+n,R=f+n;!0===r?l.push(R,R+1,S):l.push(R+1,R,S),x+=3}c.addGroup(v,x,!0===r?1:2),v+=x}!function(){var a,g,y=new St,x=new St,E=0,b=(t-e)/r;for(g=0;g<=n;g++){var w=[],T=g/n,M=T*(t-e)+e;for(a=0;a<=i;a++){var _=a/i,S=_*s+o,R=Math.sin(S),A=Math.cos(S);x.x=M*R,x.y=-T*r+m,x.z=M*A,u.push(x.x,x.y,x.z),y.set(R,b,A).normalize(),h.push(y.x,y.y,y.z),d.push(_,1-T),w.push(p++)}f.push(w)}for(a=0;a<i;a++)for(g=0;g<n;g++){var z=f[g][a],C=f[g+1][a],P=f[g+1][a+1],L=f[g][a+1];l.push(z,C,L),l.push(C,P,L),E+=6}c.addGroup(v,E,0),v+=E}(),!1===a&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(l),this.addAttribute("position",new mi(u,3)),this.addAttribute("normal",new mi(h,3)),this.addAttribute("uv",new mi(d,2))}function ma(e,t,r,i,n,a,o){pa.call(this,0,e,t,r,i,n,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:a,thetaLength:o}}function va(e,t,r,i,n,a,o){fa.call(this,0,e,t,r,i,n,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:a,thetaLength:o}}function ga(e,t,r,i){wi.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},this.fromBufferGeometry(new ya(e,t,r,i)),this.mergeVertices()}function ya(e,t,r,i){Ti.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},e=e||50,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var n,a,o=[],s=[],c=[],l=[],u=new St,h=new pt;for(s.push(0,0,0),c.push(0,0,1),l.push(.5,.5),a=0,n=3;a<=t;a++,n+=3){var d=r+a/t*i;u.x=e*Math.cos(d),u.y=e*Math.sin(d),s.push(u.x,u.y,u.z),c.push(0,0,1),h.x=(s[n]/e+1)/2,h.y=(s[n+1]/e+1)/2,l.push(h.x,h.y)}for(n=1;n<=t;n++)o.push(n,n+1,0);this.setIndex(o),this.addAttribute("position",new mi(s,3)),this.addAttribute("normal",new mi(c,3)),this.addAttribute("uv",new mi(l,2))}ea.prototype=Object.create(wi.prototype),ea.prototype.constructor=ea,ta.prototype=Object.create(Ti.prototype),ta.prototype.constructor=ta,ta.prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],r=this.getAttribute("uv"),i=r?Array.prototype.slice.call(r.array):[],n=this.index,a=n?Array.prototype.slice.call(n.array):[];return{position:t,uv:i,index:a}},ta.prototype.addShapeList=function(e,t){var r=e.length;t.arrays=this.getArrays();for(var i=0;i<r;i++){var n=e[i];this.addShape(n,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new mi(t.arrays.position,3)),this.addAttribute("uv",new mi(t.arrays.uv,2))},ta.prototype.addShape=function(e,t){var r,i,n,a,o,s,c,l,u=t.arrays?t.arrays:this.getArrays(),h=u.position,d=u.index,p=u.uv,f=[],m=void 0!==t.amount?t.amount:100,v=void 0!==t.bevelThickness?t.bevelThickness:6,g=void 0!==t.bevelSize?t.bevelSize:v-2,y=void 0!==t.bevelSegments?t.bevelSegments:3,x=void 0===t.bevelEnabled||t.bevelEnabled,E=void 0!==t.curveSegments?t.curveSegments:12,b=void 0!==t.steps?t.steps:1,w=t.extrudePath,T=!1,M=void 0!==t.UVGenerator?t.UVGenerator:ea.WorldUVGenerator;w&&(r=w.getSpacedPoints(b),T=!0,x=!1,i=void 0!==t.frames?t.frames:w.computeFrenetFrames(b,!1),n=new St,a=new St,o=new St),x||(y=0,v=0,g=0);var _=this,S=e.extractPoints(E),R=S.shape,A=S.holes,z=!$n.isClockWise(R);if(z){for(R=R.reverse(),c=0,l=A.length;c<l;c++)s=A[c],$n.isClockWise(s)&&(A[c]=s.reverse());z=!1}var C=$n.triangulateShape(R,A),P=R;for(c=0,l=A.length;c<l;c++)s=A[c],R=R.concat(s);function L(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}var D,U,H,O,I,N,B=R.length,F=C.length;function G(e,t,r){var i,n,a=1,o=e.x-t.x,s=e.y-t.y,c=r.x-e.x,l=r.y-e.y,u=o*o+s*s,h=o*l-s*c;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(u),p=Math.sqrt(c*c+l*l),f=t.x-s/d,m=t.y+o/d,v=r.x-l/p,g=r.y+c/p,y=((v-f)*l-(g-m)*c)/(o*l-s*c);i=f+o*y-e.x,n=m+s*y-e.y;var x=i*i+n*n;if(x<=2)return new pt(i,n);a=Math.sqrt(x/2)}else{var E=!1;o>Number.EPSILON?c>Number.EPSILON&&(E=!0):o<-Number.EPSILON?c<-Number.EPSILON&&(E=!0):Math.sign(s)===Math.sign(l)&&(E=!0),E?(i=-s,n=o,a=Math.sqrt(u)):(i=o,n=s,a=Math.sqrt(u/2))}return new pt(i/a,n/a)}for(var V=[],j=0,k=P.length,W=k-1,X=j+1;j<k;j++,W++,X++)W===k&&(W=0),X===k&&(X=0),V[j]=G(P[j],P[W],P[X]);var q,Y,Z=[],Q=V.concat();for(c=0,l=A.length;c<l;c++){for(s=A[c],q=[],j=0,k=s.length,W=k-1,X=j+1;j<k;j++,W++,X++)W===k&&(W=0),X===k&&(X=0),q[j]=G(s[j],s[W],s[X]);Z.push(q),Q=Q.concat(q)}for(D=0;D<y;D++){for(H=D/y,O=v*Math.cos(H*Math.PI/2),U=g*Math.sin(H*Math.PI/2),j=0,k=P.length;j<k;j++)K((I=L(P[j],V[j],U)).x,I.y,-O);for(c=0,l=A.length;c<l;c++)for(s=A[c],q=Z[c],j=0,k=s.length;j<k;j++)K((I=L(s[j],q[j],U)).x,I.y,-O)}for(U=g,j=0;j<B;j++)I=x?L(R[j],Q[j],U):R[j],T?(a.copy(i.normals[0]).multiplyScalar(I.x),n.copy(i.binormals[0]).multiplyScalar(I.y),o.copy(r[0]).add(a).add(n),K(o.x,o.y,o.z)):K(I.x,I.y,0);for(Y=1;Y<=b;Y++)for(j=0;j<B;j++)I=x?L(R[j],Q[j],U):R[j],T?(a.copy(i.normals[Y]).multiplyScalar(I.x),n.copy(i.binormals[Y]).multiplyScalar(I.y),o.copy(r[Y]).add(a).add(n),K(o.x,o.y,o.z)):K(I.x,I.y,m/b*Y);for(D=y-1;D>=0;D--){for(H=D/y,O=v*Math.cos(H*Math.PI/2),U=g*Math.sin(H*Math.PI/2),j=0,k=P.length;j<k;j++)K((I=L(P[j],V[j],U)).x,I.y,m+O);for(c=0,l=A.length;c<l;c++)for(s=A[c],q=Z[c],j=0,k=s.length;j<k;j++)I=L(s[j],q[j],U),T?K(I.x,I.y+r[b-1].y,r[b-1].x+O):K(I.x,I.y,m+O)}function J(e,t){var r,i;for(j=e.length;--j>=0;){r=j,(i=j-1)<0&&(i=e.length-1);var n=0,a=b+2*y;for(n=0;n<a;n++){var o=B*n,s=B*(n+1),c=t+r+o,l=t+i+o,u=t+i+s,h=t+r+s;ee(c,l,u,h)}}}function K(e,t,r){f.push(e),f.push(t),f.push(r)}function $(e,t,r){te(e),te(t),te(r);var i=h.length/3,n=M.generateTopUV(_,h,i-3,i-2,i-1);re(n[0]),re(n[1]),re(n[2])}function ee(e,t,r,i,n,a,o,s,c){te(e),te(t),te(i),te(t),te(r),te(i);var l=h.length/3,u=M.generateSideWallUV(_,h,l-6,l-3,l-2,l-1);re(u[0]),re(u[1]),re(u[3]),re(u[1]),re(u[2]),re(u[3])}function te(e){d.push(h.length/3),h.push(f[3*e+0]),h.push(f[3*e+1]),h.push(f[3*e+2])}function re(e){p.push(e.x),p.push(e.y)}!function(){var e=h.length/3;if(x){var r=0,i=B*r;for(j=0;j<F;j++)$((N=C[j])[2]+i,N[1]+i,N[0]+i);for(i=B*(r=b+2*y),j=0;j<F;j++)$((N=C[j])[0]+i,N[1]+i,N[2]+i)}else{for(j=0;j<F;j++)$((N=C[j])[2],N[1],N[0]);for(j=0;j<F;j++)$((N=C[j])[0]+B*b,N[1]+B*b,N[2]+B*b)}_.addGroup(e,h.length/3-e,void 0!==t.material?t.material:0)}(),function(){var e=h.length/3,r=0;for(J(P,r),r+=P.length,c=0,l=A.length;c<l;c++)J(s=A[c],r),r+=s.length;_.addGroup(e,h.length/3-e,void 0!==t.extrudeMaterial?t.extrudeMaterial:1)}(),t.arrays||(this.setIndex(d),this.addAttribute("position",new mi(h,3)),this.addAttribute("uv",new mi(t.arrays.uv,2)))},ea.WorldUVGenerator={generateTopUV:function(e,t,r,i,n){var a=t[3*r],o=t[3*r+1],s=t[3*i],c=t[3*i+1],l=t[3*n],u=t[3*n+1];return[new pt(a,o),new pt(s,c),new pt(l,u)]},generateSideWallUV:function(e,t,r,i,n,a){var o=t[3*r],s=t[3*r+1],c=t[3*r+2],l=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*n],p=t[3*n+1],f=t[3*n+2],m=t[3*a],v=t[3*a+1],g=t[3*a+2];return Math.abs(s-u)<.01?[new pt(o,1-c),new pt(l,1-h),new pt(d,1-f),new pt(m,1-g)]:[new pt(s,1-c),new pt(u,1-h),new pt(p,1-f),new pt(v,1-g)]}},ra.prototype=Object.create(wi.prototype),ra.prototype.constructor=ra,ia.prototype=Object.create(ta.prototype),ia.prototype.constructor=ia,na.prototype=Object.create(wi.prototype),na.prototype.constructor=na,aa.prototype=Object.create(Ti.prototype),aa.prototype.constructor=aa,oa.prototype=Object.create(wi.prototype),oa.prototype.constructor=oa,sa.prototype=Object.create(Ti.prototype),sa.prototype.constructor=sa,ca.prototype=Object.create(wi.prototype),ca.prototype.constructor=ca,la.prototype=Object.create(Ti.prototype),la.prototype.constructor=la,ua.prototype=Object.create(wi.prototype),ua.prototype.constructor=ua,ha.prototype=Object.create(Ti.prototype),ha.prototype.constructor=ha,da.prototype=Object.create(Ti.prototype),da.prototype.constructor=da,pa.prototype=Object.create(wi.prototype),pa.prototype.constructor=pa,fa.prototype=Object.create(Ti.prototype),fa.prototype.constructor=fa,ma.prototype=Object.create(pa.prototype),ma.prototype.constructor=ma,va.prototype=Object.create(fa.prototype),va.prototype.constructor=va,ga.prototype=Object.create(wi.prototype),ga.prototype.constructor=ga,ya.prototype=Object.create(Ti.prototype),ya.prototype.constructor=ya;var xa=Object.freeze({WireframeGeometry:Un,ParametricGeometry:Hn,ParametricBufferGeometry:On,TetrahedronGeometry:Bn,TetrahedronBufferGeometry:Fn,OctahedronGeometry:Gn,OctahedronBufferGeometry:Vn,IcosahedronGeometry:jn,IcosahedronBufferGeometry:kn,DodecahedronGeometry:Wn,DodecahedronBufferGeometry:Xn,PolyhedronGeometry:In,PolyhedronBufferGeometry:Nn,TubeGeometry:qn,TubeBufferGeometry:Yn,TorusKnotGeometry:Zn,TorusKnotBufferGeometry:Qn,TorusGeometry:Jn,TorusBufferGeometry:Kn,TextGeometry:ra,TextBufferGeometry:ia,SphereGeometry:na,SphereBufferGeometry:aa,RingGeometry:oa,RingBufferGeometry:sa,PlaneGeometry:Ri,PlaneBufferGeometry:Ai,LatheGeometry:ca,LatheBufferGeometry:la,ShapeGeometry:ua,ShapeBufferGeometry:ha,ExtrudeGeometry:ea,ExtrudeBufferGeometry:ta,EdgesGeometry:da,ConeGeometry:ma,ConeBufferGeometry:va,CylinderGeometry:pa,CylinderBufferGeometry:fa,CircleGeometry:ga,CircleBufferGeometry:ya,BoxGeometry:_i,BoxBufferGeometry:Si});function Ea(e){Ir.call(this,{uniforms:yr.merge([gr.lights,{opacity:{value:1}}]),vertexShader:xr.shadow_vert,fragmentShader:xr.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}}),this.setValues(e)}function ba(e){Ir.call(this,e),this.type="RawShaderMaterial"}function wa(e){Or.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vr(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ta(e){wa.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Ma(e){Or.call(this),this.type="MeshPhongMaterial",this.color=new vr(16777215),this.specular=new vr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function _a(e){Ma.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Sa(e){Or.call(this,e),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ra(e){Or.call(this),this.type="MeshLambertMaterial",this.color=new vr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Aa(e){Or.call(this),this.type="LineDashedMaterial",this.color=new vr(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}Ea.prototype=Object.create(Ir.prototype),Ea.prototype.constructor=Ea,Ea.prototype.isShadowMaterial=!0,ba.prototype=Object.create(Ir.prototype),ba.prototype.constructor=ba,ba.prototype.isRawShaderMaterial=!0,wa.prototype=Object.create(Or.prototype),wa.prototype.constructor=wa,wa.prototype.isMeshStandardMaterial=!0,wa.prototype.copy=function(e){return Or.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ta.prototype=Object.create(wa.prototype),Ta.prototype.constructor=Ta,Ta.prototype.isMeshPhysicalMaterial=!0,Ta.prototype.copy=function(e){return wa.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Ma.prototype=Object.create(Or.prototype),Ma.prototype.constructor=Ma,Ma.prototype.isMeshPhongMaterial=!0,Ma.prototype.copy=function(e){return Or.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},_a.prototype=Object.create(Ma.prototype),_a.prototype.constructor=_a,_a.prototype.isMeshToonMaterial=!0,_a.prototype.copy=function(e){return Ma.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Sa.prototype=Object.create(Or.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isMeshNormalMaterial=!0,Sa.prototype.copy=function(e){return Or.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ra.prototype=Object.create(Or.prototype),Ra.prototype.constructor=Ra,Ra.prototype.isMeshLambertMaterial=!0,Ra.prototype.copy=function(e){return Or.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Aa.prototype=Object.create(Or.prototype),Aa.prototype.constructor=Aa,Aa.prototype.isLineDashedMaterial=!0,Aa.prototype.copy=function(e){return Or.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var za=Object.freeze({ShadowMaterial:Ea,SpriteMaterial:gn,RawShaderMaterial:ba,ShaderMaterial:Ir,PointsMaterial:Rn,MeshPhysicalMaterial:Ta,MeshStandardMaterial:wa,MeshPhongMaterial:Ma,MeshToonMaterial:_a,MeshNormalMaterial:Sa,MeshLambertMaterial:Ra,MeshDepthMaterial:Nr,MeshBasicMaterial:oi,LineDashedMaterial:Aa,LineBasicMaterial:Tn,Material:Or}),Ca={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Pa(e,t,r){var i=this,n=!1,a=0,o=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){o++,!1===n&&void 0!==i.onStart&&i.onStart(e,a,o),n=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(n=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)}}var La=new Pa;function Da(e){this.manager=void 0!==e?e:La}function Ua(e){this.manager=void 0!==e?e:La,this._parser=null}function Ha(e){this.manager=void 0!==e?e:La,this._parser=null}function Oa(e){this.manager=void 0!==e?e:La}function Ia(e){this.manager=void 0!==e?e:La}function Na(e){this.manager=void 0!==e?e:La}function Ba(e,t){ri.call(this),this.type="Light",this.color=new vr(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Fa(e,t,r){Ba.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ri.DefaultUp),this.updateMatrix(),this.groundColor=new vr(t)}function Ga(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new pt(512,512),this.map=null,this.matrix=new Rt}function Va(){Ga.call(this,new Ci(50,1,.5,500))}function ja(e,t,r,i,n,a){Ba.call(this,e,t),this.type="SpotLight",this.position.copy(ri.DefaultUp),this.updateMatrix(),this.target=new ri,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==n?n:0,this.decay=void 0!==a?a:1,this.shadow=new Va}function ka(e,t,r,i){Ba.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==i?i:1,this.shadow=new Ga(new Ci(90,1,.5,500))}function Wa(){Ga.call(this,new Pi(-5,5,5,-5,.5,500))}function Xa(e,t){Ba.call(this,e,t),this.type="DirectionalLight",this.position.copy(ri.DefaultUp),this.updateMatrix(),this.target=new ri,this.shadow=new Wa}function qa(e,t){Ba.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Ya(e,t,r,i){Ba.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==r?r:10,this.height=void 0!==i?i:10}Object.assign(Da.prototype,{load:function(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var n=this,a=Ca.get(e);if(void 0!==a)return n.manager.itemStart(e),setTimeout(function(){t&&t(a),n.manager.itemEnd(e)},0),a;var o=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],c=!!o[2],l=o[3];l=window.decodeURIComponent(l),c&&(l=window.atob(l));try{var u,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":u=new ArrayBuffer(l.length);for(var d=new Uint8Array(u),p=0;p<l.length;p++)d[p]=l.charCodeAt(p);"blob"===h&&(u=new Blob([u],{type:s}));break;case"document":var f=new DOMParser;u=f.parseFromString(l,s);break;case"json":u=JSON.parse(l);break;default:u=l}window.setTimeout(function(){t&&t(u),n.manager.itemEnd(e)},0)}catch(g){window.setTimeout(function(){i&&i(g),n.manager.itemEnd(e),n.manager.itemError(e)},0)}}else{var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",function(r){var a=r.target.response;Ca.add(e,a),200===this.status?(t&&t(a),n.manager.itemEnd(e)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(a),n.manager.itemEnd(e)):(i&&i(r),n.manager.itemEnd(e),n.manager.itemError(e))},!1),void 0!==r&&m.addEventListener("progress",function(e){r(e)},!1),m.addEventListener("error",function(t){i&&i(t),n.manager.itemEnd(e),n.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return n.manager.itemStart(e),m},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Ua.prototype,{load:function(e,t,r,i){var n=this,a=[],o=new Pn;o.image=a;var s=new Da(this.manager);function c(c){s.load(e[c],function(e){var r=n._parser(e,!0);a[c]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(l+=1)&&(1===r.mipmapCount&&(o.minFilter=Ee),o.format=r.format,o.needsUpdate=!0,t&&t(o))},r,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,u=0,h=e.length;u<h;++u)c(u);else s.load(e,function(e){var r=n._parser(e,!0);if(r.isCubemap)for(var i=r.mipmaps.length/r.mipmapCount,s=0;s<i;s++){a[s]={mipmaps:[]};for(var c=0;c<r.mipmapCount;c++)a[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+c]),a[s].format=r.format,a[s].width=r.width,a[s].height=r.height}else o.image.width=r.width,o.image.height=r.height,o.mipmaps=r.mipmaps;1===r.mipmapCount&&(o.minFilter=Ee),o.format=r.format,o.needsUpdate=!0,t&&t(o)},r,i);return o},setPath:function(e){return this.path=e,this}}),Object.assign(Ha.prototype,{load:function(e,t,r,i){var n=this,a=new At,o=new Da(this.manager);return o.setResponseType("arraybuffer"),o.load(e,function(e){var r=n._parser(e);r&&(void 0!==r.image?a.image=r.image:void 0!==r.data&&(a.image.width=r.width,a.image.height=r.height,a.image.data=r.data),a.wrapS=void 0!==r.wrapS?r.wrapS:me,a.wrapT=void 0!==r.wrapT?r.wrapT:me,a.magFilter=void 0!==r.magFilter?r.magFilter:Ee,a.minFilter=void 0!==r.minFilter?r.minFilter:we,a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(a.format=r.format),void 0!==r.type&&(a.type=r.type),void 0!==r.mipmaps&&(a.mipmaps=r.mipmaps),1===r.mipmapCount&&(a.minFilter=Ee),a.needsUpdate=!0,t&&t(a,r))},r,i),a}}),Object.assign(Oa.prototype,{load:function(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var n=this,a=Ca.get(e);if(void 0!==a)return n.manager.itemStart(e),setTimeout(function(){t&&t(a),n.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",function(){Ca.add(e,this),t&&t(this),n.manager.itemEnd(e)},!1),o.addEventListener("error",function(t){i&&i(t),n.manager.itemEnd(e),n.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),n.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ia.prototype,{load:function(e,t,r,i){var n=new zt,a=new Oa(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(r){a.load(e[r],function(e){n.images[r]=e,6==++o&&(n.needsUpdate=!0,t&&t(n))},void 0,i)}for(var c=0;c<e.length;++c)s(c);return n},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Na.prototype,{load:function(e,t,r,i){var n=new Oa(this.manager);n.setCrossOrigin(this.crossOrigin),n.setPath(this.path);var a=new bt;return a.image=n.load(e,function(){var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);a.format=r?Oe:Ie,a.needsUpdate=!0,void 0!==t&&t(a)},r,i),a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Ba.prototype=Object.assign(Object.create(ri.prototype),{constructor:Ba,isLight:!0,copy:function(e){return ri.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=ri.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Fa.prototype=Object.assign(Object.create(Ba.prototype),{constructor:Fa,isHemisphereLight:!0,copy:function(e){return Ba.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Ga.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Va.prototype=Object.assign(Object.create(Ga.prototype),{constructor:Va,isSpotLightShadow:!0,update:function(e){var t=this.camera,r=2*dt.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;r===t.fov&&i===t.aspect&&n===t.far||(t.fov=r,t.aspect=i,t.far=n,t.updateProjectionMatrix())}}),ja.prototype=Object.assign(Object.create(Ba.prototype),{constructor:ja,isSpotLight:!0,copy:function(e){return Ba.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ka.prototype=Object.assign(Object.create(Ba.prototype),{constructor:ka,isPointLight:!0,copy:function(e){return Ba.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Wa.prototype=Object.assign(Object.create(Ga.prototype),{constructor:Wa}),Xa.prototype=Object.assign(Object.create(Ba.prototype),{constructor:Xa,isDirectionalLight:!0,copy:function(e){return Ba.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),qa.prototype=Object.assign(Object.create(Ba.prototype),{constructor:qa,isAmbientLight:!0}),Ya.prototype=Object.assign(Object.create(Ba.prototype),{constructor:Ya,isRectAreaLight:!0,copy:function(e){return Ba.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Ba.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var Za,Qa={arraySlice:function(e,t,r){return Qa.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==r?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,r=new Array(t),i=0;i!==t;++i)r[i]=i;return r.sort(function(t,r){return e[t]-e[r]}),r},sortedArray:function(e,t,r){for(var i=e.length,n=new e.constructor(i),a=0,o=0;o!==i;++a)for(var s=r[a]*t,c=0;c!==t;++c)n[o++]=e[s+c];return n},flattenJSON:function(e,t,r,i){for(var n=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[n++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(t.push(a.time),r.push.apply(r,o)),a=e[n++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(t.push(a.time),o.toArray(r,r.length)),a=e[n++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(t.push(a.time),r.push(o)),a=e[n++]}while(void 0!==a)}}};function Ja(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r}function Ka(e,t,r,i){Ja.call(this,e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function $a(e,t,r,i){Ja.call(this,e,t,r,i)}function eo(e,t,r,i){Ja.call(this,e,t,r,i)}function to(e,t,r,i){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=Qa.convertArray(t,this.TimeBufferType),this.values=Qa.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function ro(e,t,r,i){to.call(this,e,t,r,i)}function io(e,t,r,i){Ja.call(this,e,t,r,i)}function no(e,t,r,i){to.call(this,e,t,r,i)}function ao(e,t,r,i){to.call(this,e,t,r,i)}function oo(e,t,r,i){to.call(this,e,t,r,i)}function so(e,t,r){to.call(this,e,t,r)}function co(e,t,r,i){to.call(this,e,t,r,i)}function lo(e,t,r,i){to.apply(this,arguments)}function uo(e,t,r){this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.uuid=dt.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function ho(e){this.manager=void 0!==e?e:La,this.textures={}}function po(e){this.manager=void 0!==e?e:La}Object.assign(Ja.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,i=t[r],n=t[r-1];e:{t:{var a;r:{i:if(!(e<i)){for(var o=r+2;;){if(void 0===i){if(e<n)break i;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,n)}if(r===o)break;if(n=i,i=t[++r],e<i)break t}a=t.length;break r}if(e>=n)break e;var s=t[1];e<s&&(r=2,n=s);for(var o=r-2;;){if(void 0===n)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===o)break;if(i=n,n=t[--r-1],e>=n)break t}a=r,r=0}for(;r<a;){var c=r+a>>>1;e<t[c]?a=c:r=c+1}if(i=t[r],void 0===(n=t[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,n,e)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=e*i,a=0;a!==i;++a)t[a]=r[n+a];return t},interpolate_:function(e,t,r,i){throw new Error("call to abstract method")},intervalChanged_:function(e,t,r){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Ja.prototype,{beforeStart_:Ja.prototype.copySampleValue_,afterEnd_:Ja.prototype.copySampleValue_}),Ka.prototype=Object.assign(Object.create(Ja.prototype),{constructor:Ka,DefaultSettings_:{endingStart:$e,endingEnd:$e},intervalChanged_:function(e,t,r){var i=this.parameterPositions,n=e-2,a=e+1,o=i[n],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:n=e,o=2*t-r;break;case 2402:n=i.length-2,o=t+i[n]-i[n+1];break;default:n=e,o=r}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=e,s=2*r-t;break;case 2402:a=1,s=r+i[1]-i[0];break;default:a=e-1,s=t}var c=.5*(r-t),l=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(s-r),this._offsetPrev=n*l,this._offsetNext=a*l},interpolate_:function(e,t,r,i){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(r-t)/(i-t),f=p*p,m=f*p,v=-h*m+2*h*f-h*p,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f,E=0;E!==o;++E)n[E]=v*a[l+E]+g*a[c+E]+y*a[s+E]+x*a[u+E];return n}}),$a.prototype=Object.assign(Object.create(Ja.prototype),{constructor:$a,interpolate_:function(e,t,r,i){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=(r-t)/(i-t),u=1-l,h=0;h!==o;++h)n[h]=a[c+h]*u+a[s+h]*l;return n}}),eo.prototype=Object.assign(Object.create(Ja.prototype),{constructor:eo,interpolate_:function(e,t,r,i){return this.copySampleValue_(e-1)}}),Za={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new eo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new $a(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ka(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}console.warn(r)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,i=t.length;r!==i;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,i=t.length;r!==i;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,i=r.length,n=0,a=i-1;n!==i&&r[n]<e;)++n;for(;-1!==a&&r[a]>t;)--a;if(++a,0!==n||a!==i){n>=a&&(a=Math.max(a,1),n=a-1);var o=this.getValueSize();this.times=Qa.arraySlice(r,n,a),this.values=Qa.arraySlice(this.values,n*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("invalid value size in track",this),e=!1);var r=this.times,i=this.values,n=r.length;0===n&&(console.error("track is empty",this),e=!1);for(var a=null,o=0;o!==n;o++){var s=r[o];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("out of order keys",this,o,s,a),e=!1;break}a=s}if(void 0!==i&&Qa.isTypedArray(i))for(var o=0,c=i.length;o!==c;++o){var l=i[o];if(isNaN(l)){console.error("value is not a valid number",this,o,l),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,r=this.getValueSize(),i=2302===this.getInterpolation(),n=1,a=e.length-1,o=1;o<a;++o){var s=!1,c=e[o],l=e[o+1];if(c!==l&&(1!==o||c!==c[0]))if(i)s=!0;else for(var u=o*r,h=u-r,d=u+r,p=0;p!==r;++p){var f=t[u+p];if(f!==t[h+p]||f!==t[d+p]){s=!0;break}}if(s){if(o!==n){e[n]=e[o];for(var m=o*r,v=n*r,p=0;p!==r;++p)t[v+p]=t[m+p]}++n}}if(a>0){e[n]=e[a];for(var m=a*r,v=n*r,p=0;p!==r;++p)t[v+p]=t[m+p];++n}return n!==e.length&&(this.times=Qa.arraySlice(e,0,n),this.values=Qa.arraySlice(t,0,n*r)),this}},ro.prototype=Object.assign(Object.create(Za),{constructor:ro,ValueTypeName:"vector"}),io.prototype=Object.assign(Object.create(Ja.prototype),{constructor:io,interpolate_:function(e,t,r,i){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=(r-t)/(i-t),l=s+o;s!==l;s+=4)_t.slerpFlat(n,0,a,s-o,a,s,c);return n}}),no.prototype=Object.assign(Object.create(Za),{constructor:no,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new io(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),ao.prototype=Object.assign(Object.create(Za),{constructor:ao,ValueTypeName:"number"}),oo.prototype=Object.assign(Object.create(Za),{constructor:oo,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),so.prototype=Object.assign(Object.create(Za),{constructor:so,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),co.prototype=Object.assign(Object.create(Za),{constructor:co,ValueTypeName:"color"}),lo.prototype=Za,Za.constructor=lo,Object.assign(lo,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=lo._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var r=[],i=[];Qa.flattenJSON(e.keys,r,i,"value"),e.times=r,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,r=e.constructor;if(void 0!==r.toJSON)t=r.toJSON(e);else{t={name:e.name,times:Qa.convertArray(e.times,Array),values:Qa.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ao;case"vector":case"vector2":case"vector3":case"vector4":return ro;case"color":return co;case"quaternion":return no;case"bool":case"boolean":return so;case"string":return oo}throw new Error("Unsupported typeName: "+e)}}),Object.assign(uo,{parse:function(e){for(var t=[],r=e.tracks,i=1/(e.fps||1),n=0,a=r.length;n!==a;++n)t.push(lo.parse(r[n]).scale(i));return new uo(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t},n=0,a=r.length;n!==a;++n)t.push(lo.toJSON(r[n]));return i},CreateFromMorphTargetSequence:function(e,t,r,i){for(var n=t.length,a=[],o=0;o<n;o++){var s=[],c=[];s.push((o+n-1)%n,o,(o+1)%n),c.push(0,1,0);var l=Qa.getKeyframeOrder(s);s=Qa.sortedArray(s,1,l),c=Qa.sortedArray(c,1,l),i||0!==s[0]||(s.push(n),c.push(c[0])),a.push(new ao(".morphTargetInfluences["+t[o].name+"]",s,c).scale(1/r))}return new uo(e,-1,a)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var i=e;r=i.geometry&&i.geometry.animations||i.animations}for(var n=0;n<r.length;n++)if(r[n].name===t)return r[n];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var i={},n=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],c=s.name.match(n);if(c&&c.length>1){var l=c[1],u=i[l];u||(i[l]=u=[]),u.push(s)}}var h=[];for(var l in i)h.push(uo.CreateFromMorphTargetSequence(l,i[l],t,r));return h},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var r=function(e,t,r,i,n){if(0!==r.length){var a=[],o=[];Qa.flattenJSON(r,a,o,i),0!==a.length&&n.push(new e(t,a,o))}},i=[],n=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var l=s[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var u={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var d=0;d<l[h].morphTargets.length;d++)u[l[h].morphTargets[d]]=-1;for(var p in u){for(var f=[],m=[],d=0;d!==l[h].morphTargets.length;++d){var v=l[h];f.push(v.time),m.push(v.morphTarget===p?1:0)}i.push(new ao(".morphTargetInfluence["+p+"]",f,m))}a=u.length*(o||1)}else{var g=".bones["+t[c].name+"]";r(ro,g+".position",l,"pos",i),r(no,g+".quaternion",l,"rot",i),r(ro,g+".scale",l,"scl",i)}}if(0===i.length)return null;var y=new uo(n,a,i);return y}}),Object.assign(uo.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,r=0,i=e.length;r!==i;++r){var n=this.tracks[r];t=Math.max(t,n.times[n.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(ho.prototype,{load:function(e,t,r,i){var n=this,a=new Da(n.manager);a.setResponseType("json"),a.load(e,function(e){t(n.parse(e))},r,i)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function r(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new za[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(i.uniforms=e.uniforms),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.shading&&(i.shading=e.shading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=r(e.map)),void 0!==e.alphaMap&&(i.alphaMap=r(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=r(e.normalMap)),void 0!==e.normalScale){var n=e.normalScale;!1===Array.isArray(n)&&(n=[n,n]),i.normalScale=(new pt).fromArray(n)}return void 0!==e.displacementMap&&(i.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=r(e.specularMap)),void 0!==e.envMap&&(i.envMap=r(e.envMap)),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=r(e.gradientMap)),i}}),Object.assign(po.prototype,{load:function(e,t,r,i){var n=this,a=new Da(n.manager);a.setResponseType("json"),a.load(e,function(e){t(n.parse(e))},r,i)},parse:function(e){var t=new Ti,r=e.data.index;if(void 0!==r){var i=new yo[r.type](r.array);t.setIndex(new si(i,1))}var n=e.data.attributes;for(var a in n){var o=n[a],i=new yo[o.type](o.array);t.addAttribute(a,new si(i,o.itemSize,o.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var c=0,l=s.length;c!==l;++c){var u=s[c];t.addGroup(u.start,u.count,u.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var d=new St;void 0!==h.center&&d.fromArray(h.center),t.boundingSphere=new Fr(d,h.radius)}return t}});var fo,mo,vo,go,yo={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function xo(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Eo(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:La,this.withCredentials=!1}function bo(e){this.manager=void 0!==e?e:La,this.texturePath=""}xo.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,r=0,i=t.length;r<i;r+=2){var n=t[r],a=t[r+1];if(n.test(e))return a}return null}},Object.assign(xo.prototype,{crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,r){for(var i=[],n=0;n<e.length;++n)i[n]=this.createMaterial(e[n],t,r);return i},createMaterial:(fo={NoBlending:T,NormalBlending:M,AdditiveBlending:_,SubtractiveBlending:S,MultiplyBlending:R,CustomBlending:A},mo=new vr,vo=new Na,go=new ho,function(e,t,r){var i={};function n(e,n,a,o,s){var c,l=t+e,u=xo.Handlers.get(l);null!==u?c=u.load(l):(vo.setCrossOrigin(r),c=vo.load(l)),void 0!==n&&(c.repeat.fromArray(n),1!==n[0]&&(c.wrapS=fe),1!==n[1]&&(c.wrapT=fe)),void 0!==a&&c.offset.fromArray(a),void 0!==o&&("repeat"===o[0]&&(c.wrapS=fe),"mirror"===o[0]&&(c.wrapS=ve),"repeat"===o[1]&&(c.wrapT=fe),"mirror"===o[1]&&(c.wrapT=ve)),void 0!==s&&(c.anisotropy=s);var h=dt.generateUUID();return i[h]=c,h}var a={uuid:dt.generateUUID(),type:"MeshLambertMaterial"};for(var o in e){var s=e[o];switch(o){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":a.name=s;break;case"blending":a.blending=fo[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",o,"is no longer supported.");break;case"colorDiffuse":a.color=mo.fromArray(s).getHex();break;case"colorSpecular":a.specular=mo.fromArray(s).getHex();break;case"colorEmissive":a.emissive=mo.fromArray(s).getHex();break;case"specularCoef":a.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(a.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(a.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(a.type="MeshStandardMaterial");break;case"mapDiffuse":a.map=n(s,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":a.emissiveMap=n(s,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":a.lightMap=n(s,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":a.aoMap=n(s,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":a.bumpMap=n(s,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":a.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":a.normalMap=n(s,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":a.normalScale=[s,s];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":a.specularMap=n(s,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":a.metalnessMap=n(s,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":a.roughnessMap=n(s,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":a.alphaMap=n(s,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":a.side=v;break;case"doubleSided":a.side=g;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),a.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":a[o]=s;break;case"vertexColors":!0===s&&(a.vertexColors=w),"face"===s&&(a.vertexColors=b);break;default:console.error("THREE.Loader.createMaterial: Unsupported",o,s)}}return"MeshBasicMaterial"===a.type&&delete a.emissive,"MeshPhongMaterial"!==a.type&&delete a.specular,a.opacity<1&&(a.transparent=!0),go.setTextures(i),go.parse(a)})}),Object.assign(Eo.prototype,{load:function(e,t,r,i){var n=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:xo.prototype.extractUrlBase(e),o=new Da(this.manager);o.setResponseType("json"),o.setWithCredentials(this.withCredentials),o.load(e,function(r){var i=r.metadata;if(void 0!==i){var o=i.type;if(void 0!==o){if("object"===o.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===o.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var s=n.parse(r,a);t(s.geometry,s.materials)},r,i)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var r=new wi;if(function(e,t){function r(e,t){return e&1<<t}var i,n,a,o,s,c,l,u,h,d,p,f,m,v,g,y,x,E,b,w,T,M,_,S,R,A,z,C=e.faces,P=e.vertices,L=e.normals,D=e.colors,U=e.scale,H=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&H++;for(i=0;i<H;i++)t.faceVertexUvs[i]=[]}for(o=0,s=P.length;o<s;)(E=new St).x=P[o++]*U,E.y=P[o++]*U,E.z=P[o++]*U,t.vertices.push(E);for(o=0,s=C.length;o<s;)if(d=C[o++],p=r(d,0),f=r(d,1),m=r(d,3),v=r(d,4),g=r(d,5),y=r(d,6),x=r(d,7),p){if((w=new ai).a=C[o],w.b=C[o+1],w.c=C[o+3],(T=new ai).a=C[o+1],T.b=C[o+2],T.c=C[o+3],o+=4,f&&(h=C[o++],w.materialIndex=h,T.materialIndex=h),a=t.faces.length,m)for(i=0;i<H;i++)for(S=e.uvs[i],t.faceVertexUvs[i][a]=[],t.faceVertexUvs[i][a+1]=[],n=0;n<4;n++)u=C[o++],A=S[2*u],z=S[2*u+1],R=new pt(A,z),2!==n&&t.faceVertexUvs[i][a].push(R),0!==n&&t.faceVertexUvs[i][a+1].push(R);if(v&&(l=3*C[o++],w.normal.set(L[l++],L[l++],L[l]),T.normal.copy(w.normal)),g)for(i=0;i<4;i++)l=3*C[o++],_=new St(L[l++],L[l++],L[l]),2!==i&&w.vertexNormals.push(_),0!==i&&T.vertexNormals.push(_);if(y&&(c=C[o++],M=D[c],w.color.setHex(M),T.color.setHex(M)),x)for(i=0;i<4;i++)c=C[o++],M=D[c],2!==i&&w.vertexColors.push(new vr(M)),0!==i&&T.vertexColors.push(new vr(M));t.faces.push(w),t.faces.push(T)}else{if((b=new ai).a=C[o++],b.b=C[o++],b.c=C[o++],f&&(h=C[o++],b.materialIndex=h),a=t.faces.length,m)for(i=0;i<H;i++)for(S=e.uvs[i],t.faceVertexUvs[i][a]=[],n=0;n<3;n++)u=C[o++],A=S[2*u],z=S[2*u+1],R=new pt(A,z),t.faceVertexUvs[i][a].push(R);if(v&&(l=3*C[o++],b.normal.set(L[l++],L[l++],L[l])),g)for(i=0;i<3;i++)l=3*C[o++],_=new St(L[l++],L[l++],L[l]),b.vertexNormals.push(_);if(y&&(c=C[o++],b.color.setHex(D[c])),x)for(i=0;i<3;i++)c=C[o++],b.vertexColors.push(new vr(D[c]));t.faces.push(b)}}(e,r),function(e,t){var r=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,n=e.skinWeights.length;i<n;i+=r){var a=e.skinWeights[i],o=r>1?e.skinWeights[i+1]:0,s=r>2?e.skinWeights[i+2]:0,c=r>3?e.skinWeights[i+3]:0;t.skinWeights.push(new wt(a,o,s,c))}if(e.skinIndices)for(var i=0,n=e.skinIndices.length;i<n;i+=r){var l=e.skinIndices[i],u=r>1?e.skinIndices[i+1]:0,h=r>2?e.skinIndices[i+2]:0,d=r>3?e.skinIndices[i+3]:0;t.skinIndices.push(new wt(l,u,h,d))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,r),function(e,t){var r=e.scale;if(void 0!==e.morphTargets)for(var i=0,n=e.morphTargets.length;i<n;i++){t.morphTargets[i]={},t.morphTargets[i].name=e.morphTargets[i].name,t.morphTargets[i].vertices=[];for(var a=t.morphTargets[i].vertices,o=e.morphTargets[i].vertices,s=0,c=o.length;s<c;s+=3){var l=new St;l.x=o[s]*r,l.y=o[s+1]*r,l.z=o[s+2]*r,a.push(l)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var u=t.faces,h=e.morphColors[0].colors,i=0,n=u.length;i<n;i++)u[i].color.fromArray(h,3*i)}}(e,r),function(e,t){var r=[],i=[];void 0!==e.animation&&i.push(e.animation),void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var n=0;n<i.length;n++){var a=uo.parseAnimation(i[n],t.bones);a&&r.push(a)}if(t.morphTargets){var o=uo.CreateClipsFromMorphTargetSequences(t.morphTargets,10);r=r.concat(o)}r.length>0&&(t.animations=r)}(e,r),r.computeFaceNormals(),r.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:r};var i=xo.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:r,materials:i}}}),Object.assign(bo.prototype,{load:function(e,t,r,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var n=this,a=new Da(n.manager);a.load(e,function(r){var a=null;try{a=JSON.parse(r)}catch(s){return void 0!==i&&i(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?n.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},r,i)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var r=this.parseGeometries(e.geometries),i=this.parseImages(e.images,function(){void 0!==t&&t(o)}),n=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,n),o=this.parseObject(e.object,r,a);return e.animations&&(o.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(o),o},parseGeometries:function(e){var t={};if(void 0!==e)for(var r=new Eo,i=new po,n=0,a=e.length;n<a;n++){var o,s=e[n];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new xa[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new xa[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new xa[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new xa[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new xa[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new xa[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":o=new xa[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new xa[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new xa[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new xa[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new xa[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":o=i.parse(s);break;case"Geometry":o=r.parse(s,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),t[s.uuid]=o}return t},parseMaterials:function(e,t){var r={};if(void 0!==e){var i=new ho;i.setTextures(t);for(var n=0,a=e.length;n<a;n++){var o=e[n];if("MultiMaterial"===o.type){for(var s=[],c=0;c<o.materials.length;c++)s.push(i.parse(o.materials[c]));r[o.uuid]=s}else r[o.uuid]=i.parse(o)}}return r},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var i=uo.parse(e[r]);t.push(i)}return t},parseImages:function(e,t){var r=this,i={};function n(e){return r.manager.itemStart(e),o.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemEnd(e),r.manager.itemError(e)})}if(void 0!==e&&e.length>0){var a=new Pa(t),o=new Oa(a);o.setCrossOrigin(this.crossOrigin);for(var s=0,c=e.length;s<c;s++){var l=e[s],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:r.texturePath+l.url;i[l.uuid]=n(u)}}return i},parseTextures:function(e,t){function r(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var n=0,a=e.length;n<a;n++){var o=e[n];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=new bt(t[o.image]);s.needsUpdate=!0,s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=r(o.mapping,wo)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.wrap&&(s.wrapS=r(o.wrap[0],To),s.wrapT=r(o.wrap[1],To)),void 0!==o.minFilter&&(s.minFilter=r(o.minFilter,Mo)),void 0!==o.magFilter&&(s.magFilter=r(o.magFilter,Mo)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),i[o.uuid]=s}return i},parseObject:function(){var e=new Rt;return function(t,r,i){var n;function a(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),r[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,n=e.length;r<n;r++){var a=e[r];void 0===i[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(i[a])}return t}return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}}switch(t.type){case"Scene":n=new mn,void 0!==t.background&&Number.isInteger(t.background)&&(n.background=new vr(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?n.fog=new fn(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(n.fog=new pn(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":n=new Ci(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(n.focus=t.focus),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.filmGauge&&(n.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(n.filmOffset=t.filmOffset),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"OrthographicCamera":n=new Pi(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":n=new qa(t.color,t.intensity);break;case"DirectionalLight":n=new Xa(t.color,t.intensity);break;case"PointLight":n=new ka(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":n=new Ya(t.color,t.intensity,t.width,t.height);break;case"SpotLight":n=new ja(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":n=new Fa(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var s=a(t.geometry),c=o(t.material);n=s.bones&&s.bones.length>0?new wn(s,c):new Mi(s,c);break;case"LOD":n=new xn;break;case"Line":n=new Mn(a(t.geometry),o(t.material),t.mode);break;case"LineLoop":n=new Sn(a(t.geometry),o(t.material));break;case"LineSegments":n=new _n(a(t.geometry),o(t.material));break;case"PointCloud":case"Points":n=new An(a(t.geometry),o(t.material));break;case"Sprite":n=new yn(o(t.material));break;case"Group":n=new zn;break;default:n=new ri}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.quaternion&&n.quaternion.fromArray(t.quaternion),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.castShadow&&(n.castShadow=t.castShadow),void 0!==t.receiveShadow&&(n.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(n.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(n.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&n.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(n.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.children)for(var l in t.children)n.add(this.parseObject(t.children[l],r,i));if("LOD"===t.type)for(var u=t.levels,h=0;h<u.length;h++){var d=u[h],l=n.getObjectByProperty("uuid",d.object);void 0!==l&&n.addLevel(l,d.distance)}return n}}()});var wo={UVMapping:300,CubeReflectionMapping:se,CubeRefractionMapping:ce,EquirectangularReflectionMapping:le,EquirectangularRefractionMapping:ue,SphericalReflectionMapping:he,CubeUVReflectionMapping:de,CubeUVRefractionMapping:pe},To={RepeatWrapping:fe,ClampToEdgeWrapping:me,MirroredRepeatWrapping:ve},Mo={NearestFilter:ge,NearestMipMapNearestFilter:ye,NearestMipMapLinearFilter:xe,LinearFilter:Ee,LinearMipMapNearestFilter:be,LinearMipMapLinearFilter:we};function _o(e,t,r,i,n){var a=.5*(i-t),o=.5*(n-r),s=e*e,c=e*s;return(2*r-2*i+a+o)*c+(-3*r+3*i-2*a-o)*s+a*e+r}function So(e,t,r,i){return function(e,t){var r=1-e;return r*r*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,r)+function(e,t){return e*e*t}(e,i)}function Ro(e,t,r,i,n){return function(e,t){var r=1-e;return r*r*r*t}(e,t)+function(e,t){var r=1-e;return 3*r*r*e*t}(e,r)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,n)}function Ao(){this.arcLengthDivisions=200}function zo(e,t){Ao.call(this),this.v1=e,this.v2=t}function Co(){Ao.call(this),this.curves=[],this.autoClose=!1}function Po(e,t,r,i,n,a,o,s){Ao.call(this),this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s||0}function Lo(e){Ao.call(this),this.points=void 0===e?[]:e}function Do(e,t,r,i){Ao.call(this),this.v0=e,this.v1=t,this.v2=r,this.v3=i}function Uo(e,t,r){Ao.call(this),this.v0=e,this.v1=t,this.v2=r}Object.assign(Ao.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,i=[],n=this.getPoint(0),a=0;for(i.push(0),r=1;r<=e;r++)t=this.getPoint(r/e),a+=t.distanceTo(n),i.push(a),n=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,i=this.getLengths(),n=0,a=i.length;r=t||e*i[a-1];for(var o,s=0,c=a-1;s<=c;)if(n=Math.floor(s+(c-s)/2),(o=i[n]-r)<0)s=n+1;else{if(!(o>0)){c=n;break}c=n-1}if(i[n=c]===r)return n/(a-1);var l=i[n],u=i[n+1],h=u-l,d=(r-l)/h,p=(n+d)/(a-1);return p},getTangent:function(e){var t=e-1e-4,r=e+1e-4;t<0&&(t=0),r>1&&(r=1);var i=this.getPoint(t),n=this.getPoint(r),a=n.clone().sub(i);return a.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r,i,n,a=new St,o=[],s=[],c=[],l=new St,u=new Rt;for(r=0;r<=e;r++)i=r/e,o[r]=this.getTangentAt(i),o[r].normalize();s[0]=new St,c[0]=new St;var h=Number.MAX_VALUE,d=Math.abs(o[0].x),p=Math.abs(o[0].y),f=Math.abs(o[0].z);for(d<=h&&(h=d,a.set(1,0,0)),p<=h&&(h=p,a.set(0,1,0)),f<=h&&a.set(0,0,1),l.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],l),c[0].crossVectors(o[0],s[0]),r=1;r<=e;r++)s[r]=s[r-1].clone(),c[r]=c[r-1].clone(),l.crossVectors(o[r-1],o[r]),l.length()>Number.EPSILON&&(l.normalize(),n=Math.acos(dt.clamp(o[r-1].dot(o[r]),-1,1)),s[r].applyMatrix4(u.makeRotationAxis(l,n))),c[r].crossVectors(o[r],s[r]);if(!0===t)for(n=Math.acos(dt.clamp(s[0].dot(s[e]),-1,1)),n/=e,o[0].dot(l.crossVectors(s[0],s[e]))>0&&(n=-n),r=1;r<=e;r++)s[r].applyMatrix4(u.makeRotationAxis(o[r],n*r)),c[r].crossVectors(o[r],s[r]);return{tangents:o,normals:s,binormals:c}}}),zo.prototype=Object.create(Ao.prototype),zo.prototype.constructor=zo,zo.prototype.isLineCurve=!0,zo.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},zo.prototype.getPointAt=function(e){return this.getPoint(e)},zo.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1);return t.normalize()},Co.prototype=Object.assign(Object.create(Ao.prototype),{constructor:Co,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new zo(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=t){var n=r[i]-t,a=this.curves[i],o=a.getLength(),s=0===o?0:1-n/o;return a.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,r=[],i=0,n=this.curves;i<n.length;i++)for(var a=n[i],o=a&&a.isEllipseCurve?2*e:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),c=0;c<s.length;c++){var l=s[c];t&&t.equals(l)||(r.push(l),t=l)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new wi,r=0,i=e.length;r<i;r++){var n=e[r];t.vertices.push(new St(n.x,n.y,n.z||0))}return t}}),Po.prototype=Object.create(Ao.prototype),Po.prototype.constructor=Po,Po.prototype.isEllipseCurve=!0,Po.prototype.getPoint=function(e){for(var t=2*Math.PI,r=this.aEndAngle-this.aStartAngle,i=Math.abs(r)<Number.EPSILON;r<0;)r+=t;for(;r>t;)r-=t;r<Number.EPSILON&&(r=i?0:t),!0!==this.aClockwise||i||(r===t?r=-t:r-=t);var n=this.aStartAngle+e*r,a=this.aX+this.xRadius*Math.cos(n),o=this.aY+this.yRadius*Math.sin(n);if(0!==this.aRotation){var s=Math.cos(this.aRotation),c=Math.sin(this.aRotation),l=a-this.aX,u=o-this.aY;a=l*s-u*c+this.aX,o=l*c+u*s+this.aY}return new pt(a,o)},Lo.prototype=Object.create(Ao.prototype),Lo.prototype.constructor=Lo,Lo.prototype.isSplineCurve=!0,Lo.prototype.getPoint=function(e){var t=this.points,r=(t.length-1)*e,i=Math.floor(r),n=r-i,a=t[0===i?i:i-1],o=t[i],s=t[i>t.length-2?t.length-1:i+1],c=t[i>t.length-3?t.length-1:i+2];return new pt(_o(n,a.x,o.x,s.x,c.x),_o(n,a.y,o.y,s.y,c.y))},Do.prototype=Object.create(Ao.prototype),Do.prototype.constructor=Do,Do.prototype.getPoint=function(e){var t=this.v0,r=this.v1,i=this.v2,n=this.v3;return new pt(Ro(e,t.x,r.x,i.x,n.x),Ro(e,t.y,r.y,i.y,n.y))},Uo.prototype=Object.create(Ao.prototype),Uo.prototype.constructor=Uo,Uo.prototype.getPoint=function(e){var t=this.v0,r=this.v1,i=this.v2;return new pt(So(e,t.x,r.x,i.x),So(e,t.y,r.y,i.y))};var Ho,Oo=Object.assign(Object.create(Co.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var r=new zo(this.currentPoint.clone(),new pt(e,t));this.curves.push(r),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,r,i){var n=new Uo(this.currentPoint.clone(),new pt(e,t),new pt(r,i));this.curves.push(n),this.currentPoint.set(r,i)},bezierCurveTo:function(e,t,r,i,n,a){var o=new Do(this.currentPoint.clone(),new pt(e,t),new pt(r,i),new pt(n,a));this.curves.push(o),this.currentPoint.set(n,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),r=new Lo(t);this.curves.push(r),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,r,i,n,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,r,i,n,a)},absarc:function(e,t,r,i,n,a){this.absellipse(e,t,r,r,i,n,a)},ellipse:function(e,t,r,i,n,a,o,s){var c=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(e+c,t+l,r,i,n,a,o,s)},absellipse:function(e,t,r,i,n,a,o,s){var c=new Po(e,t,r,i,n,a,o,s);if(this.curves.length>0){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var u=c.getPoint(1);this.currentPoint.copy(u)}});function Io(e){Co.call(this),this.currentPoint=new pt,e&&this.fromPoints(e)}function No(){Io.apply(this,arguments),this.holes=[]}function Bo(){this.subPaths=[],this.currentPath=null}function Fo(e){this.data=e}function Go(e){this.manager=void 0!==e?e:La}Io.prototype=Oo,Oo.constructor=Io,No.prototype=Object.assign(Object.create(Oo),{constructor:No,getPointsHoles:function(e){for(var t=[],r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),Object.assign(Bo.prototype,{moveTo:function(e,t){this.currentPath=new Io,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,i){this.currentPath.quadraticCurveTo(e,t,r,i)},bezierCurveTo:function(e,t,r,i,n,a){this.currentPath.bezierCurveTo(e,t,r,i,n,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function r(e){for(var t=[],r=0,i=e.length;r<i;r++){var n=e[r],a=new No;a.curves=n.curves,t.push(a)}return t}function i(e,t){for(var r=t.length,i=!1,n=r-1,a=0;a<r;n=a++){var o=t[n],s=t[a],c=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=t[a],c=-c,s=t[n],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var u=l*(e.x-o.x)-c*(e.y-o.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return i}var n=$n.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return r(a);var o,s,c,l=[];if(1===a.length)return s=a[0],(c=new No).curves=s.curves,l.push(c),l;var u=!n(a[0].getPoints());u=e?!u:u;var h,d,p=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=a.length;g<y;g++)s=a[g],h=s.getPoints(),o=n(h),(o=e?!o:o)?(!u&&f[v]&&v++,f[v]={s:new No,p:h},f[v].s.curves=s.curves,u&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!f[0])return r(a);if(f.length>1){for(var x=!1,E=[],b=0,w=f.length;b<w;b++)p[b]=[];for(var b=0,w=f.length;b<w;b++)for(var T=m[b],M=0;M<T.length;M++){for(var _=T[M],S=!0,R=0;R<f.length;R++)i(_.p,f[R].p)&&(b!==R&&E.push({froms:b,tos:R,hole:M}),S?(S=!1,p[R].push(_)):x=!0);S&&p[b].push(_)}E.length>0&&(x||(m=p))}for(var g=0,A=f.length;g<A;g++){c=f[g].s,l.push(c),d=m[g];for(var z=0,C=d.length;z<C;z++)c.holes.push(d[z].h)}return l}}),Object.assign(Fo.prototype,{isFont:!0,generateShapes:function(e,t,r){function i(e,t,i,a){var o=n.glyphs[e]||n.glyphs["?"];if(o){var s,c,l,u,h,d,p,f,m,v,g,y=new Bo,x=[];if(o.o)for(var E=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),b=0,w=E.length;b<w;){var T=E[b++];switch(T){case"m":s=E[b++]*t+i,c=E[b++]*t+a,y.moveTo(s,c);break;case"l":s=E[b++]*t+i,c=E[b++]*t+a,y.lineTo(s,c);break;case"q":if(l=E[b++]*t+i,u=E[b++]*t+a,p=E[b++]*t+i,f=E[b++]*t+a,y.quadraticCurveTo(p,f,l,u),g=x[x.length-1]){h=g.x,d=g.y;for(var M=1;M<=r;M++){var _=M/r;So(_,h,p,l),So(_,d,f,u)}}break;case"b":if(l=E[b++]*t+i,u=E[b++]*t+a,p=E[b++]*t+i,f=E[b++]*t+a,m=E[b++]*t+i,v=E[b++]*t+a,y.bezierCurveTo(p,f,m,v,l,u),g=x[x.length-1]){h=g.x,d=g.y;for(var M=1;M<=r;M++){var _=M/r;Ro(_,h,p,m,l),Ro(_,d,f,v,u)}}}}return{offsetX:o.ha*t,path:y}}}void 0===t&&(t=100),void 0===r&&(r=4);for(var n=this.data,a=function(e){for(var r=String(e).split(""),a=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*a,s=0,c=0,l=[],u=0;u<r.length;u++){var h=r[u];if("\n"===h)s=0,c-=o;else{var d=i(h,a,s,c);s+=d.offsetX,l.push(d.path)}}return l}(e),o=[],s=0,c=a.length;s<c;s++)Array.prototype.push.apply(o,a[s].toShapes());return o}}),Object.assign(Go.prototype,{load:function(e,t,r,i){var n=this,a=new Da(this.manager);a.load(e,function(e){var r;try{r=JSON.parse(e)}catch(a){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}var i=n.parse(r);t&&t(i)},r,i)},parse:function(e){return new Fo(e)}});var Vo,jo,ko,Wo,Xo,qo,Yo,Zo,Qo,Jo,Ko,$o,es,ts,rs,is,ns,as,os={getContext:function(){return void 0===Ho&&(Ho=new(window.AudioContext||window.webkitAudioContext)),Ho},setContext:function(e){Ho=e}};function ss(e){this.manager=void 0!==e?e:La}function cs(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ci,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ci,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function ls(e,t,r){ri.call(this),this.type="CubeCamera";var i=new Ci(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new St(1,0,0)),this.add(i);var n=new Ci(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new St(-1,0,0)),this.add(n);var a=new Ci(90,1,e,t);a.up.set(0,0,1),a.lookAt(new St(0,1,0)),this.add(a);var o=new Ci(90,1,e,t);o.up.set(0,0,-1),o.lookAt(new St(0,-1,0)),this.add(o);var s=new Ci(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new St(0,0,1)),this.add(s);var c=new Ci(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new St(0,0,-1)),this.add(c);var l={format:Oe,magFilter:Ee,minFilter:Ee};this.renderTarget=new Mt(r,r,l),this.renderTarget.texture.name="CubeCamera",this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,l=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,r.activeCubeFace=0,e.render(t,i,r),r.activeCubeFace=1,e.render(t,n,r),r.activeCubeFace=2,e.render(t,a,r),r.activeCubeFace=3,e.render(t,o,r),r.activeCubeFace=4,e.render(t,s,r),r.texture.generateMipmaps=l,r.activeCubeFace=5,e.render(t,c,r),e.setRenderTarget(null)}}function us(e){Ci.call(this),this.enabled=!1,this.cameras=e||[]}function hs(){ri.call(this),this.type="AudioListener",this.context=os.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function ds(e){ri.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function ps(e){ds.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function fs(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function ms(e,t,r){this.binding=e,this.valueSize=r;var i,n=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":n=Array,i=this._select;break;default:i=this._lerp}this.buffer=new n(4*r),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function vs(e,t,r){var i=r||gs.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function gs(e,t,r){this.path=t,this.parsedPath=r||gs.parseTrackName(t),this.node=gs.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function ys(e){this.uuid=dt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var r=0,i=arguments.length;r!==i;++r)t[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function xs(e,t,r){this._mixer=e,this._clip=t,this._localRoot=r||null;for(var i=t.tracks,n=i.length,a=new Array(n),o={endingStart:$e,endingEnd:$e},s=0;s!==n;++s){var c=i[s].createInterpolant(null);a[s]=c,c.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ke,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Es(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function bs(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function ws(){Ti.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ts(e,t,r,i){this.uuid=dt.generateUUID(),this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===i}function Ms(e,t){this.uuid=dt.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function _s(e,t,r){Ms.call(this,e,t),this.meshPerAttribute=r||1}function Ss(e,t,r){si.call(this,e,t),this.meshPerAttribute=r||1}function Rs(e,t,r,i){this.ray=new Wr(e,t),this.near=r||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function As(e,t){return e.distance-t.distance}function zs(e,t,r,i){if(!1!==e.visible&&(e.raycast(t,r),!0===i))for(var n=e.children,a=0,o=n.length;a<o;a++)zs(n[a],t,r,!0)}function Cs(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Ps(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}function Ls(e,t,r){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==r?r:0,this}function Ds(e,t){Mi.call(this,e,t),this.animationsMap={},this.animationsList=[];var r=this.geometry.morphTargets.length,i=r-1,n=r/1;this.createAnimation("__default",0,i,n),this.setAnimationWeight("__default",1)}function Us(e){ri.call(this),this.material=e,this.render=function(e){}}function Hs(e,t,r,i){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==r?r:16711680,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var c=new Ti,l=new mi(2*o*3,3);c.addAttribute("position",l),_n.call(this,c,new Tn({color:n,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Os(e){ri.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new Ti,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,n=1;i<32;i++,n++){var a=i/32*Math.PI*2,o=n/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(o),Math.sin(o),1)}t.addAttribute("position",new mi(r,3));var s=new Tn({fog:!1});this.cone=new _n(t,s),this.add(this.cone),this.update()}function Is(e){this.bones=this.getBoneList(e);for(var t=new Ti,r=[],i=[],n=new vr(0,0,1),a=new vr(0,1,0),o=0;o<this.bones.length;o++){var s=this.bones[o];s.parent&&s.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(n.r,n.g,n.b),i.push(a.r,a.g,a.b))}t.addAttribute("position",new mi(r,3)),t.addAttribute("color",new mi(i,3));var c=new Tn({vertexColors:w,depthTest:!1,depthWrite:!1,transparent:!0});_n.call(this,t,c),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Ns(e,t){this.light=e,this.light.updateMatrixWorld();var r=new aa(t,4,2),i=new oi({wireframe:!0,fog:!1});i.color.copy(this.light.color),Mi.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function Bs(e){ri.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new Tn({color:e.color}),r=new Ti;r.addAttribute("position",new si(new Float32Array(15),3)),this.add(new Mn(r,t)),this.update()}function Fs(e,t){ri.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var r=new Vn(t);r.rotateY(.5*Math.PI);var i=new oi({vertexColors:w,wireframe:!0}),n=r.getAttribute("position"),a=new Float32Array(3*n.count);r.addAttribute("color",new si(a,3)),this.add(new Mi(r,i)),this.update()}function Gs(e,t,r,i){e=e||10,t=t||10,r=new vr(void 0!==r?r:4473924),i=new vr(void 0!==i?i:8947848);for(var n=t/2,a=e/t,o=e/2,s=[],c=[],l=0,u=0,h=-o;l<=t;l++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var d=l===n?r:i;d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3}var p=new Ti;p.addAttribute("position",new mi(s,3)),p.addAttribute("color",new mi(c,3));var f=new Tn({vertexColors:w});_n.call(this,p,f)}function Vs(e,t,r,i,n,a){e=e||10,t=t||16,r=r||8,i=i||64,n=new vr(void 0!==n?n:4473924),a=new vr(void 0!==a?a:8947848);var o,s,c,l,u,h,d,p=[],f=[];for(l=0;l<=t;l++)c=l/t*(2*Math.PI),o=Math.sin(c)*e,s=Math.cos(c)*e,p.push(0,0,0),p.push(o,0,s),d=1&l?n:a,f.push(d.r,d.g,d.b),f.push(d.r,d.g,d.b);for(l=0;l<=r;l++)for(d=1&l?n:a,h=e-e/r*l,u=0;u<i;u++)c=u/i*(2*Math.PI),o=Math.sin(c)*h,s=Math.cos(c)*h,p.push(o,0,s),f.push(d.r,d.g,d.b),c=(u+1)/i*(2*Math.PI),o=Math.sin(c)*h,s=Math.cos(c)*h,p.push(o,0,s),f.push(d.r,d.g,d.b);var m=new Ti;m.addAttribute("position",new mi(p,3)),m.addAttribute("color",new mi(f,3));var v=new Tn({vertexColors:w});_n.call(this,m,v)}function js(e,t,r,i){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==r?r:16776960,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new Ti,l=new mi(2*o*3,3);c.addAttribute("position",l),_n.call(this,c,new Tn({color:n,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function ks(e,t){ri.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var r=new Ti;r.addAttribute("position",new mi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Tn({fog:!1});this.add(new Mn(r,i)),(r=new Ti).addAttribute("position",new mi([0,0,0,0,0,1],3)),this.add(new Mn(r,i)),this.update()}function Ws(e){var t=new Ti,r=new Tn({color:16777215,vertexColors:b}),i=[],n=[],a={},o=new vr(16755200),s=new vr(16711680),c=new vr(43775),l=new vr(16777215),u=new vr(3355443);function h(e,t,r){d(e,r),d(t,r)}function d(e,t){i.push(0,0,0),n.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(i.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",l),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.addAttribute("position",new mi(i,3)),t.addAttribute("color",new mi(n,3)),_n.call(this,t,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Xs(e,t){this.object=e,void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),n=new Ti;n.setIndex(new si(r,1)),n.addAttribute("position",new si(i,3)),_n.call(this,n,new Tn({color:t})),this.matrixAutoUpdate=!1,this.update()}function qs(e,t,r,i,n,a){ri.call(this),void 0===i&&(i=16776960),void 0===r&&(r=1),void 0===n&&(n=.2*r),void 0===a&&(a=.2*n),void 0===Vo&&((Vo=new Ti).addAttribute("position",new mi([0,0,0,0,1,0],3)),(jo=new fa(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Mn(Vo,new Tn({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mi(jo,new oi({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,n,a)}function Ys(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new Ti;r.addAttribute("position",new mi(t,3)),r.addAttribute("color",new mi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new Tn({vertexColors:w});_n.call(this,r,i)}function Zs(){var e=0,t=0,r=0,i=0;function n(n,a,o,s){e=n,t=o,r=-3*n+3*a-2*o-s,i=2*n-2*a+o+s}return{initCatmullRom:function(e,t,r,i,a){n(t,r,a*(r-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,r,i,a,o,s){var c=(t-e)/a-(r-e)/(a+o)+(r-t)/o,l=(r-t)/o-(i-t)/(o+s)+(i-r)/s;n(t,r,c*=o,l*=o)},calc:function(n){var a=n*n,o=a*n;return e+t*n+r*a+i*o}}}Object.assign(ss.prototype,{load:function(e,t,r,i){var n=new Da(this.manager);n.setResponseType("arraybuffer"),n.load(e,function(e){var r=os.getContext();r.decodeAudioData(e,function(e){t(e)})},r,i)}}),Object.assign(cs.prototype,{update:(ns=new Rt,as=new Rt,function(e){var t=Qo!==this||Jo!==e.focus||Ko!==e.fov||$o!==e.aspect*this.aspect||es!==e.near||ts!==e.far||rs!==e.zoom||is!==this.eyeSep;if(t){Qo=this,Jo=e.focus,Ko=e.fov,$o=e.aspect*this.aspect,es=e.near,ts=e.far,rs=e.zoom;var r,i,n=e.projectionMatrix.clone(),a=(is=this.eyeSep/2)*es/Jo,o=es*Math.tan(dt.DEG2RAD*Ko*.5)/rs;as.elements[12]=-is,ns.elements[12]=is,r=-o*$o+a,i=o*$o+a,n.elements[0]=2*es/(i-r),n.elements[8]=(i+r)/(i-r),this.cameraL.projectionMatrix.copy(n),r=-o*$o-a,i=o*$o-a,n.elements[0]=2*es/(i-r),n.elements[8]=(i+r)/(i-r),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(as),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ns)})}),ls.prototype=Object.create(ri.prototype),ls.prototype.constructor=ls,us.prototype=Object.assign(Object.create(Ci.prototype),{constructor:us,isArrayCamera:!0}),hs.prototype=Object.assign(Object.create(ri.prototype),{constructor:hs,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new St,t=new _t,r=new St,i=new St;return function(n){ri.prototype.updateMatrixWorld.call(this,n);var a=this.context.listener,o=this.up;this.matrixWorld.decompose(e,t,r),i.set(0,0,-1).applyQuaternion(t),a.positionX?(a.positionX.setValueAtTime(e.x,this.context.currentTime),a.positionY.setValueAtTime(e.y,this.context.currentTime),a.positionZ.setValueAtTime(e.z,this.context.currentTime),a.forwardX.setValueAtTime(i.x,this.context.currentTime),a.forwardY.setValueAtTime(i.y,this.context.currentTime),a.forwardZ.setValueAtTime(i.z,this.context.currentTime),a.upX.setValueAtTime(o.x,this.context.currentTime),a.upY.setValueAtTime(o.y,this.context.currentTime),a.upZ.setValueAtTime(o.z,this.context.currentTime)):(a.setPosition(e.x,e.y,e.z),a.setOrientation(i.x,i.y,i.z,o.x,o.y,o.z))}}()}),ds.prototype=Object.assign(Object.create(ri.prototype),{constructor:ds,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),ps.prototype=Object.assign(Object.create(ds.prototype),{constructor:ps,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new St;return function(t){ri.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(fs.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),Object.assign(ms.prototype,{accumulate:function(e,t){var r=this.buffer,i=this.valueSize,n=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)r[n+o]=r[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(r,n,0,s,i)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,r=this.buffer,i=e*t+t,n=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,n<1){var o=3*t;this._mixBufferRegion(r,i,o,1-n,t)}for(var s=t,c=t+t;s!==c;++s)if(r[s]!==r[s+t]){a.setValue(r,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,i=3*r;e.getValue(t,i);for(var n=r,a=i;n!==a;++n)t[n]=t[i+n%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,i,n){if(i>=.5)for(var a=0;a!==n;++a)e[t+a]=e[r+a]},_slerp:function(e,t,r,i){_t.slerpFlat(e,t,e,t,e,r,i)},_lerp:function(e,t,r,i,n){for(var a=1-i,o=0;o!==n;++o){var s=t+o;e[s]=e[s]*a+e[r+o]*i}}}),Object.assign(vs.prototype,{getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,i=this._bindings[r];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}),Object.assign(gs,{Composite:vs,create:function(e,t,r){return e&&e.isAnimationObjectGroup?new gs.Composite(e,t,r):new gs(e,t,r)},parseTrackName:(Yo=new RegExp("^"+/((?:[\w-]+[\/:])*)/.source+/([\w-\.]+)?/.source+/(?:\.([\w-]+)(?:\[(.+)\])?)?/.source+/\.([\w-]+)(?:\[(.+)\])?/.source+"$"),Zo=["material","materials","bones"],function(e){var t=Yo.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=r.nodeName.substring(i+1);-1!==Zo.indexOf(n)&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=n)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=function(e){for(var r=0;r<e.bones.length;r++){var i=e.bones[r];if(i.name===t)return i}return null}(e.skeleton);if(r)return r}if(e.children){var i=function(e){for(var r=0;r<e.length;r++){var n=e[r];if(n.name===t||n.uuid===t)return n;var a=i(n.children);if(a)return a}return null},n=i(e.children);if(n)return n}return null}}),Object.assign(gs.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)e[t++]=r[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=e[t++]},function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,n=t.propertyIndex;if(e||(e=gs.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var a=t.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[r])return void console.error("  can not bind to objectName of node, undefined",this);e=e[r]}if(void 0!==a){if(void 0===e[a])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[a]}}var s=e[i];if(void 0!==s){var c=this.Versioning.None;void 0!==e.needsUpdate?(c=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var l=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===n){n=o;break}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else{var u=t.nodeName;console.error("  trying to update property for track: "+u+"."+i+" but it wasn't found.",e)}}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(gs.prototype,{_getValue_unbound:gs.prototype.getValue,_setValue_unbound:gs.prototype.setValue}),Object.assign(ys.prototype,{isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,r=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,a=this._paths,o=this._parsedPaths,s=this._bindings,c=s.length,l=0,u=arguments.length;l!==u;++l){var h=arguments[l],d=h.uuid,p=n[d],f=void 0;if(void 0===p){p=r++,n[d]=p,t.push(h);for(var m=0,v=c;m!==v;++m)s[m].push(new gs(h,a[m],o[m]))}else if(p<i){f=t[p];var g=--i,y=t[g];n[y.uuid]=p,t[p]=y,n[d]=g,t[g]=h;for(var m=0,v=c;m!==v;++m){var x=s[m],E=x[g],b=x[p];x[p]=E,void 0===b&&(b=new gs(h,a[m],o[m])),x[g]=b}}else t[p]!==f&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=i},remove:function(e){for(var t=this._objects,r=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,a=n.length,o=0,s=arguments.length;o!==s;++o){var c=arguments[o],l=c.uuid,u=i[l];if(void 0!==u&&u>=r){var h=r++,d=t[h];i[d.uuid]=u,t[u]=d,i[l]=h,t[h]=c;for(var p=0,f=a;p!==f;++p){var m=n[p],v=m[h],g=m[u];m[u]=v,m[h]=g}}}this.nCachedObjects_=r},uncache:function(e){for(var t=this._objects,r=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,a=this._bindings,o=a.length,s=0,c=arguments.length;s!==c;++s){var l=arguments[s],u=l.uuid,h=n[u];if(void 0!==h)if(delete n[u],h<i){var d=--i,p=t[d],f=--r,m=t[f];n[p.uuid]=h,t[h]=p,n[m.uuid]=d,t[d]=m,t.pop();for(var v=0,g=o;v!==g;++v){var y=a[v],x=y[d],E=y[f];y[h]=x,y[d]=E,y.pop()}}else{var f=--r,m=t[f];n[m.uuid]=h,t[h]=m,t.pop();for(var v=0,g=o;v!==g;++v){var y=a[v];y[h]=y[f],y.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,i=r[e],n=this._bindings;if(void 0!==i)return n[i];var a=this._paths,o=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,u=new Array(c);i=n.length,r[e]=i,a.push(e),o.push(t),n.push(u);for(var h=l,d=s.length;h!==d;++h){var p=s[h];u[h]=new gs(p,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var i=this._paths,n=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],c=e[o];t[c]=r,a[r]=s,a.pop(),n[r]=n[o],n.pop(),i[r]=i[o],i.pop()}}}),Object.assign(xs.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var i=this._clip.duration,n=e._clip.duration,a=n/i,o=i/n;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var i=this._mixer,n=i.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,c=a.sampleValues;return s[0]=n,s[1]=n+r,c[0]=e/o,c[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,i){if(this.enabled){var n=this._startTime;if(null!==n){var a=(e-n)*r;if(a<0||0===r)return;this._startTime=null,t=r*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,l=this._propertyBindings,u=0,h=c.length;u!==h;++u)c[u].evaluate(o),l[u].accumulate(i,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r){var i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var r=this._clip.duration,i=this.loop,n=this._loopCount;if(2200===i){-1===n&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=2202===i;if(-1===n&&(e>=0?(n=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=r||t<0){var o=Math.floor(t/r);t-=r*o,n+=Math.abs(o);var s=this.repetitions-n;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===s){var c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1==(1&n))return this.time=t,r-t}return this.time=t,t},_setEndings:function(e,t,r){var i=this._interpolantSettings;r?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=e?this.zeroSlopeAtStart?2401:$e:2402,i.endingEnd=t?this.zeroSlopeAtEnd?2401:$e:2402)},_scheduleFading:function(e,t,r){var i=this._mixer,n=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=n,s[0]=t,o[1]=n+e,s[1]=r,this}}),Object.assign(Es.prototype,t.prototype,{_bindAction:function(e,t){var r=e._localRoot||this._root,i=e._clip.tracks,n=i.length,a=e._propertyBindings,o=e._interpolants,s=r.uuid,c=this._bindingsByRootAndName,l=c[s];void 0===l&&(l={},c[s]=l);for(var u=0;u!==n;++u){var h=i[u],d=h.name,p=l[d];if(void 0!==p)a[u]=p;else{if(void 0!==(p=a[u])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}var f=t&&t._propertyBindings[u].binding.parsedPath;++(p=new ms(gs.create(r,d,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,d),a[u]=p}o[u].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,i=this._actionsByClip[r];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,r,t)}for(var n=e._propertyBindings,a=0,o=n.length;a!==o;++a){var s=n[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,i=t.length;r!==i;++r){var n=t[r];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var i=this._actions,n=this._actionsByClip,a=n[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;var n=e._clip.uuid,a=this._actionsByClip,o=a[n],s=o.knownActions,c=s[s.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),e._byClipCacheIndex=null;var u=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],0===s.length&&delete a[n],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,i=t.length;r!==i;++r){var n=t[r];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_addInactiveBinding:function(e,t,r){var i=this._bindingsByRootAndName,n=i[t],a=this._bindings;void 0===n&&(n={},i[t]=n),n[r]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,i=r.rootNode.uuid,n=r.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete o[n];e:{for(var l in o)break e;delete a[i]}},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&((r=new $a(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,n=t[i];e.__cacheIndex=i,t[i]=e,n.__cacheIndex=r,t[r]=n},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var r=t||this._root,i=r.uuid,n="string"==typeof e?uo.findByName(r,e):e,a=null!==n?n.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var c=o.actionByRoot[i];if(void 0!==c)return c;s=o.knownActions[0],null===n&&(n=s._clip)}if(null===n)return null;var l=new xs(this,n,t);return this._bindAction(l,s),this._addInactiveAction(l,a,i),l},existingAction:function(e,t){var r=t||this._root,i=r.uuid,n="string"==typeof e?uo.findByName(r,e):e,a=n?n.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var n=0;n!==t;++n)e[n].reset();for(var n=0;n!==i;++n)r[n].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,i=this.time+=e,n=Math.sign(e),a=this._accuIndex^=1,o=0;o!==r;++o){var s=t[o];s._update(i,e,n,a)}for(var c=this._bindings,l=this._nActiveBindings,o=0;o!==l;++o)c[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,i=this._actionsByClip,n=i[r];if(void 0!==n){for(var a=n.knownActions,o=0,s=a.length;o!==s;++o){var c=a[o];this._deactivateAction(c);var l=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=l,t[l]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var i in r){var n=r[i].actionByRoot,a=n[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[t];if(void 0!==s)for(var c in s){var l=s[c];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}),bs.prototype.clone=function(){return new bs(void 0===this.value.clone?this.value:this.value.clone())},ws.prototype=Object.assign(Object.create(Ti.prototype),{constructor:ws,isInstancedBufferGeometry:!0,addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:r})},copy:function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var r=e.attributes;for(var i in r){var n=r[i];this.addAttribute(i,n.clone())}for(var a=e.groups,o=0,s=a.length;o<s;o++){var c=a[o];this.addGroup(c.start,c.count,c.materialIndex)}return this}}),Object.defineProperties(Ts.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Ts.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this},setXYZW:function(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}}),Object.defineProperty(Ms.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ms.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var i=0,n=this.stride;i<n;i++)this.array[e+i]=t.array[r+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),_s.prototype=Object.assign(Object.create(Ms.prototype),{constructor:_s,isInstancedInterleavedBuffer:!0,copy:function(e){return Ms.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Ss.prototype=Object.assign(Object.create(si.prototype),{constructor:Ss,isInstancedBufferAttribute:!0,copy:function(e){return si.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Rs.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var r=[];return zs(e,this,r,t),r.sort(As),r},intersectObjects:function(e,t){var r=[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,n=e.length;i<n;i++)zs(e[i],this,r,t);return r.sort(As),r}}),Object.assign(Cs.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Ps.prototype,{set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(dt.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Ls.prototype,{set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Ds.prototype=Object.create(Mi.prototype),Ds.prototype.constructor=Ds,Ds.prototype.createAnimation=function(e,t,r,i){var n={start:t,end:r,length:r-t+1,fps:i,duration:(r-t)/i,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=n,this.animationsList.push(n)},Ds.prototype.autoCreateAnimations=function(e){for(var t,r=/([a-z]+)_?(\d+)/i,i={},n=this.geometry,a=0,o=n.morphTargets.length;a<o;a++){var s=n.morphTargets[a],c=s.name.match(r);if(c&&c.length>1){var l=c[1];i[l]||(i[l]={start:1/0,end:-1/0});var u=i[l];a<u.start&&(u.start=a),a>u.end&&(u.end=a),t||(t=l)}}for(var l in i){var u=i[l];this.createAnimation(l,u.start,u.end,e)}this.firstAnimation=t},Ds.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},Ds.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},Ds.prototype.setAnimationFPS=function(e,t){var r=this.animationsMap[e];r&&(r.fps=t,r.duration=(r.end-r.start)/r.fps)},Ds.prototype.setAnimationDuration=function(e,t){var r=this.animationsMap[e];r&&(r.duration=t,r.fps=(r.end-r.start)/r.duration)},Ds.prototype.setAnimationWeight=function(e,t){var r=this.animationsMap[e];r&&(r.weight=t)},Ds.prototype.setAnimationTime=function(e,t){var r=this.animationsMap[e];r&&(r.time=t)},Ds.prototype.getAnimationTime=function(e){var t=0,r=this.animationsMap[e];return r&&(t=r.time),t},Ds.prototype.getAnimationDuration=function(e){var t=-1,r=this.animationsMap[e];return r&&(t=r.duration),t},Ds.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},Ds.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},Ds.prototype.update=function(e){for(var t=0,r=this.animationsList.length;t<r;t++){var i=this.animationsList[t];if(i.active){var n=i.duration/i.length;i.time+=i.direction*e,i.mirroredLoop?(i.time>i.duration||i.time<0)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.directionBackwards=!0),i.time<0&&(i.time=0,i.directionBackwards=!1)):(i.time=i.time%i.duration,i.time<0&&(i.time+=i.duration));var a=i.start+dt.clamp(Math.floor(i.time/n),0,i.length-1),o=i.weight;a!==i.currentFrame&&(this.morphTargetInfluences[i.lastFrame]=0,this.morphTargetInfluences[i.currentFrame]=1*o,this.morphTargetInfluences[a]=0,i.lastFrame=i.currentFrame,i.currentFrame=a);var s=i.time%n/n;i.directionBackwards&&(s=1-s),i.currentFrame!==i.lastFrame?(this.morphTargetInfluences[i.currentFrame]=s*o,this.morphTargetInfluences[i.lastFrame]=(1-s)*o):this.morphTargetInfluences[i.currentFrame]=o}}},Us.prototype=Object.create(ri.prototype),Us.prototype.constructor=Us,Us.prototype.isImmediateRenderObject=!0,Hs.prototype=Object.create(_n.prototype),Hs.prototype.constructor=Hs,Hs.prototype.update=function(){var e=new St,t=new St,r=new Gr;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var n=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,c=o.faces,l=0,u=0,h=c.length;u<h;u++)for(var d=c[u],p=0,f=d.vertexNormals.length;p<f;p++){var m=s[d[i[p]]],v=d.vertexNormals[p];e.copy(m).applyMatrix4(n),t.copy(v).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),a.setXYZ(l,e.x,e.y,e.z),l+=1,a.setXYZ(l,t.x,t.y,t.z),l+=1}else if(o&&o.isBufferGeometry)for(var g=o.attributes.position,y=o.attributes.normal,l=0,p=0,f=g.count;p<f;p++)e.set(g.getX(p),g.getY(p),g.getZ(p)).applyMatrix4(n),t.set(y.getX(p),y.getY(p),y.getZ(p)),t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),a.setXYZ(l,e.x,e.y,e.z),l+=1,a.setXYZ(l,t.x,t.y,t.z),l+=1;a.needsUpdate=!0}}(),Os.prototype=Object.create(ri.prototype),Os.prototype.constructor=Os,Os.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Os.prototype.update=(Xo=new St,qo=new St,function(){var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Xo.setFromMatrixPosition(this.light.matrixWorld),qo.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(qo.sub(Xo)),this.cone.material.color.copy(this.light.color)}),Is.prototype=Object.create(_n.prototype),Is.prototype.constructor=Is,Is.prototype.getBoneList=function(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,this.getBoneList(e.children[r]));return t},Is.prototype.update=function(){var e=new St,t=new Rt,r=new Rt;return function(){var i=this.geometry,n=i.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var a=0,o=0;a<this.bones.length;a++){var s=this.bones[a];s.parent&&s.parent.isBone&&(t.multiplyMatrices(r,s.matrixWorld),e.setFromMatrixPosition(t),n.setXYZ(o,e.x,e.y,e.z),t.multiplyMatrices(r,s.parent.matrixWorld),e.setFromMatrixPosition(t),n.setXYZ(o+1,e.x,e.y,e.z),o+=2)}i.getAttribute("position").needsUpdate=!0}}(),Ns.prototype=Object.create(Mi.prototype),Ns.prototype.constructor=Ns,Ns.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Ns.prototype.update=function(){this.material.color.copy(this.light.color)},Bs.prototype=Object.create(ri.prototype),Bs.prototype.constructor=Bs,Bs.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Bs.prototype.update=function(){var e=this.children[0];e.material.color.copy(this.light.color);var t=.5*this.light.width,r=.5*this.light.height,i=e.geometry.attributes.position,n=i.array;n[0]=t,n[1]=-r,n[2]=0,n[3]=t,n[4]=r,n[5]=0,n[6]=-t,n[7]=r,n[8]=0,n[9]=-t,n[10]=-r,n[11]=0,n[12]=t,n[13]=-r,n[14]=0,i.needsUpdate=!0},Fs.prototype=Object.create(ri.prototype),Fs.prototype.constructor=Fs,Fs.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Fs.prototype.update=function(){var e=new St,t=new vr,r=new vr;return function(){var i=this.children[0],n=i.geometry.getAttribute("color");t.copy(this.light.color),r.copy(this.light.groundColor);for(var a=0,o=n.count;a<o;a++){var s=a<o/2?t:r;n.setXYZ(a,s.r,s.g,s.b)}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),n.needsUpdate=!0}}(),Gs.prototype=Object.create(_n.prototype),Gs.prototype.constructor=Gs,Vs.prototype=Object.create(_n.prototype),Vs.prototype.constructor=Vs,js.prototype=Object.create(_n.prototype),js.prototype.constructor=js,js.prototype.update=function(){var e=new St,t=new St,r=new Gr;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,n=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,c=0,l=0,u=s.length;l<u;l++){var h=s[l],d=h.normal;e.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(i),t.copy(d).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),n.setXYZ(c,e.x,e.y,e.z),c+=1,n.setXYZ(c,t.x,t.y,t.z),c+=1}n.needsUpdate=!0}}(),ks.prototype=Object.create(ri.prototype),ks.prototype.constructor=ks,ks.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},ks.prototype.update=function(){var e=new St,t=new St,r=new St;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e);var i=this.children[0],n=this.children[1];i.lookAt(r),i.material.color.copy(this.light.color),n.lookAt(r),n.scale.z=r.length()}}(),Ws.prototype=Object.create(_n.prototype),Ws.prototype.constructor=Ws,Ws.prototype.update=function(){var e,t,r=new St,i=new zi;function n(n,a,o,s){r.set(a,o,s).unproject(i);var c=t[n];if(void 0!==c)for(var l=e.getAttribute("position"),u=0,h=c.length;u<h;u++)l.setXYZ(c[u],r.x,r.y,r.z)}return function(){e=this.geometry,t=this.pointMap,i.projectionMatrix.copy(this.camera.projectionMatrix),n("c",0,0,-1),n("t",0,0,1),n("n1",-1,-1,-1),n("n2",1,-1,-1),n("n3",-1,1,-1),n("n4",1,1,-1),n("f1",-1,-1,1),n("f2",1,-1,1),n("f3",-1,1,1),n("f4",1,1,1),n("u1",.7,1.1,-1),n("u2",-.7,1.1,-1),n("u3",0,2,-1),n("cf1",-1,0,1),n("cf2",1,0,1),n("cf3",0,-1,1),n("cf4",0,1,1),n("cn1",-1,0,-1),n("cn2",1,0,-1),n("cn3",0,-1,-1),n("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),Xs.prototype=Object.create(_n.prototype),Xs.prototype.constructor=Xs,Xs.prototype.update=function(){var e=new Br;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var r=e.min,i=e.max,n=this.geometry.attributes.position,a=n.array;a[0]=i.x,a[1]=i.y,a[2]=i.z,a[3]=r.x,a[4]=i.y,a[5]=i.z,a[6]=r.x,a[7]=r.y,a[8]=i.z,a[9]=i.x,a[10]=r.y,a[11]=i.z,a[12]=i.x,a[13]=i.y,a[14]=r.z,a[15]=r.x,a[16]=i.y,a[17]=r.z,a[18]=r.x,a[19]=r.y,a[20]=r.z,a[21]=i.x,a[22]=r.y,a[23]=r.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Xs.prototype.setFromObject=function(e){return this.object=e,this.update(),this},qs.prototype=Object.create(ri.prototype),qs.prototype.constructor=qs,qs.prototype.setDirection=(Wo=new St,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(Wo.set(e.z,0,-e.x).normalize(),ko=Math.acos(e.y),this.quaternion.setFromAxisAngle(Wo,ko))}),qs.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},qs.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Ys.prototype=Object.create(_n.prototype),Ys.prototype.constructor=Ys;var Qs=new St,Js=new Zs,Ks=new Zs,$s=new Zs;function ec(e){Ao.call(this),this.points=e||[],this.closed=!1}function tc(e,t,r,i){Ao.call(this),this.v0=e,this.v1=t,this.v2=r,this.v3=i}function rc(e,t,r){Ao.call(this),this.v0=e,this.v1=t,this.v2=r}function ic(e,t){Ao.call(this),this.v1=e,this.v2=t}function nc(e,t,r,i,n,a){Po.call(this,e,t,r,r,i,n,a)}ec.prototype=Object.create(Ao.prototype),ec.prototype.constructor=ec,ec.prototype.getPoint=function(e){var t=this.points,r=t.length;r<2&&console.log("duh, you need at least 2 points");var i,n,a,o,s=(r-(this.closed?0:1))*e,c=Math.floor(s),l=s-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/t.length)+1)*t.length:0===l&&c===r-1&&(c=r-2,l=1),this.closed||c>0?i=t[(c-1)%r]:(Qs.subVectors(t[0],t[1]).add(t[0]),i=Qs),n=t[c%r],a=t[(c+1)%r],this.closed||c+2<r?o=t[(c+2)%r]:(Qs.subVectors(t[r-1],t[r-2]).add(t[r-1]),o=Qs),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var u="chordal"===this.type?.5:.25,h=Math.pow(i.distanceToSquared(n),u),d=Math.pow(n.distanceToSquared(a),u),p=Math.pow(a.distanceToSquared(o),u);d<1e-4&&(d=1),h<1e-4&&(h=d),p<1e-4&&(p=d),Js.initNonuniformCatmullRom(i.x,n.x,a.x,o.x,h,d,p),Ks.initNonuniformCatmullRom(i.y,n.y,a.y,o.y,h,d,p),$s.initNonuniformCatmullRom(i.z,n.z,a.z,o.z,h,d,p)}else if("catmullrom"===this.type){var f=void 0!==this.tension?this.tension:.5;Js.initCatmullRom(i.x,n.x,a.x,o.x,f),Ks.initCatmullRom(i.y,n.y,a.y,o.y,f),$s.initCatmullRom(i.z,n.z,a.z,o.z,f)}return new St(Js.calc(l),Ks.calc(l),$s.calc(l))},tc.prototype=Object.create(Ao.prototype),tc.prototype.constructor=tc,tc.prototype.getPoint=function(e){var t=this.v0,r=this.v1,i=this.v2,n=this.v3;return new St(Ro(e,t.x,r.x,i.x,n.x),Ro(e,t.y,r.y,i.y,n.y),Ro(e,t.z,r.z,i.z,n.z))},rc.prototype=Object.create(Ao.prototype),rc.prototype.constructor=rc,rc.prototype.getPoint=function(e){var t=this.v0,r=this.v1,i=this.v2;return new St(So(e,t.x,r.x,i.x),So(e,t.y,r.y,i.y),So(e,t.z,r.z,i.z))},ic.prototype=Object.create(Ao.prototype),ic.prototype.constructor=ic,ic.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=new St;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t},nc.prototype=Object.create(Po.prototype),nc.prototype.constructor=nc;var ac={createMultiMaterialObject:function(e,t){for(var r=new zn,i=0,n=t.length;i<n;i++)r.add(new Mi(e,t[i]));return r},detach:function(e,t,r){e.applyMatrix(t.matrixWorld),t.remove(e),r.add(e)},attach:function(e,t,r){var i=new Rt;i.getInverse(r.matrixWorld),e.applyMatrix(i),t.remove(e),r.add(e)}};function oc(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ec.call(this,e),this.type="catmullrom",this.closed=!0}function sc(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ec.call(this,e),this.type="catmullrom"}function cc(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ec.call(this,e),this.type="catmullrom"}Ao.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Ao.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},oc.prototype=Object.create(ec.prototype),sc.prototype=Object.create(ec.prototype),cc.prototype=Object.create(ec.prototype),Object.assign(cc.prototype,{initFromArray:function(e){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(e){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(e){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Gs.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(br.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Br.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),ii.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},dt.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(Gr.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToBuffer:function(e,t,r){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,r){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Rt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new St),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,r){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,r){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,i,n,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,r,n,a)}}),Vr.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},_t.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Wr.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(No.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ea(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ua(this,e)}}),Object.assign(pt.prototype,{fromAttribute:function(e,t,r){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}}),Object.assign(St.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}}),Object.assign(wt.prototype,{fromAttribute:function(e,t,r){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}}),wi.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(ri.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(ri.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(xn.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(En.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Ao.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Ci.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ba.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(si.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Ti.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Ti.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(bs.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Or.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new vr}}}),Object.defineProperties(Ma.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ir.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(dn.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(dn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(kr.prototype,{cullFace:{get:function(){return this.renderReverseSided?h:u},set:function(e){var t=e!==u;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(Tt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),ds.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this,r=new ss;return r.load(e,function(e){t.setBuffer(e)}),this},fs.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var lc={merge:function(e,t,r){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},uc={crossOrigin:void 0,loadTexture:function(e,t,r,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var n=new Na;n.setCrossOrigin(this.crossOrigin);var a=n.load(e,r,void 0,i);return t&&(a.mapping=t),a},loadTextureCube:function(e,t,r,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var n=new Ia;n.setCrossOrigin(this.crossOrigin);var a=n.load(e,r,void 0,i);return t&&(a.mapping=t),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};e.WebGLRenderTargetCube=Mt,e.WebGLRenderTarget=Tt,e.WebGLRenderer=dn,e.ShaderLib=Er,e.UniformsLib=gr,e.UniformsUtils=yr,e.ShaderChunk=xr,e.FogExp2=pn,e.Fog=fn,e.Scene=mn,e.LensFlare=vn,e.Sprite=yn,e.LOD=xn,e.SkinnedMesh=wn,e.Skeleton=En,e.Bone=bn,e.Mesh=Mi,e.LineSegments=_n,e.LineLoop=Sn,e.Line=Mn,e.Points=An,e.Group=zn,e.VideoTexture=Cn,e.DataTexture=At,e.CompressedTexture=Pn,e.CubeTexture=zt,e.CanvasTexture=Ln,e.DepthTexture=Dn,e.Texture=bt,e.CompressedTextureLoader=Ua,e.DataTextureLoader=Ha,e.CubeTextureLoader=Ia,e.TextureLoader=Na,e.ObjectLoader=bo,e.MaterialLoader=ho,e.BufferGeometryLoader=po,e.DefaultLoadingManager=La,e.LoadingManager=Pa,e.JSONLoader=Eo,e.ImageLoader=Oa,e.FontLoader=Go,e.FileLoader=Da,e.Loader=xo,e.Cache=Ca,e.AudioLoader=ss,e.SpotLightShadow=Va,e.SpotLight=ja,e.PointLight=ka,e.RectAreaLight=Ya,e.HemisphereLight=Fa,e.DirectionalLightShadow=Wa,e.DirectionalLight=Xa,e.AmbientLight=qa,e.LightShadow=Ga,e.Light=Ba,e.StereoCamera=cs,e.PerspectiveCamera=Ci,e.OrthographicCamera=Pi,e.CubeCamera=ls,e.ArrayCamera=us,e.Camera=zi,e.AudioListener=hs,e.PositionalAudio=ps,e.AudioContext=os,e.AudioAnalyser=fs,e.Audio=ds,e.VectorKeyframeTrack=ro,e.StringKeyframeTrack=oo,e.QuaternionKeyframeTrack=no,e.NumberKeyframeTrack=ao,e.ColorKeyframeTrack=co,e.BooleanKeyframeTrack=so,e.PropertyMixer=ms,e.PropertyBinding=gs,e.KeyframeTrack=lo,e.AnimationUtils=Qa,e.AnimationObjectGroup=ys,e.AnimationMixer=Es,e.AnimationClip=uo,e.Uniform=bs,e.InstancedBufferGeometry=ws,e.BufferGeometry=Ti,e.GeometryIdCount=bi,e.Geometry=wi,e.InterleavedBufferAttribute=Ts,e.InstancedInterleavedBuffer=_s,e.InterleavedBuffer=Ms,e.InstancedBufferAttribute=Ss,e.Face3=ai,e.Object3D=ri,e.Raycaster=Rs,e.Layers=qr,e.EventDispatcher=t,e.Clock=Cs,e.QuaternionLinearInterpolant=io,e.LinearInterpolant=$a,e.DiscreteInterpolant=eo,e.CubicInterpolant=Ka,e.Interpolant=Ja,e.Triangle=ni,e.Math=dt,e.Spherical=Ps,e.Cylindrical=Ls,e.Plane=Vr,e.Frustum=jr,e.Sphere=Fr,e.Ray=Wr,e.Matrix4=Rt,e.Matrix3=Gr,e.Box3=Br,e.Box2=br,e.Line3=ii,e.Euler=Xr,e.Vector4=wt,e.Vector3=St,e.Vector2=pt,e.Quaternion=_t,e.Color=vr,e.MorphBlendMesh=Ds,e.ImmediateRenderObject=Us,e.VertexNormalsHelper=Hs,e.SpotLightHelper=Os,e.SkeletonHelper=Is,e.PointLightHelper=Ns,e.RectAreaLightHelper=Bs,e.HemisphereLightHelper=Fs,e.GridHelper=Gs,e.PolarGridHelper=Vs,e.FaceNormalsHelper=js,e.DirectionalLightHelper=ks,e.CameraHelper=Ws,e.BoxHelper=Xs,e.ArrowHelper=qs,e.AxisHelper=Ys,e.CatmullRomCurve3=ec,e.CubicBezierCurve3=tc,e.QuadraticBezierCurve3=rc,e.LineCurve3=ic,e.ArcCurve=nc,e.EllipseCurve=Po,e.SplineCurve=Lo,e.CubicBezierCurve=Do,e.QuadraticBezierCurve=Uo,e.LineCurve=zo,e.Shape=No,e.Path=Io,e.ShapePath=Bo,e.Font=Fo,e.CurvePath=Co,e.Curve=Ao,e.ShapeUtils=$n,e.SceneUtils=ac,e.WireframeGeometry=Un,e.ParametricGeometry=Hn,e.ParametricBufferGeometry=On,e.TetrahedronGeometry=Bn,e.TetrahedronBufferGeometry=Fn,e.OctahedronGeometry=Gn,e.OctahedronBufferGeometry=Vn,e.IcosahedronGeometry=jn,e.IcosahedronBufferGeometry=kn,e.DodecahedronGeometry=Wn,e.DodecahedronBufferGeometry=Xn,e.PolyhedronGeometry=In,e.PolyhedronBufferGeometry=Nn,e.TubeGeometry=qn,e.TubeBufferGeometry=Yn,e.TorusKnotGeometry=Zn,e.TorusKnotBufferGeometry=Qn,e.TorusGeometry=Jn,e.TorusBufferGeometry=Kn,e.TextGeometry=ra,e.TextBufferGeometry=ia,e.SphereGeometry=na,e.SphereBufferGeometry=aa,e.RingGeometry=oa,e.RingBufferGeometry=sa,e.PlaneGeometry=Ri,e.PlaneBufferGeometry=Ai,e.LatheGeometry=ca,e.LatheBufferGeometry=la,e.ShapeGeometry=ua,e.ShapeBufferGeometry=ha,e.ExtrudeGeometry=ea,e.ExtrudeBufferGeometry=ta,e.EdgesGeometry=da,e.ConeGeometry=ma,e.ConeBufferGeometry=va,e.CylinderGeometry=pa,e.CylinderBufferGeometry=fa,e.CircleGeometry=ga,e.CircleBufferGeometry=ya,e.BoxGeometry=_i,e.BoxBufferGeometry=Si,e.ShadowMaterial=Ea,e.SpriteMaterial=gn,e.RawShaderMaterial=ba,e.ShaderMaterial=Ir,e.PointsMaterial=Rn,e.MeshPhysicalMaterial=Ta,e.MeshStandardMaterial=wa,e.MeshPhongMaterial=Ma,e.MeshToonMaterial=_a,e.MeshNormalMaterial=Sa,e.MeshLambertMaterial=Ra,e.MeshDepthMaterial=Nr,e.MeshBasicMaterial=oi,e.LineDashedMaterial=Aa,e.LineBasicMaterial=Tn,e.Material=Or,e.Float64BufferAttribute=vi,e.Float32BufferAttribute=mi,e.Uint32BufferAttribute=fi,e.Int32BufferAttribute=pi,e.Uint16BufferAttribute=di,e.Int16BufferAttribute=hi,e.Uint8ClampedBufferAttribute=ui,e.Uint8BufferAttribute=li,e.Int8BufferAttribute=ci,e.BufferAttribute=si,e.REVISION=c,e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},e.CullFaceNone=l,e.CullFaceBack=u,e.CullFaceFront=h,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=d,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=p,e.PCFSoftShadowMap=f,e.FrontSide=m,e.BackSide=v,e.DoubleSide=g,e.FlatShading=y,e.SmoothShading=x,e.NoColors=E,e.FaceColors=b,e.VertexColors=w,e.NoBlending=T,e.NormalBlending=M,e.AdditiveBlending=_,e.SubtractiveBlending=S,e.MultiplyBlending=R,e.CustomBlending=A,e.AddEquation=z,e.SubtractEquation=C,e.ReverseSubtractEquation=P,e.MinEquation=L,e.MaxEquation=D,e.ZeroFactor=U,e.OneFactor=H,e.SrcColorFactor=O,e.OneMinusSrcColorFactor=I,e.SrcAlphaFactor=N,e.OneMinusSrcAlphaFactor=B,e.DstAlphaFactor=F,e.OneMinusDstAlphaFactor=G,e.DstColorFactor=V,e.OneMinusDstColorFactor=j,e.SrcAlphaSaturateFactor=k,e.NeverDepth=W,e.AlwaysDepth=X,e.LessDepth=q,e.LessEqualDepth=Y,e.EqualDepth=Z,e.GreaterEqualDepth=Q,e.GreaterDepth=J,e.NotEqualDepth=K,e.MultiplyOperation=$,e.MixOperation=ee,e.AddOperation=te,e.NoToneMapping=re,e.LinearToneMapping=ie,e.ReinhardToneMapping=ne,e.Uncharted2ToneMapping=ae,e.CineonToneMapping=oe,e.UVMapping=300,e.CubeReflectionMapping=se,e.CubeRefractionMapping=ce,e.EquirectangularReflectionMapping=le,e.EquirectangularRefractionMapping=ue,e.SphericalReflectionMapping=he,e.CubeUVReflectionMapping=de,e.CubeUVRefractionMapping=pe,e.RepeatWrapping=fe,e.ClampToEdgeWrapping=me,e.MirroredRepeatWrapping=ve,e.NearestFilter=ge,e.NearestMipMapNearestFilter=ye,e.NearestMipMapLinearFilter=xe,e.LinearFilter=Ee,e.LinearMipMapNearestFilter=be,e.LinearMipMapLinearFilter=we,e.UnsignedByteType=Te,e.ByteType=Me,e.ShortType=_e,e.UnsignedShortType=Se,e.IntType=Re,e.UnsignedIntType=Ae,e.FloatType=ze,e.HalfFloatType=Ce,e.UnsignedShort4444Type=Pe,e.UnsignedShort5551Type=Le,e.UnsignedShort565Type=De,e.UnsignedInt248Type=Ue,e.AlphaFormat=He,e.RGBFormat=Oe,e.RGBAFormat=Ie,e.LuminanceFormat=Ne,e.LuminanceAlphaFormat=Be,e.RGBEFormat=Fe,e.DepthFormat=Ge,e.DepthStencilFormat=Ve,e.RGB_S3TC_DXT1_Format=je,e.RGBA_S3TC_DXT1_Format=ke,e.RGBA_S3TC_DXT3_Format=We,e.RGBA_S3TC_DXT5_Format=Xe,e.RGB_PVRTC_4BPPV1_Format=qe,e.RGB_PVRTC_2BPPV1_Format=Ye,e.RGBA_PVRTC_4BPPV1_Format=Ze,e.RGBA_PVRTC_2BPPV1_Format=Qe,e.RGB_ETC1_Format=Je,e.LoopOnce=2200,e.LoopRepeat=Ke,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=$e,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=et,e.TriangleStripDrawMode=tt,e.TriangleFanDrawMode=rt,e.LinearEncoding=it,e.sRGBEncoding=nt,e.GammaEncoding=at,e.RGBEEncoding=ot,e.LogLuvEncoding=3003,e.RGBM7Encoding=st,e.RGBM16Encoding=ct,e.RGBDEncoding=lt,e.BasicDepthPacking=ut,e.RGBADepthPacking=ht,e.CubeGeometry=_i,e.Face4=function(e,t,r,i,n,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ai(e,t,r,n,a,o)},e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new An(e,t)},e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new yn(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new An(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Rn(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Rn(e)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Rn(e)},e.Vertex=function(e,t,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new St(e,t,r)},e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new si(e,t).setDynamic(!0)},e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new ci(e,t)},e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new li(e,t)},e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ui(e,t)},e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new hi(e,t)},e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new di(e,t)},e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new pi(e,t)},e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new fi(e,t)},e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new mi(e,t)},e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new vi(e,t)},e.ClosedSplineCurve3=oc,e.SplineCurve3=sc,e.Spline=cc,e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Xs(e,t)},e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new _n(new da(e.geometry),new Tn({color:void 0!==t?t:16777215}))},e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new _n(new Un(e.geometry),new Tn({color:void 0!==t?t:16777215}))},e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Da(e)},e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Ha(e)},e.GeometryUtils=lc,e.ImageUtils=uc,e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},Object.defineProperty(e,"__esModule",{value:!0})}(t)},"4+iv":function(e,t){THREE.FilmPass=function(e,t,r,i){THREE.Pass.call(this),void 0===THREE.FilmShader&&console.error("THREE.FilmPass relies on THREE.FilmShader");var n=THREE.FilmShader;this.uniforms=THREE.UniformsUtils.clone(n.uniforms),this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}),void 0!==i&&(this.uniforms.grayscale.value=i),void 0!==e&&(this.uniforms.nIntensity.value=e),void 0!==t&&(this.uniforms.sIntensity.value=t),void 0!==r&&(this.uniforms.sCount.value=r),this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.FilmPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.FilmPass,render:function(e,t,r,i,n){this.uniforms.tDiffuse.value=r.texture,this.uniforms.time.value+=i,this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}})},"4SSs":function(e,t){THREE.RGBShiftShader={uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float amount;","uniform float angle;","varying vec2 vUv;","void main() {","vec2 offset = amount * vec2( cos(angle), sin(angle));","vec4 cr = texture2D(tDiffuse, vUv + offset);","vec4 cga = texture2D(tDiffuse, vUv);","vec4 cb = texture2D(tDiffuse, vUv - offset);","gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","}"].join("\n")}},"5Yp1":function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return y});var i=r("0iUn"),n=r("sLSF"),a=r("MI3g"),o=r("a7VT"),s=r("Tit0"),c=r("q1tI"),l=r.n(c),u=r("PgRs"),h=r.n(u),d=r("lI6N"),p=r.n(d),f=r("TKVL"),m=r.n(f),v=r("0wEy"),g=r("2ByH");e.THREE=g,r("9hJh"),r("m+O+"),r("ZIIN"),r("IyR2"),r("JXsK"),r("F64Y"),r("vB4Q"),r("4SSs"),r("YJSH"),r("yIj5"),r("HU5l"),r("Q3RQ"),r("QA1F"),r("cQXM"),r("ojlb"),r("S8yY"),r("NcqA"),r("gKUX"),r("B0OJ"),r("EKpY"),r("iZPw"),r("AzDt"),r("UtEt"),r("QAuH"),r("1OKq"),r("1c1Y"),r("7o+/"),r("76Ft"),r("4+iv"),r("zJg2"),r("8Psu"),r("ajxh"),r("H+43"),r("VOCu"),r("r5Cq"),r("s/Gw");var y=function(e){function t(){return Object(i.default)(this,t),Object(a.default)(this,Object(o.default)(t).apply(this,arguments))}return Object(s.default)(t,e),Object(n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.title,i=void 0===r?"Alice":r;return l.a.createElement("div",null,l.a.createElement(h.a,null,l.a.createElement("title",null,i),l.a.createElement("style",{dangerouslySetInnerHTML:{__html:p.a+m.a}})),l.a.createElement(v.Motion,{defaultStyle:{o:0},style:{o:Object(v.spring)(1)}},function(e){return l.a.createElement("div",{style:{opacity:e.o},key:"motion-content"},l.a.createElement("div",{className:"container","data-scrollbar":!0,key:"container"},t))}))}}]),t}(c.Component)}).call(this,r("yLpj"))},"6sVZ":function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},"76Ft":function(e,t){THREE.ShaderPass=function(e,t){THREE.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof THREE.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.ShaderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.ShaderPass,render:function(e,t,r,i,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}})},"7GkX":function(e,t,r){var i=r("b80T"),n=r("A90E"),a=r("MMmD");e.exports=function(e){return a(e)?i(e):n(e)}},"7o+/":function(e,t){THREE.MaskPass=function(e,t){THREE.Pass.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1},THREE.MaskPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.MaskPass,render:function(e,t,r,i,n){var a,o,s=e.context,c=e.state;c.buffers.color.setMask(!1),c.buffers.depth.setMask(!1),c.buffers.color.setLocked(!0),c.buffers.depth.setLocked(!0),this.inverse?(a=0,o=1):(a=1,o=0),c.buffers.stencil.setTest(!0),c.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),c.buffers.stencil.setFunc(s.ALWAYS,a,4294967295),c.buffers.stencil.setClear(o),e.render(this.scene,this.camera,r,this.clear),e.render(this.scene,this.camera,t,this.clear),c.buffers.color.setLocked(!1),c.buffers.depth.setLocked(!1),c.buffers.stencil.setFunc(s.EQUAL,1,4294967295),c.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP)}}),THREE.ClearMaskPass=function(){THREE.Pass.call(this),this.needsSwap=!1},THREE.ClearMaskPass.prototype=Object.create(THREE.Pass.prototype),Object.assign(THREE.ClearMaskPass.prototype,{render:function(e,t,r,i,n){e.state.buffers.stencil.setTest(!1)}})},"8Psu":function(e,t){THREE.DotScreenPass=function(e,t,r){THREE.Pass.call(this),void 0===THREE.DotScreenShader&&console.error("THREE.DotScreenPass relies on THREE.DotScreenShader");var i=THREE.DotScreenShader;this.uniforms=THREE.UniformsUtils.clone(i.uniforms),void 0!==e&&this.uniforms.center.value.copy(e),void 0!==t&&(this.uniforms.angle.value=t),void 0!==r&&(this.uniforms.scale.value=r),this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}),this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.DotScreenPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.DotScreenPass,render:function(e,t,r,i,n){this.uniforms.tDiffuse.value=r.texture,this.uniforms.tSize.value.set(r.width,r.height),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}})},"8oxB":function(e,t){var r,i,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var c,l=[],u=!1,h=-1;function d(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&p())}function p(){if(!u){var e=s(d);u=!0;for(var t=l.length;t;){for(c=l,l=[];++h<t;)c&&c[h].run();h=-1,t=l.length}c=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},"9hJh":function(e,t){THREE.Mirror=function(e,t,r){THREE.Mesh.call(this,new THREE.PlaneBufferGeometry(e,t));var i=this;i.name="mirror_"+i.id,i.matrixNeedsUpdate=!0;var n=void 0!==(r=r||{}).textureWidth?r.textureWidth:512,a=void 0!==r.textureHeight?r.textureHeight:512,o=void 0!==r.clipBias?r.clipBias:0,s=void 0!==r.color?new THREE.Color(r.color):new THREE.Color(8355711),c=new THREE.Plane,l=new THREE.Vector3,u=new THREE.Vector3,h=new THREE.Vector3,d=new THREE.Matrix4,p=new THREE.Vector3(0,0,-1),f=new THREE.Vector4,m=new THREE.Matrix4,v=new THREE.PerspectiveCamera;v.matrixAutoUpdate=!0;var g={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1},y=new THREE.WebGLRenderTarget(n,a,g);THREE.Math.isPowerOfTwo(n)&&THREE.Math.isPowerOfTwo(a)||(y.texture.generateMipmaps=!1);var x={uniforms:{mirrorColor:{value:new THREE.Color(8355711)},mirrorSampler:{value:null},textureMatrix:{value:new THREE.Matrix4}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 mirrorCoord;","void main() {","\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tmirrorCoord = textureMatrix * worldPosition;","\tgl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform vec3 mirrorColor;","uniform sampler2D mirrorSampler;","varying vec4 mirrorCoord;","float blendOverlay(float base, float blend) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : (1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","void main() {","\tvec4 color = texture2DProj(mirrorSampler, mirrorCoord);","\tcolor = vec4(blendOverlay(mirrorColor.r, color.r), blendOverlay(mirrorColor.g, color.g), blendOverlay(mirrorColor.b, color.b), 1.0);","\tgl_FragColor = color;","}"].join("\n")},E=THREE.UniformsUtils.clone(x.uniforms),b=new THREE.ShaderMaterial({fragmentShader:x.fragmentShader,vertexShader:x.vertexShader,uniforms:E});b.uniforms.mirrorSampler.value=y.texture,b.uniforms.mirrorColor.value=s,b.uniforms.textureMatrix.value=m,i.material=b,i.onBeforeRender=function(e,t,r){!function(e){e.updateMatrixWorld(),v.copy(e),v.updateProjectionMatrix(),i.updateMatrixWorld(),u.setFromMatrixPosition(i.matrixWorld),h.setFromMatrixPosition(e.matrixWorld),d.extractRotation(i.matrixWorld),l.set(0,0,1),l.applyMatrix4(d);var t=u.clone().sub(h);t.reflect(l).negate(),t.add(u),d.extractRotation(e.matrixWorld),p.set(0,0,-1),p.applyMatrix4(d),p.add(h);var r=u.clone().sub(p);r.reflect(l).negate(),r.add(u),v.position.copy(t),v.up.set(0,-1,0),v.up.applyMatrix4(d),v.up.reflect(l).negate(),v.lookAt(r),v.updateProjectionMatrix(),v.updateMatrixWorld(),v.matrixWorldInverse.getInverse(v.matrixWorld),m.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),m.multiply(v.projectionMatrix),m.multiply(v.matrixWorldInverse),c.setFromNormalAndCoplanarPoint(l,u),c.applyMatrix4(v.matrixWorldInverse),f.set(c.normal.x,c.normal.y,c.normal.z,c.constant);var n=new THREE.Vector4,a=v.projectionMatrix;n.x=(Math.sign(f.x)+a.elements[8])/a.elements[0],n.y=(Math.sign(f.y)+a.elements[9])/a.elements[5],n.z=-1,n.w=(1+a.elements[10])/a.elements[14];var s=new THREE.Vector4;s=f.multiplyScalar(2/f.dot(n)),a.elements[2]=s.x,a.elements[6]=s.y,a.elements[10]=s.z+1-o,a.elements[14]=s.w}(r),i.visible=!1;var n=e.getRenderTarget();e.render(t,v,y,!0),e.setRenderTarget(n),i.visible=!0}},THREE.Mirror.prototype=Object.create(THREE.Mesh.prototype)},A90E:function(e,t,r){var i=r("6sVZ"),n=r("V6Ve"),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return n(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},AP2z:function(e,t,r){var i=r("nmnc"),n=Object.prototype,a=n.hasOwnProperty,o=n.toString,s=i?i.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var i=!0}catch(c){}var n=o.call(e);return i&&(t?e[s]=r:delete e[s]),n}},AzDt:function(e,t){THREE.FocusShader={uniforms:{tDiffuse:{value:null},screenWidth:{value:1024},screenHeight:{value:1024},sampleDistance:{value:.94},waveFactor:{value:.00125}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float screenWidth;","uniform float screenHeight;","uniform float sampleDistance;","uniform float waveFactor;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 color, org, tmp, add;","float sample_dist, f;","vec2 vin;","vec2 uv = vUv;","add = color = org = texture2D( tDiffuse, uv );","vin = ( uv - vec2( 0.5 ) ) * vec2( 1.4 );","sample_dist = dot( vin, vin ) * 2.0;","f = ( waveFactor * 100.0 + sample_dist ) * sampleDistance * 4.0;","vec2 sampleSize = vec2(  1.0 / screenWidth, 1.0 / screenHeight ) * vec2( f );","add += tmp = texture2D( tDiffuse, uv + vec2( 0.111964, 0.993712 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( 0.846724, 0.532032 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( 0.943883, -0.330279 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( 0.330279, -0.943883 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( -0.532032, -0.846724 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( -0.993712, -0.111964 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( -0.707107, 0.707107 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","color = color * vec4( 2.0 ) - ( add / vec4( 8.0 ) );","color = color + ( add / vec4( 8.0 ) - color ) * ( vec4( 1.0 ) - vec4( sample_dist * 0.5 ) );","gl_FragColor = vec4( color.rgb * color.rgb * vec3( 0.95 ) + color.rgb, 1.0 );","}"].join("\n")}},B0OJ:function(e,t){THREE.BleachBypassShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 base = texture2D( tDiffuse, vUv );","vec3 lumCoeff = vec3( 0.25, 0.65, 0.1 );","float lum = dot( lumCoeff, base.rgb );","vec3 blend = vec3( lum );","float L = min( 1.0, max( 0.0, 10.0 * ( lum - 0.45 ) ) );","vec3 result1 = 2.0 * base.rgb * blend;","vec3 result2 = 1.0 - 2.0 * ( 1.0 - blend ) * ( 1.0 - base.rgb );","vec3 newColor = mix( result1, result2, L );","float A2 = opacity * base.a;","vec3 mixRGB = A2 * newColor.rgb;","mixRGB += ( ( 1.0 - A2 ) * base.rgb );","gl_FragColor = vec4( mixRGB, base.a );","}"].join("\n")}},B8du:function(e,t){e.exports=function(){return!1}},DSRE:function(e,t,r){(function(e){var i=r("Kz5y"),n=r("B8du"),a=t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===a?i.Buffer:void 0,c=(s?s.isBuffer:void 0)||n;e.exports=c}).call(this,r("YuTi")(e))},DzJC:function(e,t,r){var i=r("sEfC"),n=r("GoyQ"),a="Expected a function";e.exports=function(e,t,r){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return n(r)&&(o="leading"in r?!!r.leading:o,s="trailing"in r?!!r.trailing:s),i(e,t,{leading:o,maxWait:t,trailing:s})}},EKpY:function(e,t){THREE.HorizontalTiltShiftShader={uniforms:{tDiffuse:{value:null},h:{value:1/512},r:{value:.35}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float h;","uniform float r;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","float hh = h * abs( r - vUv.y );","sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * hh, vUv.y ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * hh, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * hh, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * hh, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * hh, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * hh, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * hh, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * hh, vUv.y ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")}},ExA7:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},F64Y:function(e,t){THREE.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}},FDFk:function(e){e.exports=[{x:-9.437031321993494,y:7.136318591294291,z:163.4792770357133},{x:-8.926736976260985,y:6.300272477211468,z:164.77544648091327},{x:-9.351630434116434,y:5.853369048233947,z:164.60636941960308},{x:-9.334799801267737,y:5.689343131037479,z:164.82658482465888},{x:-8.717065404690736,y:6.2979269784546155,z:164.93183591245685},{x:-9.276667317322653,y:6.353083005866189,z:164.57427861326738},{x:-9.765537445076777,y:5.7160979935216645,z:164.58979612099583},{x:-13.860123466345797,y:7.1686838008297755,z:156.45273483377906},{x:-12.17465959789914,y:5.8134595530519135,z:160.1465103487842},{x:-11.083751148786032,y:4.754351052087902,z:163.43931901204456},{x:-9.985293899166852,y:3.6851470593103386,z:165.71435568873497},{x:-11.196328648556397,y:4.09546291100261,z:163.6410679611808},{x:-11.485163405456493,y:3.6796303521064466,z:163.85068560872003},{x:-10.899237215748201,y:2.907762339311148,z:165.80178871337498},{x:-11.78206250706249,y:2.635506591203498,z:165.27129421903942},{x:-11.898577905329555,y:1.6296054223927037,z:165.84918745975526},{x:-12.784122870045094,y:1.7106906143102947,z:164.21317012707732},{x:-15.41447718992151,y:2.865006458983075,z:159.83489719189663},{x:-13.035827298060285,y:1.3019921002580581,z:164.2956128595336},{x:-13.661631152686162,y:2.983208944091018,z:161.49975063324493},{x:-13.914843831383585,y:3.3592886332011958,z:161.01683259325043},{x:-13.464422407461853,y:3.60955952820623,z:161.3813626944809},{x:-12.736914326598834,y:3.7187576773574804,z:162.4725197666317},{x:-11.099772534408832,y:4.527472710780298,z:164.0984525911794},{x:-11.77395205666004,y:6.75056062697503,z:160.5615135661418},{x:-10.23976886843025,y:5.620181621329053,z:163.70567339285856},{x:-12.74498755436011,y:4.409825576673001,z:161.95566769190293},{x:-12.33699231202312,y:3.855631343921935,z:162.5542257504342},{x:-14.132315880645834,y:3.2468057431038417,z:161.44784453807856},{x:-15.54947209953676,y:2.300655217740612,z:159.5523912692293},{x:-13.021067303217553,y:1.2093815327184316,z:165.39040107396983},{x:-14.81326690958948,y:3.3084718597613083,z:159.52571717636363},{x:-10.349919375592664,y:3.4990028802260014,z:164.26351221734285},{x:-11.553954228032541,y:4.007090865323491,z:161.5408360178089},{x:-13.138561650278984,y:4.765838431920351,z:158.55044097145097},{x:-10.474970265251358,y:2.3674443284005164,z:164.92374556340516},{x:-12.856902615580292,y:3.0749544453961164,z:159.0232166661504},{x:-12.096708199779034,y:2.5579300011063566,z:160.70036727663995},{x:-11.403130361250131,y:2.126500567590277,z:162.80148253463796},{x:-13.741155199204158,y:2.926028145415742,z:157.37314391124454},{x:-10.359335573548885,y:1.1146989062021362,z:164.8687805533707},{x:-10.456230593826472,y:.32925705222357493,z:164.29530765920083},{x:-11.02028490292704,y:.28936433391798744,z:163.25507140670396},{x:-11.271431026619974,y:-.09347668528137731,z:162.24194722362802},{x:-11.359410026184023,y:-.16854352384334703,z:162.36150946603328},{x:-10.660961970328033,y:-.7980109183608946,z:163.4618756685158},{x:-10.25047735595959,y:-1.4811543084776773,z:164.34981037830727},{x:-11.987888726623792,y:-1.4009033524108183,z:160.72472327189706},{x:-11.640792594737137,y:-2.0714188627845616,z:161.68833093331236},{x:-13.553618056119632,y:-2.0883927826369586,z:157.1056033134471},{x:-10.71920111461389,y:-2.9165978996268933,z:163.22646466834107},{x:-9.775874142352183,y:-3.1057865248270033,z:165.19733735739914},{x:-10.978117414701751,y:-3.7141675996441315,z:163.24821198749964},{x:-9.987767856434413,y:-3.7907588692206495,z:165.06886555022697},{x:-11.48695060337027,y:-3.3805609487002464,z:162.00581261142122},{x:-12.787864471000798,y:-2.180070323536434,z:157.8154972156904},{x:-11.758320121628252,y:-1.8072207191324097,z:160.2179622276093},{x:-11.227554850885664,y:-1.575596252905072,z:160.9990215255819},{x:-12.188982084955597,y:-2.417525323532388,z:159.14285405474158},{x:-9.719273610506356,y:-2.6875222471079425,z:164.6889373576733},{x:-10.908410574513088,y:-3.7829586872306287,z:162.04300830205742},{x:-9.776382092408715,y:-4.175274027447422,z:165.00325627217092},{x:-10.104404927707433,y:-4.506432457085401,z:164.38175838316198},{x:-12.492589071598399,y:-5.865202361273543,z:158.77372619827526},{x:-10.39878739390292,y:-5.728122933475843,z:163.46866327287034},{x:-8.313231609225902,y:6.204255414849076,z:162.2984756206301},{x:-9.431922493681588,y:8.239674859760655,z:157.00757233249374},{x:-7.368126580970813,y:6.2065152476856795,z:162.59822866107018},{x:-7.052372297894252,y:6.78441613908354,z:160.9346024165771},{x:-8.185050008292922,y:8.938479972381089,z:156.56719897395138},{x:-6.444873664011039,y:7.6471178819843715,z:160.89457679673905},{x:-6.63458806746414,y:8.835238563731195,z:157.24398106175653},{x:-5.791879926003176,y:7.52944870353069,z:160.61195303502296},{x:-4.71864903622027,y:6.007495576534289,z:165.1767360890403},{x:-4.74330507362426,y:6.659090312153218,z:163.2182517682674},{x:-3.9008458065875296,y:5.971491977155232,z:165.91927294442527},{x:-3.5930438626809007,y:6.00485614781034,z:165.9242272292121},{x:-3.100495363539615,y:6.166654583503544,z:165.4405093553792},{x:-9.630669352459131,y:5.15827315807293,z:159.7953478212703},{x:-8.52692463583744,y:3.7551688949066886,z:163.19153214942816},{x:-8.39342188924772,y:3.4820447123172826,z:164.2382333972547},{x:-7.625835317534007,y:2.771760470705562,z:165.1374101834314},{x:-8.333203823752733,y:2.506956814185397,z:163.05947331198547},{x:-7.596659003004396,y:1.9215755106931738,z:165.38923859708416},{x:-7.726933588930027,y:1.6716316386772263,z:164.83178609498603},{x:-8.068036410058896,y:4.382594224713216,z:163.7691532238283},{x:-6.833672613982138,y:3.5939695467105004,z:165.5611181459428},{x:-7.205389414045422,y:4.752963760013973,z:163.07246002987665},{x:-6.7207662930612955,y:4.192659213700026,z:164.01146508773667},{x:-7.967846048284857,y:6.533741017178151,z:158.0581457781676},{x:-7.569676789037718,y:6.656477287711962,z:156.72676654698986},{x:-6.1134191239055635,y:5.010299614651679,z:163.5263228658133},{x:-6.149042822673643,y:5.274694539102693,z:161.88630013094075},{x:-5.2091712854229755,y:4.423645735596526,z:164.61522092677092},{x:-5.609951595579785,y:6.124317664995182,z:160.18725915302846},{x:-4.181938514149426,y:4.48865918239229,z:165.33774124157657},{x:-3.6886196685150026,y:4.8266565203438745,z:165.22938240114917},{x:-4.046046278050683,y:6.758048561142608,z:158.78155868145018},{x:-3.43157288104587,y:4.728473202082128,z:164.0385556515028},{x:-3.60774144757686,y:4.707162869717358,z:163.00596245738961},{x:-3.2539966085598167,y:3.7302326271252895,z:164.3413698220332},{x:-2.9672994470515413,y:5.189250708060015,z:164.00392032052355},{x:-4.0329320376779965,y:7.827816474192389,z:158.1027980837589},{x:-3.970202234988875,y:8.12637847911013,z:156.49593075249862},{x:-2.785346863457878,y:4.696528472206147,z:164.45356363940542},{x:-3.438993031332174,y:5.259863909200959,z:161.39418847422792},{x:-3.558910098324972,y:5.3798292089923265,z:160.5823118002157},{x:-3.3098963513706714,y:5.566530098184472,z:159.4053786022601},{x:-3.1554457130761264,y:4.361693031593241,z:161.68849489799123},{x:-3.121017838454545,y:3.1831672842323115,z:164.74317902858786},{x:-3.2865852820554835,y:3.6638499310095156,z:161.5999975784245},{x:-3.4622773151133046,y:2.476141459292151,z:164.74039080836127},{x:-3.8634565115366115,y:3.362759423966395,z:161.45038398945144},{x:-4.137148601749416,y:4.200692258601528,z:158.20523211674973},{x:-2.6575550175154916,y:3.060738062133126,z:165.2653811739466},{x:-2.976714943196292,y:1.720242479295191,z:164.7642050147026},{x:-3.051397365731212,y:1.1573465853182086,z:165.8926950540059},{x:-2.998908063036751,y:2.186402838295571,z:163.1119491342696},{x:-6.925264933437072,y:2.093092162223016,z:165.84676138896504},{x:-8.552427126750226,y:3.6515303583039653,z:159.15980620204607},{x:-7.839028028414559,y:3.626078347233161,z:159.70414676238258},{x:-6.473112356147395,y:2.6064571937584375,z:163.6897144452809},{x:-6.581911433303871,y:3.4568038438046678,z:160.48294364491804},{x:-5.554608804373382,y:2.713754184672581,z:164.8956489348405},{x:-5.067096646655624,y:2.3564166242493485,z:165.16011956974182},{x:-4.764773896409977,y:2.3335177552248183,z:165.51290978544202},{x:-4.732000726798606,y:2.7965493052037793,z:164.16054955463704},{x:-4.072838093060289,y:2.3095598161918858,z:165.71255718178102},{x:-4.4962577794981495,y:3.612056107340493,z:162.1743657766148},{x:-3.6611732631223433,y:3.1700661562154586,z:164.47655313161914},{x:-8.350585215717459,y:1.7890556479243536,z:160.83576861309353},{x:-8.255565379646663,y:1.629096057138657,z:160.4816550053214},{x:-8.676516353767889,y:2.6437300176352885,z:156.17213209058127},{x:-8.437627207540475,y:2.3535582211567707,z:156.43900466441696},{x:-6.5909815121090265,y:2.7468071368683837,z:156.18073529421812},{x:-4.6023537564105865,y:1.750134666100056,z:163.159980977653},{x:-4.109870952598227,y:1.60829807830239,z:164.1870189236258},{x:-3.6621225094299064,y:1.4682477288698692,z:165.35767180468991},{x:-3.4603775709783875,y:1.341138470861658,z:164.9584267330489},{x:-4.793838035416016,y:1.6802798494518427,z:162.54035842511232},{x:-7.131718241027238,y:2.4273568372650374,z:156.62099673883856},{x:-9.568561971713576,y:2.5697336283940615,z:156.410376601822},{x:-8.083741356877194,y:1.4208041768100372,z:160.77636426254793},{x:-6.6604837922578675,y:.9763213876625514,z:163.09674525448912},{x:-6.798478301593844,y:1.9066669491599697,z:158.90769525863755},{x:-4.854578491301016,y:.968370187710164,z:164.38682197236744},{x:-7.045955872946941,y:1.713559743097317,z:159.06669186133462},{x:-9.124433174517543,y:1.6324970112525428,z:160.43346231519948},{x:-8.72769537670413,y:1.1633717798326515,z:161.66993518937136},{x:-8.343619196201137,y:.9247686861913991,z:162.0230533278489},{x:-6.198120283913795,y:7.882435347018983,z:164.35881143739823},{x:-6.730138109304633,y:8.461114244274501,z:162.91248812825904},{x:-6.9674189266819475,y:8.609742518687096,z:163.45306772526828},{x:-7.188000192560482,y:9.203329471530015,z:161.87315975345868},{x:-7.293269857279556,y:8.49332951316726,z:163.94945618385452},{x:-6.108337475425767,y:8.207530495839428,z:164.96693472697595},{x:-7.144912583271683,y:9.625544678781182,z:161.19928385863363},{x:-6.667793136048301,y:9.743818497329286,z:161.0369339249528},{x:-6.7252442319361805,y:9.094300045686143,z:161.4280130760927},{x:-7.952631014178566,y:11.055719712990289,z:156.50101819930012},{x:-6.199535308341995,y:7.160675719132506,z:164.61555237803685},{x:-5.963091191962873,y:7.044286836575715,z:163.82574324210134},{x:-7.50525328178572,y:9.355855391663425,z:158.92952268808847},{x:-6.3082906838525155,y:7.133453862245702,z:163.0517221768634},{x:-6.205672817678574,y:6.735114136470415,z:163.3056450874049},{x:-5.942192043129193,y:5.280736173471574,z:164.05128122765785},{x:-5.442835410498912,y:4.3940319411466255,z:165.77825907713788},{x:-6.685821967449419,y:6.662618966657021,z:161.23164567769703},{x:-7.42310343977465,y:8.467532610622435,z:158.5030346511511},{x:-6.395519442590993,y:7.035736942644881,z:165.53203684686005},{x:-6.429743643666779,y:6.396091013641083,z:164.42502255735982},{x:-6.2624240906561734,y:5.36223756735324,z:163.50120784034672},{x:-5.983146311301466,y:3.522244517537956,z:165.5785823186767},{x:-7.703272088116657,y:6.022203308059808,z:158.11587532457764},{x:-5.906106843637797,y:3.9403486229913653,z:164.37005148294645},{x:-5.513752153988021,y:3.1346925298227006,z:165.59093122391792},{x:-5.658477144713778,y:2.5837330060350894,z:163.7310360160923},{x:-5.5865842898357165,y:2.3198154420385393,z:163.94787061199676},{x:-5.8989030698925315,y:2.0641462646248883,z:163.83472671921294},{x:-6.16663285097264,y:.8968449806957679,z:163.0381980067774},{x:-6.155297950443899,y:.31235772836944165,z:162.39650878795982},{x:-6.038884013253165,y:.11278946750398688,z:164.18591717831578},{x:-6.986451770329731,y:.6798764997572349,z:158.42955554805485},{x:-7.366680298748829,y:.35662874245590004,z:157.65281292454125},{x:-5.578783245149488,y:.3041718833792757,z:163.22997950709956},{x:-7.510965182736458,y:-1.1082739574350953,z:164.95435431152512},{x:-7.747276597379775,y:-1.2193382131909836,z:164.20572363347281},{x:-7.680634577257326,y:-1.357083039909881,z:163.73608922732177},{x:-7.688146871956629,y:-1.1950759426247792,z:163.09887327236117},{x:-7.779552556436444,y:-.74005301819615,z:160.16507765575932},{x:-7.233270608334479,y:-.645165949728586,z:160.47617929888935},{x:-6.823224597593622,y:-.6649498740263056,z:161.83047834532118},{x:-6.852030118607306,y:-.32616134243824035,z:160.6165375406207},{x:-5.833400806696796,y:-.7131831417827712,z:162.75878471118756},{x:-5.320776901849156,y:-.7274647703832997,z:163.9439174289153},{x:-6.18041756692957,y:.249752020421532,z:158.62937975415713},{x:-4.573628514706574,y:-.10157891019302312,z:161.71057744243905},{x:-3.8628309773129104,y:-.3207874891332452,z:165.1351305853226},{x:-4.24689531934181,y:.8158678561320514,z:159.20200525256132},{x:-3.4917257244946924,y:.05321769178081581,z:162.60070449597794},{x:-7.39573835239737,y:.042022288499488525,z:156.58148725912744},{x:-8.001072823188444,y:-.4928619705676951,z:161.05586468377152},{x:-8.779389744251516,y:-.8872551792464201,z:161.4285344080907},{x:-8.210604870132405,y:-1.4905166406999797,z:164.68471251484962},{x:-8.067769599391621,y:-1.6899301109809812,z:163.97163839160947},{x:-5.018888423261867,y:-1.0617842367914676,z:165.36374400457638},{x:-4.719811641838723,y:-1.05353344175591,z:165.44874276133532},{x:-4.90229015795193,y:-.6593667854231882,z:163.21438484192925},{x:-4.3245258420963495,y:-.11338522526767747,z:162.16580668277936},{x:-4.209400525339788,y:.7158691806538968,z:158.85626489911135},{x:-2.763382728253294,y:.13910290986631324,z:163.5597312264402},{x:-2.4358963762357106,y:.2371182487340988,z:165.1532324257469},{x:-2.308681939528931,y:.47277787907353996,z:164.42420833926442},{x:-2.153648383413209,y:.8991921985888673,z:162.0266142233415},{x:-1.815642827188249,y:.1993599429102133,z:164.47415587791383},{x:-1.8581297602314528,y:1.2498464953239363,z:162.60715622246792},{x:-1.5513215584543687,y:1.097841833495707,z:163.2868171875324},{x:-1.868659716280277,y:1.1325721081834033,z:159.55707723753147},{x:-1.5962651931857437,y:1.4383420121580954,z:158.38507122708216},{x:-1.66073539222376,y:.7032662771519043,z:159.36580831538242},{x:-.9633490979465265,y:.09757884570471731,z:162.86413567023533},{x:-.8943759584217119,y:.007955197759706323,z:164.0937423811875},{x:-.9140112291534841,y:-.23217711437944644,z:163.82396531166825},{x:-1.516551260257195,y:-.07354237093041505,z:161.49138131246988},{x:-1.5988773265928913,y:-.1742191595657161,z:164.1249460803753},{x:-8.91410262206545,y:-3.1928299307921577,z:161.4046829382386},{x:-6.656856757641831,y:-2.804644766508666,z:164.77966148625597},{x:-6.222079681619981,y:-2.650099939847319,z:164.71347535501792},{x:-5.603426031685599,y:-2.8074033159273455,z:165.7967073734739},{x:-6.752339193696324,y:-2.720720979004412,z:165.97265430666616},{x:-8.527888185738082,y:-2.961555104359377,z:163.9187797701286},{x:-9.721896584387437,y:-3.3176048355817045,z:160.45302528788542},{x:-8.006125634763519,y:-3.3497664435236985,z:163.0948524211006},{x:-9.554799452914153,y:-3.1511059090406235,z:157.54112584189818},{x:-8.955668728009076,y:-3.4422431472266695,z:157.693011540928},{x:-6.68091026856831,y:-3.1963500815003414,z:164.59416948028002},{x:-6.512111796716553,y:-3.3337240031264592,z:164.75516398273712},{x:-6.508735716275442,y:-2.5507650229627465,z:160.1236797738415},{x:-7.408496332635819,y:-2.8838133026509567,z:163.7407693640131},{x:-7.1688590947470665,y:-2.791250397729435,z:165.53837249462435},{x:-9.360202376610767,y:-3.357642020604672,z:160.8035709019008},{x:-6.4847440923264354,y:-2.9521965600851985,z:163.4875647052777},{x:-4.953622620023852,y:-2.9870559294806824,z:164.21917756811274},{x:-4.152432781747475,y:-2.8582660320840176,z:165.78163236143251},{x:-4.108808402228661,y:-2.5516927524156614,z:165.51098200581782},{x:-3.511431178834002,y:-2.0428322726159642,z:160.7588543720568},{x:-2.990314563906189,y:-2.2555745272052263,z:163.09317762799486},{x:-2.9019205830074135,y:-2.293084129278533,z:163.338285035846},{x:-2.697019338322029,y:-2.6888849545347604,z:165.02299630707887},{x:-2.828507801053732,y:-2.0461309456347543,z:159.34029709223023},{x:-2.235111538072026,y:-2.4116804163261136,z:162.44472557057117},{x:-2.638456568564031,y:-1.813486561501918,z:157.15110447007456},{x:-2.1137229969953353,y:-1.9370147588664999,z:158.36703543680278},{x:-3.1708949058209583,y:-1.9688161688580408,z:164.22305535111957},{x:-4.456729652870726,y:-1.7170871489009798,z:159.26923045230734},{x:-3.8701460699432317,y:-1.9799796470829563,z:164.17001434639997},{x:-4.074827584749556,y:-2.241318684322877,z:165.61485491337928},{x:-4.783776865900178,y:-2.269545351843334,z:165.70575083244077},{x:-6.102898037446023,y:-2.0765880576715467,z:162.76475945585756},{x:-5.705142306945126,y:-2.2029009017596906,z:165.6467290652559},{x:-6.711799517952812,y:-2.5859032719306896,z:160.5671025597182},{x:-6.09827687531725,y:-2.4047888694343484,z:160.93305484841102},{x:-4.927563307535543,y:-2.3882565924783705,z:162.50784696613084},{x:-4.361802119586606,y:-1.808994175887939,z:156.5331791838317},{x:-2.6737852259770563,y:-1.9361528481374712,z:165.0227103024471},{x:-2.7306318683288744,y:-1.449494903656472,z:157.5794458254827},{x:-2.6169996833464637,y:-1.5287797164776578,z:158.40839975334535},{x:-2.196554689050849,y:-1.48407895987922,z:162.6731723288121},{x:-8.7,y:7.5,z:25.3},{x:-1.6389234250966034,y:-1.1689491607181246,z:160.24848363627183},{x:-1.9573672132164859,y:-1.1907860095972467,z:161.35183371091605},{x:-2.91993870305096,y:-1.153781170012465,z:158.97701162235992},{x:-1.2640023318867755,y:-1.0370828007157868,z:158.2846868112028},{x:-1.1770262950985426,y:-1.6152163588670376,z:160.21975419785187},{x:-1.0374031401576573,y:-.9973567574567532,z:156.96317779465548},{x:-3.2648632428666673,y:-.7324579655703616,z:164.7895249637613},{x:-3.076626883876834,y:-1.1559709290838853,z:165.43964468989878},{x:-4.587083541005876,y:-.6212603834012924,z:158.48811141152572},{x:-3.754651198923078,y:-1.3470035352614573,z:162.41837800310924},{x:-4.087980044520743,y:-1.9343337252825066,z:156.68050745473133},{x:-4.284587133521338,y:-2.543743680665578,z:158.65212808169142},{x:-4.053496272091959,y:-2.7704693160251352,z:157.5591969323625},{x:-3.434400977640877,y:-2.8780637013236188,z:160.82061801932804},{x:-3.409898190918071,y:-3.2319149746635816,z:162.31427601374187},{x:-3.189598144959227,y:-3.2798430786325916,z:163.858104453166},{x:-3.185150093423914,y:-3.859409122111419,z:165.3636904814806},{x:-2.8855971151181947,y:-4.374056691692134,z:164.5084352658545},{x:-2.8069886854010235,y:-3.6731581530653585,z:164.64889008512796},{x:-4.659333834384345,y:-1.9609271998098343,z:156.06229766072215},{x:-4.280058006660363,y:-2.182429850708232,z:160.5117299495151},{x:-4.119127284974624,y:-2.722669859861444,z:161.00601594844719},{x:-3.40400009995129,y:-3.848228141676671,z:162.82991104057615},{x:-3.7377967459816297,y:-4.6051665752251125,z:159.8819055722964},{x:-3.893576616343239,y:-4.845884619376086,z:158.41115239597963},{x:-3.1732742008690273,y:-4.960276064430724,z:162.14495943646745},{x:-2.9814139817025946,y:-5.280998496132803,z:163.95909163120928},{x:-3.0171958594391057,y:-5.4349994802909585,z:165.34365495437993},{x:-3.2435508958843258,y:-5.890348961628193,z:164.74011150939037},{x:-3.9004021883003688,y:-7.5438005859537505,z:157.0243930785653},{x:-3.2387933567751475,y:-6.401373894216249,z:165.33394291759222},{x:-4.24057084819732,y:-8.041328236606713,z:157.16467381605528},{x:-2.998374508299406,y:-7.098739338048619,z:165.23584916712647},{x:-3.4292975766364435,y:-6.7760309823602505,z:165.71281978321073},{x:-3.7926167706166396,y:-6.749790848837129,z:165.23762544546915},{x:-5.188250774149976,y:-7.564779812038136,z:157.625480916164},{x:-4.613164186558496,y:-6.570786049780493,z:163.39723747052642},{x:-4.741068894776106,y:-6.393936525824877,z:164.44706527195083},{x:-5.2206681075582395,y:-6.112931339294905,z:163.08829247864185},{x:-3.8082314787063325,y:-6.186984483136495,z:164.91495568675475},{x:-4.574286291594802,y:-6.264104994992046,z:164.02819844721154},{x:-4.5404617864463415,y:-6.666768926690381,z:161.83488897875887},{x:-3.920366037470586,y:-4.727251157882488,z:161.0024444203523},{x:-3.2438302894932463,y:-6.173817599105922,z:159.27095911367059},{x:-3.257613191540152,y:-6.585612306560886,z:158.89355094049225},{x:-2.6115866863835464,y:-6.66676399452073,z:165.3420324718304},{x:-2.5597034940729273,y:-7.203225434855369,z:163.18385998887533},{x:-2.657015421295821,y:-7.7880792454198655,z:162.10726563518705},{x:-2.9701778862517685,y:-7.473368769458428,z:164.2353650686377},{x:-6.245429950424066,y:-4.068204202991144,z:163.51927732285486},{x:-8.13699828381016,y:-4.40174443251423,z:157.67938114503295},{x:-6.443587408503406,y:-4.646897674583048,z:162.71310618220213},{x:-5.634125174887119,y:-4.696066128390903,z:164.65843880759877},{x:-6.124475554624427,y:-4.287786779379941,z:165.77998229728217},{x:-6.444818524067202,y:-3.937489379098899,z:165.30682524247828},{x:-7.006046083577235,y:-4.287701604682601,z:160.80421936770153},{x:-6.983763093253836,y:-3.5942874365026327,z:161.87455353615434},{x:-6.248244507064866,y:-3.4309848660137554,z:164.6905657334529},{x:-5.462573471487859,y:-4.683949014145643,z:165.46571326519347},{x:-7.606662624118616,y:4.819871691460715,z:165.93970535690866},{x:-8.426006709947611,y:5.444090503694312,z:163.57143635799505},{x:-9.14574696163072,y:5.980389468140359,z:162.56621014310073},{x:-9.535250289867143,y:8.450477542924109,z:157.39725785312032},{x:-8.420805524349264,y:7.389402144478989,z:160.26304403902878},{x:-7.769080151904655,y:7.067035334501277,z:161.25330948181175},{x:-7.778310257004222,y:7.513858314096041,z:160.55136125290682},{x:-7.467912022959027,y:6.660556711049168,z:161.39578013452234},{x:-6.26931628197716,y:8.113832635327629,z:160.23081342252},{x:-6.945649232741884,y:7.568407685333884,z:159.51915446072746},{x:-9.259212004613389,y:-3.6251612842483105,z:165.76934771245053},{x:-9.738785920533282,y:-4.404160973102371,z:164.61992239399717},{x:-11.875716739101083,y:-4.822738329571958,z:159.4762990946695},{x:-12.784482617513833,y:-5.17345591229275,z:157.50865952632037},{x:-11.237374562996703,y:-5.300818788009334,z:160.81210603013332},{x:-9.353535510264335,y:-5.188648109863276,z:165.4199739946533},{x:-9.901346109360816,y:-4.060281529457015,z:163.7209507070454},{x:-12.953946538503622,y:-6.703842437673773,z:157.36445564650847},{x:-11.774432073014367,y:-6.831220521353307,z:160.10874609741506},{x:-10.726675665327718,y:-6.889969308162973,z:162.16204852707133},{x:-9.642043133157552,y:-6.482835005843679,z:164.51795888869205},{x:-12.741507599329944,y:-6.9050888778807895,z:156.62203818157826},{x:-12.80325001664436,y:-7.217343630677249,z:156.69276622722316},{x:-9.671061851122573,y:6.338680845648732,z:164.22066214388988},{x:-9.028260934356922,y:6.246010163767252,z:165.87800134872305},{x:-12.70413409213397,y:6.576963622210748,z:159.80456673803337},{x:-10.204337804738222,y:4.66498004084179,z:165.66872135611226},{x:-10.721817680134906,y:4.979373254304164,z:164.5357028163831},{x:-13.112010037730064,y:6.412737028551369,z:159.1989667796567},{x:-10.609525232537997,y:4.789449698938419,z:165.12693773906196},{x:-11.361357554073583,y:6.467169793637517,z:161.7141006571672},{x:-12.689126283319618,y:4.8392127321163585,z:161.5274644386759},{x:-14.047651104506782,y:2.863570115824359,z:162.25216016672385},{x:-14.9518458720659,y:2.8458911617952083,z:160.46834296038463},{x:-12.690282533278276,y:1.5354732038706516,z:165.84744591179935},{x:-14.092389761649393,y:1.1413294733998214,z:164.28340824017732},{x:4.360537442276353,y:6.935415662575572,z:165.05865527886644},{x:4.592933003965662,y:9.135037373318173,z:161.11403161087551},{x:3.8632762386712898,y:8.051341429326946,z:163.64858115907248},{x:4.061857076875121,y:8.374443459702157,z:162.3156116101631},{x:4.394974580073622,y:7.04307298758323,z:165.93774470833262},{x:5.659365019156564,y:7.984555490997511,z:163.19860516214595},{x:5.824653180438311,y:9.016018593743684,z:161.83147828346964},{x:6.9232749968393925,y:10.290416426429275,z:159.32083013184473},{x:6.319468077241925,y:7.484041317673842,z:164.97697077299094},{x:6.967997624667028,y:8.472083676824205,z:162.99713070645197},{x:7.4137817712140475,y:8.73654252098519,z:162.4542171248668},{x:7.361624529264901,y:8.041565499044356,z:163.80589921281205},{x:8.132602537477194,y:9.28153922586813,z:162.20283433062082},{x:7.723701002907486,y:8.092163492570073,z:164.6215077250626},{x:6.5555986111102555,y:8.18935417911959,z:164.38461493710656},{x:6.599573596806945,y:8.207728913580574,z:163.68039685741357},{x:5.670647477024335,y:8.663689732755167,z:163.04409438848387},{x:6.010929241230958,y:9.328168854669432,z:161.58835336365178},{x:4.856491502238445,y:7.4886518914513545,z:165.117297947497},{x:7.748758084658203,y:10.576538868240721,z:158.62645863513072},{x:8.460256288808303,y:9.037191667865994,z:162.97915165381963},{x:8.659383775286315,y:8.936951492284937,z:162.95205777710297},{x:9.432131679348448,y:9.29032435275138,z:162.06213403909464},{x:10.087368212361014,y:10.179176579132161,z:160.9714082429667},{x:9.824379256766463,y:9.123653040382944,z:162.89799869467217},{x:8.920963106025663,y:11.753001169232043,z:156.86388515420714},{x:4.521879149285759,y:8.178871376874348,z:163.4717063826098},{x:3.168454335089706,y:7.294448001924259,z:165.14527751953614},{x:4.714919399714113,y:8.983957985370246,z:159.81720814351598},{x:4.572804203733327,y:8.24225207498462,z:161.91807215483126},{x:5.248845962773558,y:8.518428672717533,z:162.34281719778988},{x:9.068472943170303,y:8.540264177175409,z:163.24834645718732},{x:8.927630743194896,y:8.53340903748635,z:163.25881899905787},{x:8.76066616718889,y:7.866704847335075,z:163.53181671071047},{x:8.337983695181528,y:7.711282623405289,z:164.09967612550867},{x:8.110660854971592,y:6.855172071718478,z:165.23112625441874},{x:8.551640230525361,y:8.00373245798653,z:162.89196075279062},{x:7.316342841674928,y:6.183623105030975,z:165.8785054201271},{x:7.414180190230411,y:5.959827735513834,z:165.58163021186687},{x:7.357691441037186,y:5.637572914086366,z:165.8139329981813},{x:7.981156649675558,y:6.667690556722974,z:163.09068616964046},{x:8.0054604486321,y:6.463121422502354,z:162.81661928480713},{x:7.470032711981432,y:5.872005907233273,z:163.44735802053265},{x:6.416835215935102,y:4.447612893976036,z:165.41690417219738},{x:6.040659997133115,y:4.245243660581455,z:165.11434987941442},{x:7.670779528822365,y:6.597983579468341,z:160.65979507381346},{x:7.511113266313387,y:5.5554171736217555,z:164.5587475100574},{x:6.977410596109756,y:5.953426445812902,z:163.2149165815513},{x:6.99984053350591,y:5.316805500938393,z:163.13160839095892},{x:8.370376941462297,y:7.462102943916776,z:156.1745428058349},{x:8.688601579619046,y:7.643961035344411,z:162.21752929108953},{x:11.225787877470104,y:10.71746530630703,z:157.4107586784422},{x:10.229936529022723,y:9.129311174446872,z:161.2052247446594},{x:11.009517216137866,y:10.367809131655417,z:160.04470251706232},{x:10.03314105483718,y:8.480542003056861,z:161.59129473440248},{x:9.61873959166418,y:8.52390020548033,z:161.6296677659756},{x:8.29325283060486,y:6.547275762198275,z:165.55769289448438},{x:10.01014150866692,y:8.836002434109467,z:160.29769645723667},{x:9.762888542015453,y:8.805019791256896,z:159.6679081422269},{x:5.77745073933448,y:4.9748806349324255,z:163.3287528785787},{x:5.626549596381025,y:5.086437660284169,z:164.57007607780906},{x:5.765754944025048,y:5.013278124777763,z:164.5290668842805},{x:7.83706986149058,y:7.187975072575412,z:157.37891679719064},{x:8.111607368134557,y:6.173429877646164,z:156.8487939919383},{x:7.153020290725294,y:4.47062623910395,z:160.47032482908173},{x:7.490072530199548,y:4.640666124247499,z:159.91054432025652},{x:7.370873265442484,y:3.8409303406638244,z:162.11693070713602},{x:9.003761642743513,y:5.37540655332398,z:156.18557324643456},{x:8.040671178589243,y:3.679569337247173,z:160.23787031562952},{x:7.734939952034523,y:3.0351100135458076,z:160.71952304518155},{x:6.7518482855432715,y:2.257248384744443,z:164.89847132627295},{x:8.558901278817483,y:2.3751446215676992,z:158.28080631973927},{x:7.182606793831383,y:.9587463613425555,z:163.7576028429957},{x:7.654383319882612,y:1.1387336071986738,z:161.3072270024888},{x:6.996009316671675,y:.005461910983257212,z:164.30871816947632},{x:6.6745542243898655,y:-.6810821430747112,z:164.96741891518127},{x:6.569287277135196,y:-.9776500537058581,z:165.04437923913966},{x:7.403790609898522,y:-1.0819575556132506,z:162.9949679327578},{x:9.100477551588739,y:-1.1249896849185959,z:157.33429035942635},{x:7.547346585804515,y:-1.6434933909817744,z:162.3305621185512},{x:6.892271544521556,y:-2.1140985609183787,z:165.19615531834194},{x:7.7714685879434064,y:-1.7071780750454835,z:162.22947974057448},{x:8.80899135823747,y:-1.3914034659260537,z:159.5169703766635},{x:8.193369723976367,y:-.6151020838885302,z:161.55504397545766},{x:7.332530639950818,y:-.3058639615963976,z:164.19342017710932},{x:7.210043116328073,y:-1.777176340979345,z:165.96583240872158},{x:7.636434978867676,y:-1.9669391887262044,z:164.25229414252198},{x:7.624558862228589,y:-2.494583256188683,z:164.7785317026703},{x:7.817690230514415,y:-2.594851218769083,z:164.28288559523222},{x:7.46953903500545,y:-2.8901314892504537,z:163.79363038853137},{x:7.17280775090785,y:-3.5113322093034505,z:165.2515840042263},{x:7.449146024260067,y:-3.9387450998586715,z:164.54267248809794},{x:7.264812713546203,y:-4.242156574789062,z:164.62692605001973},{x:7.532163248224791,y:-5.46485352262521,z:163.91388887757086},{x:7.86451687355396,y:-5.951270594200322,z:162.7976632980769},{x:7.080300019011958,y:-6.082700727939665,z:164.99767288045234},{x:7.229495854099088,y:-6.549746788120627,z:163.65643863155526},{x:8.671135088694022,y:-7.411616912298102,z:160.19685071621757},{x:8.784990355640517,y:-7.467905228247957,z:159.14330186917266},{x:8.923756643774851,y:-7.901047357896509,z:158.4305389441796},{x:7.498214034938453,y:-7.404343079270488,z:161.87660719206235},{x:8.08318558115036,y:-8.116311995674153,z:160.39202494851406},{x:7.922635429965634,y:-8.336854545625618,z:161.29917299616977},{x:8.701003698127288,y:-8.412161658395716,z:156.12723564533403},{x:7.6890859934886,y:-7.941082482500379,z:159.10693705253425},{x:6.891870469992654,y:-7.077622737068543,z:162.6119841855031},{x:5.778694098681562,y:-6.635420431351964,z:164.4570838974362},{x:6.76317530306828,y:-6.897897667533295,z:159.5312827069052},{x:5.8585232695485985,y:-6.73292591283686,z:161.1128750455536},{x:6.855356623910573,y:-6.6484916526470705,z:158.08998878964843},{x:6.41145693279568,y:-6.748195173847016,z:165.17086850388023},{x:8.041268802661996,y:-7.57048652184416,z:158.29708644656077},{x:8.283465870076647,y:-7.585233092027659,z:156.62264795195142},{x:6.779729208689194,y:-6.453167135273263,z:160.22861763072638},{x:6.521894195148342,y:-6.461081235452042,z:162.4097527929307},{x:8.42045454854616,y:-7.17048645069986,z:157.89344744909897},{x:5.606666105023166,y:4.584434203295807,z:163.83422584748533},{x:5.309376350903481,y:3.413173177181026,z:165.89051435638706},{x:6.336020516857552,y:4.152383250555019,z:163.11959781294883},{x:5.995863073037533,y:6.159477502577417,z:159.96192478177807},{x:5.309038207636494,y:5.412545672640938,z:162.03963089068063},{x:6.341663655323302,y:6.149883629900799,z:160.73823721755846},{x:6.489583777321009,y:7.032763353124363,z:158.70129234380425},{x:6.185485743171402,y:3.0912718191727073,z:164.11948654949833},{x:7.280980879782479,y:3.135751341793007,z:162.9148928465047},{x:7.54725943848981,y:2.6930214249985873,z:162.2731307833535},{x:7.8706292449667785,y:2.3938837699365862,z:162.41071271646518},{x:6.949608110286309,y:1.3900898356561875,z:165.72723348815285},{x:6.923920597749689,y:.9955350669921437,z:165.87807016324595},{x:6.889187981175297,y:.5599062438185065,z:165.57668763897738},{x:8.581683451229118,y:.873362473824173,z:161.60404626675142},{x:7.865103880693276,y:.308067511195933,z:162.72486737149694},{x:7.830974410430791,y:-.1548234213353794,z:163.4612348625219},{x:9.447331897826736,y:.07437091621810765,z:158.4904239354961},{x:10.242890866136047,y:-.827811739584881,z:156.504398009935},{x:7.676452372055607,y:-3.1861765162974542,z:163.243715989368},{x:7.91842079450219,y:-4.689490003818397,z:162.8392687862168},{x:8.688999065202285,y:-5.738949132045095,z:158.76539643328726},{x:6.777343429864004,y:-5.441354185303533,z:165.11527171343084},{x:7.6644560939093225,y:-4.561858851670939,z:164.28794006220232},{x:5.374363595509351,y:1.875087033454335,z:163.3497945920637},{x:5.878548816275504,y:1.5946085194930681,z:163.1868474423604},{x:6.525977275418427,y:2.2295351046790657,z:160.47589198632733},{x:7.121744220251731,y:2.4269658899793995,z:159.84664565509206},{x:7.11311246101954,y:2.5380924908310902,z:160.48167241650472},{x:8.120288033082286,y:3.0320501711564347,z:157.75819284103682},{x:8.710311781132827,y:3.149455341438923,z:158.33799111237624},{x:8.562720678041991,y:2.9265618799587116,z:161.63633406646866},{x:9.655617621875649,y:3.240572820731387,z:159.90156338038307},{x:8.052821470096898,y:2.433718074541833,z:165.00781375594966},{x:8.975984134003212,y:2.3893452066879135,z:163.84916161924545},{x:8.792617785129721,y:2.271187886784638,z:162.9680685022691},{x:7.755831910779474,y:2.3928557405815276,z:159.51843284852595},{x:5.603515650172302,y:1.0689953646215855,z:165.263772704519},{x:4.983963830963816,y:1.0053474480517544,z:165.445656294887},{x:6.230923675341799,y:-.9157132215015729,z:160.64484294489148},{x:6.254484326533376,y:-.980280906757784,z:161.4468540605439},{x:7.212956649539322,y:-.37733019854811545,z:158.82488227840352},{x:8.043857928289533,y:-.09202736354520624,z:157.13008119624806},{x:8.02864126274737,y:.12782118435021417,z:157.53400073276202},{x:7.956713215548685,y:-.15736190779491466,z:163.94196132225784},{x:7.630431288335426,y:-.1979599268732528,z:165.21675461163545},{x:10.352857220514771,y:.7712914060235505,z:157.49420425728704},{x:9.305231866248889,y:.2243000947428726,z:162.87154481674108},{x:9.99571449605364,y:.08903654893425994,z:162.030381494378},{x:10.090557191387902,y:-.018314736359492656,z:162.46027338734626},{x:10.151102487412118,y:-.12573868981287717,z:162.0334326592151},{x:8.385338965226445,y:-.6317679538604821,z:165.58434490032133},{x:7.940362050597596,y:-1.1013070369772926,z:165.75029134993775},{x:8.085490162452924,y:-1.1558757561862087,z:164.04226640038644},{x:8.847486131266827,y:-.8094152703765545,z:161.0754717161294},{x:6.283498046007303,y:-1.3550554602827702,z:165.21219731070573},{x:5.7832795603531935,y:-1.2844916694096113,z:165.2865362738753},{x:5.277238157016573,y:-1.6513761043754087,z:165.37039402913587},{x:9.703486932144703,y:-.07636555803207656,z:157.5249894865448},{x:8.114507894413478,y:-.45909064308627023,z:163.4919133687669},{x:7.941973322429714,y:-.8417114711864642,z:165.64561610783164},{x:6.1090256997492,y:-3.42720515322112,z:164.83360884694952},{x:5.812224104871522,y:-3.6045946991372624,z:163.96576502821287},{x:6.165268018554741,y:-3.4693019634146722,z:165.026287988163},{x:8.569870487173034,y:-3.4494390992942137,z:157.29486440715442},{x:7.422664195453599,y:-3.1438389997479277,z:163.38408026009478},{x:7.9640125419746965,y:-3.030261077180036,z:165.6441032388421},{x:8.932407054569282,y:-2.4662346111380984,z:163.43696149204334},{x:9.929640702313218,y:-2.810181199749657,z:162.3996356090453},{x:9.837252923734638,y:-2.2743565607031897,z:163.39412241991107},{x:9.920568090677875,y:-2.7910709600729255,z:163.68654237312478},{x:11.10486774014064,y:-2.60635303199588,z:161.19895097860137},{x:11.37674916690834,y:-2.1532727739470836,z:161.41769884655042},{x:8.909534453085783,y:-3.057283862824896,z:165.86368052564183},{x:9.01801512892133,y:-3.2446299598416246,z:163.71922837506673},{x:9.037414105455817,y:-2.9434330467930536,z:161.61595124766004},{x:9.347265269648144,y:-3.392073083963787,z:160.31863396934347},{x:9.325296924282203,y:-3.2692976274099976,z:160.19908730200967},{x:8.380358310405704,y:-3.5976668823801994,z:159.62475693954704},{x:9.000774022421965,y:-2.9603554654086324,z:159.52584070914472},{x:11.694393297460657,y:-2.3672356690460106,z:156.88959688191454},{x:1.7760020346424383,y:2.897669437485977,z:163.785293900451},{x:2.4722503714438986,y:3.14119618946372,z:161.98173841189566},{x:2.7802946795097654,y:2.9521616942768887,z:161.9381682945888},{x:3.3076800601894973,y:3.83173937475787,z:159.50995222318392},{x:3.986003529480435,y:3.589868575246136,z:158.36892962766524},{x:3.5125533694114637,y:2.783064421476773,z:161.25497854312948},{x:4.128640750334604,y:3.1522245151660755,z:158.6516953745686},{x:2.44440793731167,y:2.025160222213664,z:165.35217848150398},{x:2.6985996987977074,y:4.357700995953017,z:157.7816545405833},{x:1.2658087394081647,y:3.2328947083990727,z:165.29827445477753},{x:2.2215566713098767,y:5.437935146511251,z:157.93708910338853},{x:2.4137723576256036,y:4.8514814380076565,z:158.7418021406396},{x:2.5231641060850833,y:4.0896396888028335,z:161.88696791203495},{x:3.3890720784964827,y:4.981481151490694,z:156.75610649324875},{x:2.8434741724049033,y:3.152875546972158,z:164.2699332650147},{x:2.9901580372055037,y:2.743079893801035,z:165.0385161610812},{x:2.8880933131762205,y:4.139890771435908,z:161.4265219109643},{x:3.8573324995599307,y:3.70811084775476,z:160.11955642691166},{x:4.1277896072464415,y:3.7594295731097134,z:159.85830089741438},{x:4.173378048494641,y:3.6316073998066685,z:159.3568696323389},{x:4.1679060112504445,y:2.716652500045001,z:162.04139157291883},{x:4.260409533395695,y:2.5777726388861666,z:162.17395603097168},{x:3.516101404050744,y:1.5965471988801205,z:165.62282528604447},{x:3.955262383439681,y:1.835225471646524,z:162.3975902700928},{x:3.214955245082294,y:1.2636136336943515,z:165.1372954353403},{x:3.242263546156856,y:1.1067622996893078,z:165.14964077030746},{x:3.1293570655123126,y:.8485597491134129,z:165.41950544850954},{x:2.909125955554906,y:-.23722431328519633,z:165.64703333599812},{x:2.938729052391807,y:-.5419164877213163,z:164.482260961971},{x:2.809301886840558,y:-1.118099505735639,z:163.59791036898656},{x:3.3928203814323155,y:-1.4868479200173113,z:159.56817808273536},{x:3.0336806461100707,y:-1.5657954130042455,z:160.12860579384304},{x:2.2980607480326576,y:-2.0866230473153102,z:164.23569796407156},{x:2.9108631254749184,y:-2.147834891033142,z:160.07956186941118},{x:2.910988994638835,y:-2.553647356906037,z:157.0918115404356},{x:2.2069752791335517,y:-3.58234542593258,z:163.33120842198295},{x:1.8598008744671901,y:-3.9150683479605135,z:165.53744065595748},{x:1.4837729981632108,y:-4.066119917474138,z:163.7861668720658},{x:1.452435251597322,y:-5.174989046658238,z:161.11592904741153},{x:1.2749931342526999,y:-5.20967085101371,z:164.3850800998441},{x:.9929473532761008,y:-5.733046631657803,z:157.44223091191654},{x:3.129330230073979,y:-3.4966462884666143,z:156.11409640057104},{x:3.1378610694434705,y:-2.7530040694985587,z:157.85091117903005},{x:2.7425670386774854,y:-2.552270642679659,z:163.84778382047907},{x:2.8815010506525063,y:-2.4579877693513907,z:164.5546317360794},{x:2.951959371099761,y:-2.1097248256842427,z:165.6706987500241},{x:2.953997538798923,y:-1.6446763987187296,z:165.08260233287857},{x:3.254139919757371,y:-1.5396513413669055,z:164.69833974335018},{x:3.4795687846488477,y:-.8957004053619144,z:160.82006977960123},{x:4.391300231741084,y:-.12184148653600957,z:156.06428119630658},{x:3.73032916041722,y:-.14876223057378724,z:159.60692704339607},{x:3.681663091207721,y:-.492005317240487,z:163.38722960620012},{x:3.669497828983708,y:-.16460343948527623,z:163.00341386152422},{x:3.199002110734817,y:.16658847234609198,z:165.41895591229394},{x:3.920770109098548,y:.7136262891624945,z:163.09772426732036},{x:3.6623484174789738,y:.6092576932610498,z:165.76457825598976},{x:3.70228684957409,y:.9855422774862248,z:164.98195499582124},{x:3.7423451101191247,y:1.2612737737170576,z:163.78396230492916},{x:4.310492388930189,y:1.5771748198511375,z:162.84346049440143},{x:4.147795711707893,y:.6604128067548203,z:161.9405488084723},{x:4.366475448184648,y:1.0699030123045539,z:158.88841048654996},{x:4.405192329955323,y:1.0214191880296042,z:158.71279737256137},{x:3.638255055750797,y:-.7891163140215625,z:164.48460341132883},{x:3.9119504165766372,y:-.7682510571392775,z:162.3723972497666},{x:2.769813649628059,y:-2.633191312059129,z:165.42519791350284},{x:3.2940684057308474,y:-3.1051676890088302,z:158.7262541511986},{x:3.336778576690307,y:-3.6054098817904006,z:158.6095029687669},{x:2.8571528575845733,y:-3.8726960872195733,z:158.61748041255947},{x:2.591728827967536,y:-4.258685408899483,z:157.88387246836157},{x:2.372824515789283,y:-4.794314299967004,z:160.2667454633488},{x:1.9426250695477343,y:-4.94156314227844,z:161.29017975256897},{x:1.4217428531614047,y:-5.323513679264273,z:162.59065542881706},{x:1.196273974061846,y:-5.729711040728409,z:163.73975623219735},{x:10.37415024363731,y:3.6756836548276617,z:165.52544528166777},{x:11.71172559693078,y:4.601787960384787,z:162.04417062009506},{x:9.783465843219421,y:3.4334080972955334,z:165.50043779016522},{x:10.89217608850996,y:3.7244093906489795,z:162.6751706251287},{x:10.77950649859514,y:3.9912722382076993,z:162.10819310489896},{x:14.427899641193292,y:7.152482824446295,z:157.1335366060039},{x:12.439383266807823,y:5.69245335135281,z:162.10082980180755},{x:10.775901206132588,y:5.188611725190686,z:164.85406080364095},{x:11.02627359334842,y:4.674861224270515,z:165.27080835301683},{x:13.414966405757525,y:6.575709815835424,z:157.89602531156692},{x:12.569259363267037,y:5.725860967185319,z:159.70338340338074},{x:11.918460461115892,y:5.777925002371724,z:160.7506237827518},{x:12.471255694835115,y:5.442678667785543,z:160.28315401374772},{x:12.098086417513102,y:5.152006652723884,z:160.18542030589674},{x:14.091597581977183,y:7.54345773959141,z:157.3309064902308},{x:10.052090897600763,y:3.306922611244694,z:163.571846938984},{x:10.340528964286541,y:3.431142596834693,z:162.8103897269023},{x:13.243564510284841,y:6.102570214721268,z:160.14327991132132},{x:10.28892061719894,y:3.3953202081378038,z:165.2234250553375},{x:11.523198552197247,y:4.040829824202596,z:162.53492565806152},{x:11.783358476185015,y:3.9784073037566436,z:161.17630557814562},{x:11.494728473325793,y:3.5649965547374585,z:161.9105214851851},{x:11.586782256544623,y:3.722613926026277,z:160.89792719759475},{x:12.441664005260755,y:3.8957593018484005,z:158.14056418049827},{x:11.455027324212843,y:2.935737174965311,z:161.0809548496299},{x:11.615741085739735,y:3.231822604230743,z:159.9888968733012},{x:11.35139671544757,y:2.8458975973660117,z:161.65977071621813},{x:10.510055745691893,y:2.3492040769074833,z:163.56887144191285},{x:10.752225067864636,y:2.3361089020674797,z:162.52368655956806},{x:12.285880731914169,y:2.8425343362269544,z:159.11456450806253},{x:12.194302569574134,y:2.860960067148717,z:158.5673855747653},{x:13.270744247693855,y:2.9172283992090975,z:156.36749161396244},{x:10.768005645609637,y:2.7646429234504595,z:161.44557555673111},{x:9.268890221092256,y:1.4850802757736474,z:165.20559149924622},{x:9.32375186554762,y:1.2651131863359382,z:165.07748563140376},{x:10.881167747118276,y:.9597526047119231,z:162.75450078876878},{x:13.472990670522513,y:1.469866507105941,z:157.06593878989858},{x:11.317518115387024,y:.3824718368343909,z:161.64071876220837},{x:10.861811058843031,y:.028698576628379158,z:163.0082401799648},{x:13.18477502198072,y:.40414859939720316,z:157.77848873398807},{x:11.316297901176611,y:-.5179998881089531,z:162.72780406182682},{x:10.780346375771124,y:-1.45325851659927,z:165.21714824496394},{x:12.535537590266273,y:-1.5259826719069025,z:162.07514767688662},{x:11.286244622971822,y:-2.026604303725801,z:164.86790912700417},{x:11.693256108641332,y:-3.209586589306774,z:164.7743058858229},{x:12.413650408407037,y:-3.6364357429834193,z:164.09573937456614},{x:13.917144381553896,y:-4.567905185602621,z:162.12866777560407},{x:16.637505945142763,y:-5.121119183074541,z:157.58620669434487},{x:16.840653109001373,y:-5.5442943295989355,z:158.08574832487903},{x:15.78206879568745,y:-5.179346670825273,z:160.2715952848347},{x:15.83124949115178,y:-5.6732235194630665,z:159.9202962570792},{x:13.912269177257997,y:-5.420097980092997,z:164.03290639950063},{x:13.57431558225133,y:-5.695463619112617,z:164.57537429276718},{x:17.487685378976906,y:-5.048402979182471,z:156.19713843853992},{x:16.756229070644075,y:-4.622757028799329,z:157.662426757863},{x:14.676862222255195,y:-4.142631262476497,z:160.83129473046853},{x:12.550825543002105,y:-2.299431451902141,z:162.24564080951868},{x:11.699967790351398,y:-2.329106807878219,z:163.8740339837872},{x:10.82281617697264,y:-.9641903301609318,z:164.9252833692579},{x:13.003080826965274,y:.46242399374420984,z:159.44988946621976},{x:10.603933743659198,y:.24338924394394112,z:164.95220238480297},{x:10.45246479529478,y:1.139030111229438,z:164.45189287300053},{x:14.043744014907247,y:1.237154384456744,z:156.49297609638148},{x:11.532760038256527,y:-.19392989766021174,z:163.03612686634474},{x:12.46575640928458,y:1.01309881233135,z:160.59909586237245},{x:10.659945633542911,y:1.1327297824328575,z:163.9550582572296},{x:10.803750723455543,y:-.05967684585409927,z:165.0991618794468},{x:13.429106844107153,y:.2944696775755844,z:159.47822910688677},{x:13.404448284513052,y:-1.690824418548182,z:160.50209596959482},{x:11.633042532148483,y:-2.1520333424959475,z:165.2228583447872},{x:12.473579969923101,y:-2.455059609575862,z:164.17464880107144},{x:11.640002552732057,y:-3.1163535432704847,z:165.7317378515657},{x:11.758105997939552,y:-3.426204515042901,z:165.60897961951122},{x:14.978749647245742,y:-3.509690169756496,z:159.82088469549947},{x:13.47212093521739,y:-3.6269173344649346,z:163.7306514749732},{x:12.689476329720506,y:-3.9492815662472047,z:165.44934400919777},{x:12.624302437540756,y:-4.370537848202245,z:165.91188321936033},{x:17.03680301891113,y:-4.913734847210511,z:158.96296569689946},{x:14.46663641984533,y:-4.433818156967817,z:163.41004349073899},{x:14.447692459115615,y:-4.006102527548618,z:161.77513237477964},{x:15.305234888785968,y:-5.390688018651346,z:162.19252459169667},{x:18.27426895718075,y:-5.399254564541431,z:156.36433533224582},{x:17.81087302148552,y:-5.242840061382985,z:158.6645468017119},{x:17.946506683324117,y:-5.040659809010055,z:158.98487529651703},{x:15.338394442260643,y:-4.585523883010358,z:163.00017476325962},{x:15.621273893752992,y:-4.618946767725314,z:163.3401215410886},{x:13.964222863918401,y:-4.587048226661858,z:164.71162580789473},{x:13.631195440709007,y:-4.102958610467775,z:165.47681337645068},{x:14.652624284051527,y:-3.9681918645749974,z:164.28542999587447},{x:14.522794053857439,y:-3.9050466722415678,z:165.6212188049343},{x:16.416173193646088,y:-3.8559321379117577,z:162.28251812696203},{x:16.23558352180556,y:-4.207123190361726,z:162.02400195227878},{x:18.315930452251493,y:-5.133108356008034,z:156.4232604838134},{x:9.724821796805205,y:-5.710701421976125,z:158.31332763313495},{x:8.778993222595233,y:-5.184065098591466,z:161.7011812508947},{x:8.650044241518877,y:-3.994596081712327,z:161.59826775635636},{x:8.112099794469732,y:-6.020177989551687,z:163.62047310140886},{x:9.526771861275847,y:-6.893638125966648,z:159.44521607816614},{x:7.6338702582922195,y:-6.567179273103072,z:164.6605961881735},{x:8.169433007183635,y:-5.9148174678506305,z:163.41364518019526},{x:8.665240399378462,y:-5.601563247409969,z:162.58853085700073},{x:8.340731716131103,y:-5.5016900138458436,z:163.85445347766574},{x:7.776437979514242,y:-7.264345513210175,z:163.3238925413783},{x:8.834610888263448,y:-8.147499923381831,z:160.1454131589599},{x:9.11298124482802,y:-8.73593167482463,z:159.46589287276996},{x:8.326380279648077,y:-8.584782269194662,z:161.4427676977234},{x:9.570719180464646,y:-9.132642695526796,z:157.4924870383569},{x:10.703890385086751,y:-3.8471494489543616,z:157.02153864585523},{x:9.402845047402657,y:-3.548602883135441,z:159.85181751100907},{x:9.604263739769586,y:-3.5241752630397016,z:160.3950934918684},{x:8.419270079793169,y:-3.51821928236534,z:164.12866693599008},{x:10.389837736213252,y:-3.734774892235695,z:158.20472642262308},{x:-9.563652051053682,y:5.604039105655048,z:165.89164842377886},{x:-10.667697446906006,y:7.041052448450273,z:163.0985509598426},{x:-9.942704047296331,y:6.872754843875867,z:163.7103450091724},{x:-11.203113124456854,y:6.593821072680399,z:162.35103010066513},{x:-11.36090400376328,y:6.072848955719081,z:162.6921522970087},{x:-13.900813310223263,y:7.9144117726009,z:156.88539303754894},{x:-12.647248469574723,y:5.0633199685867325,z:160.5757150384112},{x:-12.318244135512888,y:7.107544082294439,z:158.70621639247014},{x:-12.860641891365834,y:4.171592011424092,z:162.4439631437711},{x:-11.451945271102595,y:4.5391353329477795,z:163.95465615586014},{x:-11.081013319405155,y:3.338016369844077,z:164.01117465539403},{x:-14.035768546842267,y:4.569120623885155,z:157.91060012200677},{x:-12.254584011804726,y:4.693134019269387,z:161.16623040592225},{x:-10.022170172684985,y:3.575713271125089,z:165.54501314735765},{x:-12.564979948222827,y:4.531719957573248,z:160.4421073940406},{x:-12.955005552089425,y:4.401895825755506,z:158.31230442432488},{x:-12.084907133108862,y:3.564932641468552,z:160.0773699251075},{x:-11.055812663367863,y:2.888974281232315,z:162.17172028283295},{x:-11.439328271219882,y:2.455409338183607,z:161.61026479525128},{x:-13.361219546679477,y:2.754746686177345,z:157.20255189519955},{x:-11.992490954975281,y:1.9683824442482774,z:160.41505236987206},{x:-9.850623124408555,y:1.1265212576604426,z:165.03220192049275},{x:-10.645872738096589,y:.9478328885170484,z:163.76423034750837},{x:-11.251894440873293,y:2.4270100825229513,z:161.7842042129696},{x:-11.960044035288169,y:2.656281102047366,z:160.2108712052988},{x:-11.04119004844554,y:.7177573005288984,z:162.99531681292177},{x:-12.326180647239786,y:1.097522243173124,z:158.9416632528006},{x:-12.590825257963578,y:.8059001157660717,z:158.53323306611128},{x:-10.263981179624375,y:-.39539856585903976,z:163.8458840210393},{x:-11.140785729368234,y:-.12262416834268208,z:162.26886952665603},{x:-11.21122794179775,y:.3140130808694792,z:161.06157783642607},{x:-12.210182201481485,y:.5142719934172746,z:158.79911393867903},{x:-11.620629755335505,y:.6136252800741815,z:160.0502229240068},{x:-11.907589112902661,y:-.7350720816684309,z:160.42925360931622},{x:-11.113537981993602,y:-1.0810516859508468,z:161.49269891037576},{x:-10.241667827666063,y:-2.410068816182111,z:162.922781466826},{x:-10.383250879761032,y:-6.4262410252111835,z:161.52126753164342},{x:-9.436552934884226,y:-5.760394995581892,z:164.20217107074757},{x:-11.018817602865631,y:-5.041636501553928,z:160.4399882453007},{x:-9.140048285725042,y:-6.3099119137287385,z:164.66476513351304},{x:-8.128997792827137,y:5.343019007068648,z:164.52945113353792},{x:-4.831388390293068,y:6.089625875704687,z:165.7582426580359},{x:-6.0635232987559995,y:7.7731022039513675,z:161.8219879750044},{x:-7.11215086829978,y:9.205392088381792,z:158.08091839137717},{x:-5.9820470855859575,y:9.43815416478295,z:156.65123314728925},{x:-3.472021977266966,y:7.383165724239742,z:163.01458810809035},{x:-3.0796121970014845,y:7.22750046211873,z:164.33901654669046},{x:-5.249227638773588,y:8.74379665156205,z:159.68499841431984},{x:-5.732749569103746,y:9.610706819803731,z:158.07832648266717},{x:-5.953633892291421,y:10.119127701660993,z:156.40801376342444},{x:-4.212290942865673,y:9.151442942477026,z:159.83060348391524},{x:-8.853437309591135,y:3.4145729579361657,z:163.48806765880184},{x:-9.039261700078676,y:3.446858851910129,z:162.01657186720524},{x:-7.741932340840911,y:2.0139127692916077,z:165.9207535358574},{x:-8.409484907759452,y:1.9184413033810515,z:164.17740928028468},{x:-7.845879999865408,y:1.7465701101642672,z:164.58008279121054},{x:-7.903263443880855,y:1.5641953446731023,z:164.35027941818308},{x:-8.061190558298996,y:.6649708510593584,z:164.7539925063124},{x:-9.93102343462465,y:2.1050991175096385,z:158.20384354416643},{x:-8.178868101586838,y:4.037955908577359,z:163.26121714140407},{x:-8.138645330381875,y:4.252231776002276,z:162.902765428389},{x:-5.674236735657763,y:5.834397536434199,z:160.27045056441636},{x:-3.080638406810383,y:3.4750786907736675,z:163.86068224956625},{x:-3.679927768102374,y:4.615412161656607,z:156.0387155498704},{x:-8.57595507531646,y:3.297311499509039,z:159.26947159930273},{x:-8.260761106590149,y:3.607050688029716,z:158.50005317947256},{x:-6.500325422570281,y:3.0027671368377113,z:163.83212191342705},{x:-7.314261155550241,y:3.96910954524391,z:157.86368573404368},{x:-5.1789584868024985,y:3.130019813944422,z:165.7383012791119},{x:-5.59890817585492,y:4.025963362716823,z:163.4644618992516},{x:-6.1232934531688255,y:5.320281358430357,z:161.05657849690698},{x:-5.8616496883408775,y:3.5833360557248817,z:162.65129471030463},{x:-6.597278244005498,y:2.764645055584456,z:159.38365623221534},{x:-8.586266258024944,y:.6385792785768274,z:162.4765994662424},{x:-8.213967193068763,y:1.06069026707873,z:160.80249251861227},{x:-6.661892391741997,y:.6159516434691596,z:163.85996213372388},{x:-8.687651545179529,y:1.8174766467066377,z:159.99590211709528},{x:-9.161540288263685,y:1.7731410824242921,z:159.0399316728061},{x:-5.29857824140163,y:2.098451437683817,z:160.98360475954894},{x:-4.400475265980637,y:1.6122008931539682,z:165.1413021251202},{x:-3.354707293806314,y:1.6697376266249009,z:165.0085113361108},{x:-5.077020673778039,y:.694160012950249,z:165.06306767813172},{x:-5.154196864016143,y:.623110184712985,z:164.2974434298731},{x:-5.029591368168402,y:.27853353174299045,z:164.6897206327426},{x:-5.8362590503510425,y:.886128396000796,z:162.1413732274104},{x:-5.627932945505627,y:.33193699173284585,z:161.40805259527957},{x:-8.799366963385493,y:-1.3097219068058337,z:161.6854052922242},{x:-7.545642160194044,y:-1.0881470379377518,z:164.77193550673474},{x:-8.0162398591753,y:-.29022638824470093,z:159.782782937643},{x:-8.927466878107362,y:.09030290292499643,z:156.20465226588567},{x:-8.092478723215466,y:.31482961442556956,z:156.75491293052636},{x:-6.5398617852594665,y:-.16060616697270547,z:163.08365506480567},{x:-4.680303559958423,y:-.01970592745716715,z:164.37868546912432},{x:-4.633926647815274,y:.3851700732296166,z:162.58777032289854},{x:-3.470549480553693,y:.599056283180019,z:160.551550888461},{x:-2.9372469808905137,y:.5879512118704433,z:163.0944385017852},{x:-1.8482558730747378,y:.6608449809529482,z:160.38521325740993},{x:-2.05489083427765,y:1.5757775491639414,z:160.39993683451718},{x:-9.120745162394206,y:-2.878358688805001,z:161.06266196109607},{x:-6.318650087067494,y:-2.1543166256769197,z:158.44777692045398},{x:-6.229356948995983,y:-2.3743234066519037,z:157.79608108983092},{x:-2.097116033551359,y:-1.7081362925704013,z:158.12840461160823},{x:-3.039812917940054,y:-1.6364117209276046,z:164.7539171850371},{x:-2.9184682118057665,y:-1.4331092069068063,z:164.14407246078667},{x:-3.0670454404494123,y:-1.8975535863410187,z:163.36476020444124},{x:-3.8306745665899378,y:-2.272454746503392,z:157.57233028817205},{x:-3.0047182630324443,y:-4.37005358538209,z:162.76595288314888},{x:-3.4899133162355334,y:-6.440691437571449,z:158.65531121091877},{x:-2.3669142925876514,y:-6.270797012006906,z:164.00845374360063},{x:-2.7616236124869715,y:-6.46433649098535,z:159.0451136316679},{x:-7.349728921757119,y:-3.862461798953536,z:162.80542659730423},{x:-8.21287127197122,y:-3.90808839357846,z:161.2747698617959},{x:4.587566528531532,y:8.029705641154663,z:162.60198751482795},{x:5.742878379721148,y:7.9784525328466955,z:164.88600105749933},{x:6.954936144284716,y:8.94163740147058,z:162.26848663090874},{x:8.363235085001854,y:7.983548673874612,z:164.39828230616297},{x:8.114737720284921,y:7.7248212079929885,z:164.33062272455035},{x:6.521236036842211,y:5.698549415129371,z:160.772874675316},{x:4.507478179371269,y:4.377610560540795,z:165.48016875620738},{x:6.218526717709381,y:6.360286211832538,z:157.92205815715621},{x:5.45739649048576,y:4.608578795480234,z:163.2344345162923},{x:5.263452227714687,y:3.6194100035754033,z:165.28325438069075},{x:7.584884922611764,y:6.527271124955885,z:157.6011836458503},{x:6.7317198404087435,y:4.291701543794151,z:163.91870353209802},{x:6.533383078903896,y:4.064319041810627,z:165.05609110383637},{x:8.523469871316962,y:6.00431637077439,z:157.42112517963756},{x:7.624002402529804,y:4.471165736249418,z:161.10867676986066},{x:8.03684159712347,y:5.388331350771807,z:157.91050068466342},{x:7.655674955040588,y:2.2447213086488382,z:162.149540710311},{x:9.26220940159397,y:2.805246576077831,z:156.3644420388324},{x:7.172131268053377,y:.6862901478395571,z:164.51541988777228},{x:8.54951496938897,y:1.419191754655273,z:159.49657940739257},{x:9.3783598753473,y:-.6700451942269048,z:157.89472432805957},{x:2.8522097837346934,y:5.015060485560827,z:156.55084256578502},{x:3.366355288430924,y:4.893391933093039,z:156.25570755973501},{x:3.989519685066867,y:-.06378993082172002,z:156.76487218553854},{x:2.9874656336897587,y:-2.156484169153721,z:165.22988778629528},{x:6.509937565510278,y:-1.200220827356162,z:164.52340584524381},{x:13.437493442002236,y:6.000954882976739,z:158.76511574777518},{x:12.62275271531233,y:4.6444091751954275,z:157.7564980756876},{x:8.778833457559294,y:2.164168312587602,z:165.74932050513922},{x:12.53571334915162,y:4.3737268252723105,z:157.46211198839123},{x:8.813255079417264,y:1.535830814155787,z:165.6563336555899},{x:12.025764902536011,y:3.607078734562414,z:158.686864282775},{x:12.334956885223214,y:1.9719163151763226,z:158.52066613597088},{x:10.719737463569654,y:2.270045943248526,z:163.3144089483612},{x:10.8168326766911,y:1.8696568996360519,z:163.75251094593037},{x:11.733652015172495,y:-1.0010001424993575,z:163.92621072569005},{x:13.19043226960126,y:-1.0443441136389886,z:160.6836076437817},{x:14.973942606915323,y:-1.9836191075046088,z:157.83962883200593},{x:13.721004696538557,y:-2.911493571549002,z:160.1763160395939},{x:13.779280553504535,y:-4.26009933190123,z:161.86452027175937},{x:15.849429388748526,y:-2.5908651398769678,z:157.4609261573516},{x:15.442896623648778,y:-2.6969787863191286,z:158.40896027195402}]},GoyQ:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},"H+43":function(e,t){THREE.OutlinePass=function(e,t,r,i){this.renderScene=t,this.renderCamera=r,this.selectedObjects=void 0!==i?i:[],this.visibleEdgeColor=new THREE.Color(1,1,1),this.hiddenEdgeColor=new THREE.Color(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,THREE.Pass.call(this),this.resolution=void 0!==e?new THREE.Vector2(e.x,e.y):new THREE.Vector2(256,256);var n={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat},a=Math.round(this.resolution.x/this.downSampleRatio),o=Math.round(this.resolution.y/this.downSampleRatio);this.maskBufferMaterial=new THREE.MeshBasicMaterial({color:16777215}),this.maskBufferMaterial.side=THREE.DoubleSide,this.renderTargetMaskBuffer=new THREE.WebGLRenderTarget(this.resolution.x,this.resolution.y,n),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new THREE.MeshDepthMaterial,this.depthMaterial.side=THREE.DoubleSide,this.depthMaterial.depthPacking=THREE.RGBADepthPacking,this.depthMaterial.blending=THREE.NoBlending,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=THREE.DoubleSide,this.renderTargetDepthBuffer=new THREE.WebGLRenderTarget(this.resolution.x,this.resolution.y,n),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new THREE.WebGLRenderTarget(a,o,n),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new THREE.WebGLRenderTarget(a,o,n),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new THREE.WebGLRenderTarget(Math.round(a/2),Math.round(o/2),n),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new THREE.WebGLRenderTarget(a,o,n),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new THREE.WebGLRenderTarget(Math.round(a/2),Math.round(o/2),n),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value=new THREE.Vector2(a,o),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value=new THREE.Vector2(Math.round(a/2),Math.round(o/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),void 0===THREE.CopyShader&&console.error("THREE.OutlinePass relies on THREE.CopyShader");var s=THREE.CopyShader;this.copyUniforms=THREE.UniformsUtils.clone(s.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new THREE.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,blending:THREE.NoBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new THREE.Color,this.oldClearAlpha=1,this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.tempPulseColor1=new THREE.Color,this.tempPulseColor2=new THREE.Color,this.textureMatrix=new THREE.Matrix4},THREE.OutlinePass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.OutlinePass,dispose:function(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()},setSize:function(e,t){this.renderTargetMaskBuffer.setSize(e,t);var r=Math.round(e/this.downSampleRatio),i=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(r,i),this.renderTargetBlurBuffer1.setSize(r,i),this.renderTargetEdgeBuffer1.setSize(r,i),this.separableBlurMaterial1.uniforms.texSize.value=new THREE.Vector2(r,i),r=Math.round(r/2),i=Math.round(i/2),this.renderTargetBlurBuffer2.setSize(r,i),this.renderTargetEdgeBuffer2.setSize(r,i),this.separableBlurMaterial2.uniforms.texSize.value=new THREE.Vector2(r,i)},changeVisibilityOfSelectedObjects:function(e){function t(t){t instanceof THREE.Mesh&&(t.visible=e)}for(var r=0;r<this.selectedObjects.length;r++){this.selectedObjects[r].traverse(t)}},changeVisibilityOfNonSelectedObjects:function(e){var t=[];function r(e){e instanceof THREE.Mesh&&t.push(e)}for(var i=0;i<this.selectedObjects.length;i++){this.selectedObjects[i].traverse(r)}this.renderScene.traverse(function(r){if(r instanceof THREE.Mesh){for(var i=!1,n=0;n<t.length;n++)if(t[n].id===r.id){i=!0;break}if(!i){var a=r.visible;e&&!r.bVisible||(r.visible=e),r.bVisible=a}}})},updateTextureMatrix:function(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)},render:function(e,t,r,i,n){if(0!==this.selectedObjects.length){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var a=e.autoClear;if(e.autoClear=!1,n&&e.context.disable(e.context.STENCIL_TEST),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1),this.renderScene.overrideMaterial=this.depthMaterial,e.render(this.renderScene,this.renderCamera,this.renderTargetDepthBuffer,!0),this.changeVisibilityOfSelectedObjects(!0),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value=new THREE.Vector2(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.render(this.renderScene,this.renderCamera,this.renderTargetMaskBuffer,!0),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.render(this.scene,this.camera,this.renderTargetMaskDownSampleBuffer,!0),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){var o=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(o),this.tempPulseColor2.multiplyScalar(o)}this.quad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value=new THREE.Vector2(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.render(this.scene,this.camera,this.renderTargetEdgeBuffer1,!0),this.quad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=THREE.OutlinePass.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.render(this.scene,this.camera,this.renderTargetBlurBuffer1,!0),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=THREE.OutlinePass.BlurDirectionY,e.render(this.scene,this.camera,this.renderTargetEdgeBuffer1,!0),this.quad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=THREE.OutlinePass.BlurDirectionX,e.render(this.scene,this.camera,this.renderTargetBlurBuffer2,!0),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=THREE.OutlinePass.BlurDirectionY,e.render(this.scene,this.camera,this.renderTargetEdgeBuffer2,!0),this.quad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,n&&e.context.enable(e.context.STENCIL_TEST),e.render(this.scene,this.camera,r,!1),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=a}},getPrepareMaskMaterial:function(){return new THREE.ShaderMaterial({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new THREE.Vector2(.5,.5)},textureMatrix:{value:new THREE.Matrix4}},vertexShader:"varying vec2 vUv;\t\t\t\tvarying vec4 projTexCoord;\t\t\t\tvarying vec4 vPosition;\t\t\t\tuniform mat4 textureMatrix;\t\t\t\tvoid main() {\t\t\t\t\tvUv = uv;\t\t\t\t\tvPosition = modelViewMatrix * vec4( position, 1.0 );\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <packing>\t\t\t\tvarying vec2 vUv;\t\t\t\tvarying vec4 vPosition;\t\t\t\tvarying vec4 projTexCoord;\t\t\t\tuniform sampler2D depthTexture;\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\t\t\t\t\tfloat viewZ = -perspectiveDepthToViewZ( depth, cameraNearFar.x, cameraNearFar.y );\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\t\t\t\t}"})},getEdgeDetectionMaterial:function(){return new THREE.ShaderMaterial({uniforms:{maskTexture:{value:null},texSize:{value:new THREE.Vector2(.5,.5)},visibleEdgeColor:{value:new THREE.Vector3(1,1,1)},hiddenEdgeColor:{value:new THREE.Vector3(1,1,1)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec3 visibleEdgeColor;\t\t\t\tuniform vec3 hiddenEdgeColor;\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\t\t\t\t}"})},getSeperableBlurMaterial:function(e){return new THREE.ShaderMaterial({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new THREE.Vector2(.5,.5)},direction:{value:new THREE.Vector2(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform sampler2D colorTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tuniform float kernelRadius;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\t\t\t\t\tvec2 uvOffset = delta;\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\t\t\t\t\t\tweightSum += (2.0 * w);\t\t\t\t\t\tuvOffset += delta;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\t\t\t\t}"})},getOverlayMaterial:function(){return new THREE.ShaderMaterial({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform sampler2D edgeTexture1;\t\t\t\tuniform sampler2D edgeTexture2;\t\t\t\tuniform sampler2D patternTexture;\t\t\t\tuniform float edgeStrength;\t\t\t\tuniform float edgeGlow;\t\t\t\tuniform bool usePatternTexture;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\t\t\t\t\tif(usePatternTexture)\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\t\t\t\t\tgl_FragColor = finalColor;\t\t\t\t}",blending:THREE.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0})}}),THREE.OutlinePass.BlurDirectionX=new THREE.Vector2(1,0),THREE.OutlinePass.BlurDirectionY=new THREE.Vector2(0,1)},HU5l:function(e,t){THREE.VignetteShader={uniforms:{tDiffuse:{value:null},offset:{value:1},darkness:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float offset;","uniform float darkness;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );","gl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );","}"].join("\n")}},IyR2:function(e,t){THREE.SpriteCanvasMaterial=function(e){THREE.Material.call(this),this.type="SpriteCanvasMaterial",this.color=new THREE.Color(16777215),this.program=function(){},this.setValues(e)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.constructor=THREE.SpriteCanvasMaterial,THREE.SpriteCanvasMaterial.prototype.isSpriteCanvasMaterial=!0,THREE.SpriteCanvasMaterial.prototype.clone=function(){var e=new THREE.SpriteCanvasMaterial;return e.copy(this),e.color.copy(this.color),e.program=this.program,e},THREE.CanvasRenderer=function(e){console.log("THREE.CanvasRenderer",THREE.REVISION),e=e||{};var t,r,i,n,a,o,s,c,l,u,h,d,p,f,m,v,g,y,x,E=this,b=new THREE.Projector,w=void 0!==e.canvas?e.canvas:document.createElement("canvas"),T=w.width,M=w.height,_=Math.floor(T/2),S=Math.floor(M/2),R=0,A=0,z=T,C=M,P=1,L=w.getContext("2d",{alpha:!0===e.alpha}),D=new THREE.Color(0),U=!0===e.alpha?0:1,H=1,O=0,I=null,N=null,B=null,F=null,G=null,V=[],j=new THREE.Color,k=new THREE.Color,W=new THREE.Color,X=new THREE.Color,q={},Y=new THREE.Box2,Z=new THREE.Box2,Q=new THREE.Box2,J=new THREE.Color,K=new THREE.Color,$=new THREE.Color,ee=new THREE.Vector3,te=new THREE.Vector3,re=new THREE.Vector3,ie=new THREE.Matrix3;function ne(e,t,r){de(r.opacity),pe(r.blending);var i=t.scale.x*_,n=t.scale.y*S,a=Math.sqrt(i*i+n*n);if(Q.min.set(e.x-a,e.y-a),Q.max.set(e.x+a,e.y+a),r.isSpriteMaterial){var o=r.map;if(null!==o){var s=q[o.id];if(void 0!==s&&s.version===o.version||(s=le(o),q[o.id]=s),void 0!==s.canvas){ye(s.canvas);var c=o.image,l=c.width*o.offset.x,u=c.height*o.offset.y,h=c.width*o.repeat.x,d=c.height*o.repeat.y,p=i/h,f=n/d;L.save(),L.translate(e.x,e.y),0!==r.rotation&&L.rotate(r.rotation),L.translate(-i/2,-n/2),L.scale(p,f),L.translate(-l,-u),L.fillRect(l,u,h,d),L.restore()}}else ye(r.color.getStyle()),L.save(),L.translate(e.x,e.y),0!==r.rotation&&L.rotate(r.rotation),L.scale(i,-n),L.fillRect(-.5,-.5,1,1),L.restore()}else r.isSpriteCanvasMaterial?(ge(r.color.getStyle()),ye(r.color.getStyle()),L.save(),L.translate(e.x,e.y),0!==r.rotation&&L.rotate(r.rotation),L.scale(i,n),r.program(L),L.restore()):r.isPointsMaterial&&(ye(r.color.getStyle()),L.save(),L.translate(e.x,e.y),0!==r.rotation&&L.rotate(r.rotation),L.scale(i*r.size,-n*r.size),L.fillRect(-.5,-.5,1,1),L.restore())}function ae(e,t,r,i){if(de(i.opacity),pe(i.blending),L.beginPath(),L.moveTo(e.positionScreen.x,e.positionScreen.y),L.lineTo(t.positionScreen.x,t.positionScreen.y),i.isLineBasicMaterial){if(fe(i.linewidth),me(i.linecap),ve(i.linejoin),i.vertexColors!==THREE.VertexColors)ge(i.color.getStyle());else{var n=r.vertexColors[0].getStyle(),a=r.vertexColors[1].getStyle();if(n===a)ge(n);else{try{var o=L.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);o.addColorStop(0,n),o.addColorStop(1,a)}catch(s){o=n}ge(o)}}L.stroke(),Q.expandByScalar(2*i.linewidth)}else i.isLineDashedMaterial&&(fe(i.linewidth),me(i.linecap),ve(i.linejoin),ge(i.color.getStyle()),xe([i.dashSize,i.gapSize]),L.stroke(),Q.expandByScalar(2*i.linewidth),xe([]))}function oe(e,t,r,n,a,o,b,w){var T,M,_,S,R,A;if(E.info.render.vertices+=3,E.info.render.faces++,de(w.opacity),pe(w.blending),s=e.positionScreen.x,c=e.positionScreen.y,l=t.positionScreen.x,u=t.positionScreen.y,h=r.positionScreen.x,d=r.positionScreen.y,T=s,M=c,_=l,S=u,R=h,A=d,L.beginPath(),L.moveTo(T,M),L.lineTo(_,S),L.lineTo(R,A),L.closePath(),(w.isMeshLambertMaterial||w.isMeshPhongMaterial||w.isMeshStandardMaterial)&&null===w.map)k.copy(w.color),W.copy(w.emissive),w.vertexColors===THREE.FaceColors&&k.multiply(b.color),j.copy(J),te.copy(e.positionWorld).add(t.positionWorld).add(r.positionWorld).divideScalar(3),function(e,t,r){for(var n=0,a=i.length;n<a;n++){var o=i[n];if(X.copy(o.color),o.isDirectionalLight){var s=ee.setFromMatrixPosition(o.matrixWorld).normalize();if((c=t.dot(s))<=0)continue;c*=o.intensity,r.add(X.multiplyScalar(c))}else if(o.isPointLight){var c;if(s=ee.setFromMatrixPosition(o.matrixWorld),(c=t.dot(ee.subVectors(s,e).normalize()))<=0)continue;if(0==(c*=0==o.distance?1:1-Math.min(e.distanceTo(s)/o.distance,1)))continue;c*=o.intensity,r.add(X.multiplyScalar(c))}}}(te,b.normalModel,j),j.multiply(k).add(W),!0===w.wireframe?se(j,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):ce(j);else if(w.isMeshBasicMaterial||w.isMeshLambertMaterial||w.isMeshPhongMaterial||w.isMeshStandardMaterial){if(null!==w.map)w.map.mapping===THREE.UVMapping&&(p=b.uvs,ue(s,c,l,u,h,d,p[n].x,p[n].y,p[a].x,p[a].y,p[o].x,p[o].y,w.map));else null!==w.envMap?w.envMap.mapping===THREE.SphericalReflectionMapping&&(re.copy(b.vertexNormalsModel[n]).applyMatrix3(ie),f=.5*re.x+.5,m=.5*re.y+.5,re.copy(b.vertexNormalsModel[a]).applyMatrix3(ie),v=.5*re.x+.5,g=.5*re.y+.5,re.copy(b.vertexNormalsModel[o]).applyMatrix3(ie),y=.5*re.x+.5,x=.5*re.y+.5,ue(s,c,l,u,h,d,f,m,v,g,y,x,w.envMap)):(j.copy(w.color),w.vertexColors===THREE.FaceColors&&j.multiply(b.color),!0===w.wireframe?se(j,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):ce(j))}else w.isMeshNormalMaterial?(re.copy(b.normalModel).applyMatrix3(ie),j.setRGB(re.x,re.y,re.z).multiplyScalar(.5).addScalar(.5),!0===w.wireframe?se(j,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):ce(j)):(j.setRGB(1,1,1),!0===w.wireframe?se(j,w.wireframeLinewidth,w.wireframeLinecap,w.wireframeLinejoin):ce(j))}function se(e,t,r,i){fe(t),me(r),ve(i),ge(e.getStyle()),L.stroke(),Q.expandByScalar(2*t)}function ce(e){ye(e.getStyle()),L.fill()}function le(e){if(0===e.version||e instanceof THREE.CompressedTexture||e instanceof THREE.DataTexture)return{canvas:void 0,version:e.version};var t=e.image;if(!1===t.complete)return{canvas:void 0,version:0};var r=e.wrapS===THREE.RepeatWrapping||e.wrapS===THREE.MirroredRepeatWrapping,i=e.wrapT===THREE.RepeatWrapping||e.wrapT===THREE.MirroredRepeatWrapping,n=e.wrapS===THREE.MirroredRepeatWrapping,a=e.wrapT===THREE.MirroredRepeatWrapping,o=document.createElement("canvas");o.width=t.width*(n?2:1),o.height=t.height*(a?2:1);var s=o.getContext("2d");s.setTransform(1,0,0,-1,0,t.height),s.drawImage(t,0,0),!0===n&&(s.setTransform(-1,0,0,-1,t.width,t.height),s.drawImage(t,-t.width,0)),!0===a&&(s.setTransform(1,0,0,1,0,0),s.drawImage(t,0,t.height)),!0===n&&!0===a&&(s.setTransform(-1,0,0,1,t.width,0),s.drawImage(t,-t.width,t.height));var c="no-repeat";!0===r&&!0===i?c="repeat":!0===r?c="repeat-x":!0===i&&(c="repeat-y");var l=L.createPattern(o,c);return e.onUpdate&&e.onUpdate(e),{canvas:l,version:e.version}}function ue(e,t,r,i,n,a,o,s,c,l,u,h,d){var p=q[d.id];if(void 0!==p&&p.version===d.version||(p=le(d),q[d.id]=p),void 0===p.canvas)return ye("rgba( 0, 0, 0, 1)"),void L.fill();ye(p.canvas);var f,m,v,g,y,x,E,b,w=d.offset.x/d.repeat.x,T=d.offset.y/d.repeat.y,M=d.image.width*d.repeat.x,_=d.image.height*d.repeat.y;c=(c+w)*M,l=(l+T)*_,u=(u+w)*M,h=(h+T)*_,r-=e,i-=t,n-=e,a-=t,0!==(E=(c-=o=(o+w)*M)*(h-=s=(s+T)*_)-(u-=o)*(l-=s))&&(y=e-(f=(h*r-l*n)*(b=1/E))*o-(v=(c*n-u*r)*b)*s,x=t-(m=(h*i-l*a)*b)*o-(g=(c*a-u*i)*b)*s,L.save(),L.transform(f,m,v,g,y,x),L.fill(),L.restore())}function he(e,t,r){var i,n=t.x-e.x,a=t.y-e.y,o=n*n+a*a;0!==o&&(n*=i=r/Math.sqrt(o),a*=i,t.x+=n,t.y+=a,e.x-=n,e.y-=a)}function de(e){H!==e&&(L.globalAlpha=e,H=e)}function pe(e){O!==e&&(e===THREE.NormalBlending?L.globalCompositeOperation="source-over":e===THREE.AdditiveBlending?L.globalCompositeOperation="lighter":e===THREE.SubtractiveBlending?L.globalCompositeOperation="darker":e===THREE.MultiplyBlending&&(L.globalCompositeOperation="multiply"),O=e)}function fe(e){B!==e&&(L.lineWidth=e,B=e)}function me(e){F!==e&&(L.lineCap=e,F=e)}function ve(e){G!==e&&(L.lineJoin=e,G=e)}function ge(e){I!==e&&(L.strokeStyle=e,I=e)}function ye(e){N!==e&&(L.fillStyle=e,N=e)}function xe(e){V.length!==e.length&&(L.setLineDash(e),V=e)}void 0===L.setLineDash&&(L.setLineDash=function(){}),this.domElement=w,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.getContext=function(){return L},this.getContextAttributes=function(){return L.getContextAttributes()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(e){void 0!==e&&(P=e)},this.setSize=function(e,t,r){T=e*P,M=t*P,w.width=T,w.height=M,_=Math.floor(T/2),S=Math.floor(M/2),!1!==r&&(w.style.width=e+"px",w.style.height=t+"px"),Y.min.set(-_,-S),Y.max.set(_,S),Z.min.set(-_,-S),Z.max.set(_,S),H=1,O=0,I=null,N=null,B=null,F=null,G=null,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,r,i){R=e*P,A=t*P,z=r*P,C=i*P},this.setScissor=function(){},this.setScissorTest=function(){},this.setClearColor=function(e,t){D.set(e),U=void 0!==t?t:1,Z.min.set(-_,-S),Z.max.set(_,S)},this.setClearColorHex=function(e,t){console.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return D},this.getClearAlpha=function(){return U},this.getMaxAnisotropy=function(){return 0},this.clear=function(){!1===Z.isEmpty()&&(Z.intersect(Y),Z.expandByScalar(2),Z.min.x=Z.min.x+_,Z.min.y=-Z.min.y+S,Z.max.x=Z.max.x+_,Z.max.y=-Z.max.y+S,U<1&&L.clearRect(0|Z.min.x,0|Z.max.y,Z.max.x-Z.min.x|0,Z.min.y-Z.max.y|0),U>0&&(pe(THREE.NormalBlending),de(1),ye("rgba("+Math.floor(255*D.r)+","+Math.floor(255*D.g)+","+Math.floor(255*D.b)+","+U+")"),L.fillRect(0|Z.min.x,0|Z.max.y,Z.max.x-Z.min.x|0,Z.min.y-Z.max.y|0)),Z.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,s){if(void 0!==s.isCamera){var c=e.background;c&&c.isColor?(ye("rgb("+Math.floor(255*c.r)+","+Math.floor(255*c.g)+","+Math.floor(255*c.b)+")"),L.fillRect(0,0,T,M)):!0===this.autoClear&&this.clear(),E.info.render.vertices=0,E.info.render.faces=0,L.setTransform(z/T,0,0,-C/M,R,M-A),L.translate(_,S),t=b.projectScene(e,s,this.sortObjects,this.sortElements),r=t.elements,i=t.lights,ie.getNormalMatrix(s.matrixWorldInverse),function(){J.setRGB(0,0,0),K.setRGB(0,0,0),$.setRGB(0,0,0);for(var e=0,t=i.length;e<t;e++){var r=i[e],n=r.color;r.isAmbientLight?J.add(n):r.isDirectionalLight?K.add(n):r.isPointLight&&$.add(n)}}();for(var l=0,u=r.length;l<u;l++){var h=r[l],d=h.material;if(void 0!==d&&0!==d.opacity){if(Q.makeEmpty(),h instanceof THREE.RenderableSprite)(n=h).x*=_,n.y*=S,ne(n,h,d);else if(h instanceof THREE.RenderableLine)n=h.v1,a=h.v2,n.positionScreen.x*=_,n.positionScreen.y*=S,a.positionScreen.x*=_,a.positionScreen.y*=S,Q.setFromPoints([n.positionScreen,a.positionScreen]),!0===Y.intersectsBox(Q)&&ae(n,a,h,d);else if(h instanceof THREE.RenderableFace){if(n=h.v1,a=h.v2,o=h.v3,n.positionScreen.z<-1||n.positionScreen.z>1)continue;if(a.positionScreen.z<-1||a.positionScreen.z>1)continue;if(o.positionScreen.z<-1||o.positionScreen.z>1)continue;n.positionScreen.x*=_,n.positionScreen.y*=S,a.positionScreen.x*=_,a.positionScreen.y*=S,o.positionScreen.x*=_,o.positionScreen.y*=S,d.overdraw>0&&(he(n.positionScreen,a.positionScreen,d.overdraw),he(a.positionScreen,o.positionScreen,d.overdraw),he(o.positionScreen,n.positionScreen,d.overdraw)),Q.setFromPoints([n.positionScreen,a.positionScreen,o.positionScreen]),!0===Y.intersectsBox(Q)&&oe(n,a,o,0,1,2,h,d)}Z.union(Q)}}L.setTransform(1,0,0,1,0,0)}else console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.")}}},JTzB:function(e,t,r){var i=r("NykK"),n=r("ExA7"),a="[object Arguments]";e.exports=function(e){return n(e)&&i(e)==a}},JXsK:function(e,t){THREE.VREffect=function(e,t){var r,i,n,a,o=new THREE.Vector3,s=new THREE.Vector3,c=null;"VRFrameData"in window&&(c=new window.VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(function(e){i=e,e.length>0?r=e[0]:t&&t("HMD not available")}).catch(function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1;var l=this,u=e.getSize(),h=!1,d=e.getPixelRatio();this.getVRDisplay=function(){return r},this.setVRDisplay=function(e){r=e},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),i},this.setSize=function(t,i,n){if(u={width:t,height:i},h=n,l.isPresenting){var a=r.getEyeParameters("left");e.setPixelRatio(1),e.setSize(2*a.renderWidth,a.renderHeight,!1)}else e.setPixelRatio(d),e.setSize(t,i,n)};var p=e.domElement,f=[0,0,.5,1],m=[.5,0,.5,1];function v(){var t=l.isPresenting;if(l.isPresenting=void 0!==r&&r.isPresenting,l.isPresenting){var i=r.getEyeParameters("left"),n=i.renderWidth,a=i.renderHeight;t||(d=e.getPixelRatio(),u=e.getSize(),e.setPixelRatio(1),e.setSize(2*n,a,!1))}else t&&(e.setPixelRatio(d),e.setSize(u.width,u.height,h))}window.addEventListener("vrdisplaypresentchange",v,!1),this.setFullScreen=function(e){return new Promise(function(t,i){void 0!==r?l.isPresenting!==e?t(e?r.requestPresent([{source:p}]):r.exitPresent()):t():i(new Error("No VR hardware found."))})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(e){return void 0!==r?r.requestAnimationFrame(e):window.requestAnimationFrame(e)},this.cancelAnimationFrame=function(e){void 0!==r?r.cancelAnimationFrame(e):window.cancelAnimationFrame(e)},this.submitFrame=function(){void 0!==r&&l.isPresenting&&r.submitFrame()},this.autoSubmitFrame=!0;var g=new THREE.PerspectiveCamera;g.layers.enable(1);var y=new THREE.PerspectiveCamera;function x(e,t,r,i){var n=Math.PI/180;return function(e,t,r,i){r=void 0===r?.01:r,i=void 0===i?1e4:i;var n=(t=void 0===t||t)?-1:1,a=new THREE.Matrix4,o=a.elements,s=function(e){var t=2/(e.leftTan+e.rightTan),r=(e.leftTan-e.rightTan)*t*.5,i=2/(e.upTan+e.downTan);return{scale:[t,i],offset:[r,(e.upTan-e.downTan)*i*.5]}}(e);return o[0]=s.scale[0],o[1]=0,o[2]=s.offset[0]*n,o[3]=0,o[4]=0,o[5]=s.scale[1],o[6]=-s.offset[1]*n,o[7]=0,o[8]=0,o[9]=0,o[10]=i/(r-i)*-n,o[11]=i*r/(r-i),o[12]=0,o[13]=0,o[14]=n,o[15]=0,a.transpose(),a}({upTan:Math.tan(e.upDegrees*n),downTan:Math.tan(e.downDegrees*n),leftTan:Math.tan(e.leftDegrees*n),rightTan:Math.tan(e.rightDegrees*n)},t,r,i)}y.layers.enable(2),this.render=function(t,i,u,h){if(r&&l.isPresenting){var d=t.autoUpdate;d&&(t.updateMatrixWorld(),t.autoUpdate=!1);var p=r.getEyeParameters("left"),v=r.getEyeParameters("right");o.fromArray(p.offset),s.fromArray(v.offset),Array.isArray(t)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),t=t[0]);var E,b,w=e.getSize(),T=r.getLayers();if(T.length){var M=T[0];E=null!==M.leftBounds&&4===M.leftBounds.length?M.leftBounds:f,b=null!==M.rightBounds&&4===M.rightBounds.length?M.rightBounds:m}else E=f,b=m;return n={x:Math.round(w.width*E[0]),y:Math.round(w.height*E[1]),width:Math.round(w.width*E[2]),height:Math.round(w.height*E[3])},a={x:Math.round(w.width*b[0]),y:Math.round(w.height*b[1]),width:Math.round(w.width*b[2]),height:Math.round(w.height*b[3])},u?(e.setRenderTarget(u),u.scissorTest=!0):(e.setRenderTarget(null),e.setScissorTest(!0)),(e.autoClear||h)&&e.clear(),null===i.parent&&i.updateMatrixWorld(),i.matrixWorld.decompose(g.position,g.quaternion,g.scale),y.position.copy(g.position),y.quaternion.copy(g.quaternion),y.scale.copy(g.scale),g.translateOnAxis(o,g.scale.x),y.translateOnAxis(s,y.scale.x),r.getFrameData?(r.depthNear=i.near,r.depthFar=i.far,r.getFrameData(c),g.projectionMatrix.elements=c.leftProjectionMatrix,y.projectionMatrix.elements=c.rightProjectionMatrix):(g.projectionMatrix=x(p.fieldOfView,!0,i.near,i.far),y.projectionMatrix=x(v.fieldOfView,!0,i.near,i.far)),u?(u.viewport.set(n.x,n.y,n.width,n.height),u.scissor.set(n.x,n.y,n.width,n.height)):(e.setViewport(n.x,n.y,n.width,n.height),e.setScissor(n.x,n.y,n.width,n.height)),e.render(t,g,u,h),u?(u.viewport.set(a.x,a.y,a.width,a.height),u.scissor.set(a.x,a.y,a.width,a.height)):(e.setViewport(a.x,a.y,a.width,a.height),e.setScissor(a.x,a.y,a.width,a.height)),e.render(t,y,u,h),u?(u.viewport.set(0,0,w.width,w.height),u.scissor.set(0,0,w.width,w.height),u.scissorTest=!1,e.setRenderTarget(null)):(e.setViewport(0,0,w.width,w.height),e.setScissorTest(!1)),d&&(t.autoUpdate=!0),void(l.autoSubmitFrame&&l.submitFrame())}e.render(t,i,u,h)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",v,!1)}}},JmpY:function(e,t,r){var i=r("eUgh");e.exports=function(e,t){return i(t,function(t){return e[t]})}},KfNM:function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},Kz5y:function(e,t,r){var i=r("WFqU"),n="object"==typeof self&&self&&self.Object===Object&&self,a=i||n||Function("return this")();e.exports=a},LQNH:function(e,t,r){"use strict";t.__esModule=!0,t.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},e.exports=t.default},MEvW:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(){0};e.exports=t.default},MMmD:function(e,t,r){var i=r("lSCD"),n=r("shjB");e.exports=function(e){return null!=e&&n(e.length)&&!i(e)}},NcqA:function(e,t){THREE.HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float h;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")}},NykK:function(e,t,r){var i=r("nmnc"),n=r("AP2z"),a=r("KfNM"),o="[object Null]",s="[object Undefined]",c=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:o:c&&c in Object(e)?n(e):a(e)}},OREr:function(e,t,r){(function(r){var i,n,a,o=o||(n=[],{getAll:function(){return n},removeAll:function(){n=[]},add:function(e){n.push(e)},remove:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1)},update:function(e,t){if(0===n.length)return!1;var r=0;for(e=void 0!==e?e:o.now();r<n.length;)n[r].update(e)||t?r++:n.splice(r,1);return!0}});"undefined"==typeof window&&void 0!==r?o.now=function(){var e=r.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?o.now=window.performance.now.bind(window.performance):void 0!==Date.now?o.now=Date.now:o.now=function(){return(new Date).getTime()},o.Tween=function(e){var t,r=e,i={},n={},a={},s=1e3,c=0,l=!1,u=!1,h=!1,d=0,p=null,f=o.Easing.Linear.None,m=o.Interpolation.Linear,v=[],g=null,y=!1,x=null,E=null,b=null;this.to=function(e,t){return n=e,void 0!==t&&(s=t),this},this.start=function(e){for(var t in o.add(this),u=!0,y=!1,p=void 0!==e?e:o.now(),p+=d,n){if(n[t]instanceof Array){if(0===n[t].length)continue;n[t]=[r[t]].concat(n[t])}void 0!==r[t]&&(i[t]=r[t],i[t]instanceof Array==!1&&(i[t]*=1),a[t]=i[t]||0)}return this},this.stop=function(){return u?(o.remove(this),u=!1,null!==b&&b.call(r,r),this.stopChainedTweens(),this):this},this.end=function(){return this.update(p+s),this},this.stopChainedTweens=function(){for(var e=0,t=v.length;e<t;e++)v[e].stop()},this.delay=function(e){return d=e,this},this.repeat=function(e){return c=e,this},this.repeatDelay=function(e){return t=e,this},this.yoyo=function(e){return l=e,this},this.easing=function(e){return f=e,this},this.interpolation=function(e){return m=e,this},this.chain=function(){return v=arguments,this},this.onStart=function(e){return g=e,this},this.onUpdate=function(e){return x=e,this},this.onComplete=function(e){return E=e,this},this.onStop=function(e){return b=e,this},this.update=function(e){var o,u,b;if(e<p)return!0;for(o in!1===y&&(null!==g&&g.call(r,r),y=!0),b=f(u=(u=(e-p)/s)>1?1:u),n)if(void 0!==i[o]){var w=i[o]||0,T=n[o];T instanceof Array?r[o]=m(T,b):("string"==typeof T&&(T="+"===T.charAt(0)||"-"===T.charAt(0)?w+parseFloat(T):parseFloat(T)),"number"==typeof T&&(r[o]=w+(T-w)*b))}if(null!==x&&x.call(r,b),1===u){if(c>0){for(o in isFinite(c)&&c--,a){if("string"==typeof n[o]&&(a[o]=a[o]+parseFloat(n[o])),l){var M=a[o];a[o]=n[o],n[o]=M}i[o]=a[o]}return l&&(h=!h),p=void 0!==t?e+t:e+d,!0}null!==E&&E.call(r,r);for(var _=0,S=v.length;_<S;_++)v[_].start(p+s);return!1}return!0}},o.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-o.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Easing.Bounce.In(2*e):.5*o.Easing.Bounce.Out(2*e-1)+.5}}},o.Interpolation={Linear:function(e,t){var r=e.length-1,i=r*t,n=Math.floor(i),a=o.Interpolation.Utils.Linear;return t<0?a(e[0],e[1],i):t>1?a(e[r],e[r-1],r-i):a(e[n],e[n+1>r?r:n+1],i-n)},Bezier:function(e,t){for(var r=0,i=e.length-1,n=Math.pow,a=o.Interpolation.Utils.Bernstein,s=0;s<=i;s++)r+=n(1-t,i-s)*n(t,s)*e[s]*a(i,s);return r},CatmullRom:function(e,t){var r=e.length-1,i=r*t,n=Math.floor(i),a=o.Interpolation.Utils.CatmullRom;return e[0]===e[r]?(t<0&&(n=Math.floor(i=r*(1+t))),a(e[(n-1+r)%r],e[n],e[(n+1)%r],e[(n+2)%r],i-n)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[r]-(a(e[r],e[r],e[r-1],e[r-1],i-r)-e[r]):a(e[n?n-1:0],e[n],e[r<n+1?r:n+1],e[r<n+2?r:n+2],i-n)},Utils:{Linear:function(e,t,r){return(t-e)*r+e},Bernstein:function(e,t){var r=o.Interpolation.Utils.Factorial;return r(e)/r(t)/r(e-t)},Factorial:(a=[1],function(e){var t=1;if(a[e])return a[e];for(var r=e;r>1;r--)t*=r;return a[e]=t,t}),CatmullRom:function(e,t,r,i,n){var a=.5*(r-e),o=.5*(i-t),s=n*n;return(2*t-2*r+a+o)*(n*s)+(-3*t+3*r-2*a-o)*s+a*n+t}}},void 0===(i=function(){return o}.apply(t,[]))||(e.exports=i)}).call(this,r("8oxB"))},"P/G1":function(e,t,r){var i=r("JmpY"),n=r("7GkX");e.exports=function(e){return null==e?[]:i(e,n(e))}},Q3RQ:function(e,t){THREE.DigitalGlitch={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform int byp;","uniform sampler2D tDiffuse;","uniform sampler2D tDisp;","uniform float amount;","uniform float angle;","uniform float seed;","uniform float seed_x;","uniform float seed_y;","uniform float distortion_x;","uniform float distortion_y;","uniform float col_s;","varying vec2 vUv;","float rand(vec2 co){","return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);","}","void main() {","if(byp<1) {","vec2 p = vUv;","float xs = floor(gl_FragCoord.x / 0.5);","float ys = floor(gl_FragCoord.y / 0.5);","vec4 normal = texture2D (tDisp, p*seed*seed);","if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {","if(seed_x>0.){","p.y = 1. - (p.y + distortion_y);","}","else {","p.y = distortion_y;","}","}","if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {","if(seed_y>0.){","p.x=distortion_x;","}","else {","p.x = 1. - (p.x + distortion_x);","}","}","p.x+=normal.x*seed_x*(seed/5.);","p.y+=normal.y*seed_y*(seed/5.);","vec2 offset = amount * vec2( cos(angle), sin(angle));","vec4 cr = texture2D(tDiffuse, p + offset);","vec4 cga = texture2D(tDiffuse, p);","vec4 cb = texture2D(tDiffuse, p - offset);","gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);","gl_FragColor = gl_FragColor+ snow;","}","else {","gl_FragColor=texture2D (tDiffuse, vUv);","}","}"].join("\n")}},QA1F:function(e,t){THREE.ToneMapShader={uniforms:{tDiffuse:{value:null},averageLuminance:{value:1},luminanceMap:{value:null},maxLuminance:{value:16},minLuminance:{value:.01},middleGrey:{value:.6}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","uniform float middleGrey;","uniform float minLuminance;","uniform float maxLuminance;","#ifdef ADAPTED_LUMINANCE","uniform sampler2D luminanceMap;","#else","uniform float averageLuminance;","#endif","const vec3 LUM_CONVERT = vec3(0.299, 0.587, 0.114);","vec3 ToneMap( vec3 vColor ) {","#ifdef ADAPTED_LUMINANCE","float fLumAvg = texture2D(luminanceMap, vec2(0.5, 0.5)).r;","#else","float fLumAvg = averageLuminance;","#endif","float fLumPixel = dot(vColor, LUM_CONVERT);","float fLumScaled = (fLumPixel * middleGrey) / max( minLuminance, fLumAvg );","float fLumCompressed = (fLumScaled * (1.0 + (fLumScaled / (maxLuminance * maxLuminance)))) / (1.0 + fLumScaled);","return fLumCompressed * vColor;","}","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = vec4( ToneMap( texel.xyz ), texel.w );","}"].join("\n")}},QAuH:function(e,t){THREE.FXAAShader={uniforms:{tDiffuse:{value:null},resolution:{value:new THREE.Vector2(1/1024,1/512)}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","void main() {","vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;","vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float lumaNW = dot( rgbNW, luma );","float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaM  = dot( rgbM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec4 rgbA = (1.0/2.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));","vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));","float lumaB = dot(rgbB, vec4(luma, 0.0));","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = rgbA;","} else {","gl_FragColor = rgbB;","}","}"].join("\n")}},QIyF:function(e,t,r){var i=r("Kz5y");e.exports=function(){return i.Date.now()}},RNiq:function(e,t,r){"use strict";r.r(t),function(e){var i=r("ln6h"),n=r.n(i),a=r("O40h"),o=r("dfwq"),s=r("0iUn"),c=r("sLSF"),l=r("MI3g"),u=r("a7VT"),h=r("AT/M"),d=r("Tit0"),p=r("vYYK"),f=r("q1tI"),m=r.n(f),v=r("DzJC"),g=r.n(v),y=r("P/G1"),x=r.n(y),E=r("5Yp1"),b=r("OREr"),w=r.n(b),T=r("FDFk"),M=function(t){function r(e){var t;return Object(s.default)(this,r),t=Object(l.default)(this,Object(u.default)(r).call(this,e)),Object(p.a)(Object(h.default)(t),"handleKeyDown",function(e){console.log("handleKeyDown",e.code),"KeyZ"===e.code&&(t.stopMouseMove?t.stopMouseMove=!t.stopMouseMove:t.stopMouseMove=!0),"ArrowLeft"===e.code&&t.prev(),"ArrowRight"===e.code&&t.next()}),Object(p.a)(Object(h.default)(t),"initModel",function(){var e,r,i;console.log("initModelScene!!!!!"),t.dummies=[{target:{x:.04168890159031652,y:1.6075223740189952,z:-4.204610862005459},rotation:{x:.05563813933552465,y:-.0034378877876218316,z:.0001914749181576407},position:{x:.009585824698234734,y:1.0882421802046065,z:5.118926212246799}},{target:{x:4.847309178657104,y:-2.0080406238234656,z:.423365677613197},rotation:{x:.19622031285294989,y:-.04313935507952845,z:.008572286541377382},position:{x:4.499066923215277,y:-3.580906804929982,z:8.336041856243057}},{target:{x:8.583454624039621,y:-.037916843924227665,z:-1.0279975820024243},rotation:{x:-.23034743779720207,y:.09771101699021172,z:.02287376394769237},position:{x:10.118028881902896,y:3.5364170341838985,z:14.21372236030821}},{target:{x:5.637820222747756,y:-.9641979725475844,z:-3.0374486671224177},rotation:{x:.24372315325259145,y:-.45016995636091345,z:.10778009122319625},position:{x:-5.793785111717499,y:-6.6725507980280465,z:19.918414845729707}},{target:{x:-7.223609390751975,y:-4.449748100648112,z:-3.235287933710765},rotation:{x:-.01660228248487827,y:.025689089763583615,z:.00042648977702289595},position:{x:-6.548769793907435,y:-4.013730380817171,z:23.024815687376865}},{target:{x:-8.728695939259575,y:8.349658492821545,z:21.924984541757567},rotation:{x:.08803319201219459,y:-.03667399190646657,z:.0032361578608104537},position:{x:-8.957793985156139,y:7.800681953822031,z:28.14488447492582}},{target:{x:.1622957997569125,y:-3.9902934543089152,z:13.502638532043227},rotation:{x:.1289369515397907,y:-.016478068964636182,z:.002136384686519976},position:{x:-.1559245167093155,y:-6.473173104084799,z:32.65234908892612}},{target:{x:.1622957997569125,y:-3.9902934543089152,z:13.502638532043227},rotation:{x:.10097982515264096,y:-.08951486794775967,z:.009057689778807852},position:{x:-2.068902863703856,y:-6.496271082713816,z:38.234846904263634},duration:3e3},{target:{x:.1622957997569125,y:-3.9902934543089152,z:13.502638532043227},rotation:{x:.19506284443157462,y:-.006899326748472167,z:.0013631235335524118},position:{x:-.018964576555341256,y:-9.082502319224787,z:39.27617371206135},duration:3e3},{target:{x:.16229579975691166,y:-3.9902934543089152,z:13.502638532043227},rotation:{x:.12893695153979065,y:-.016478068964635943,z:.002136384686519943},position:{x:-.3173703387246788,y:-7.732836693369933,z:42.36775882939902},duration:3e3},{target:{x:6.144756127792985,y:9.660596712788424,z:2.1980333853298513},rotation:{x:.05431055266183851,y:-.006519820639620049,z:.00035444109802562667},position:{x:5.911737548938378,y:7.720517571205255,z:37.8848596504053}},{target:{x:3.9997739777328456,y:9.051179964850755,z:1.9850453347173265},rotation:{x:.1299511730713895,y:-.028903275118999188,z:.0037767574389957945},position:{x:2.7316837862261014,y:3.3673732873188005,z:45.47657938896243}},{target:{x:3.9900705237040666,y:9.394735665067731,z:2.047535183857832},rotation:{x:.1841664525065421,y:-.15148509031885782,z:.028103022871118658},position:{x:-3.527705781198779,y:.376277246785623,z:50.461708711383594}},{target:{x:.17200928951473501,y:8.27842384947047,z:1.036964516290052},rotation:{x:.2305919534415037,y:-.10595295746287677,z:.02482273507610776},position:{x:-5.972839351013657,y:-4.927148855255352,z:57.28645700376735}},{target:{x:-.32311849179209784,y:1.6075223740189948,z:-4.203116381275647},rotation:{x:.15025105270145714,y:.041325367200801606,z:-.0062544684621666236},position:{x:2.528742228140031,y:-8.716441971339679,z:63.99046928527416}},{target:{x:-.32053755357901514,y:2.0595184597706933,z:-4.221543055098817},rotation:{x:-.041543200699153744,y:-.13904149403837568,z:-.005760885953106631},position:{x:-10.391147908215755,y:5.048168256457985,z:67.67783495576461}},{target:{x:-.32053755357901514,y:2.0595184597706933,z:-4.221543055098817},rotation:{x:-.0008836974097287115,y:.13227353580307136,z:.00011654925262010647},position:{x:10.298134173685312,y:2.1300458021531856,z:75.58781617497884}},{target:{x:-.32311849179209784,y:1.6075223740189952,z:-4.203116381275647},rotation:{x:.017226239328065517,y:.00409599878540551,z:-7056543803063446e-20},position:{x:.024017300210810166,y:.1476793995718957,z:80.5338098996226}},{target:{x:-.32311849179209784,y:1.6075223740189952,z:-4.203116381275647},rotation:{x:.0172262393280664,y:.004095998785406283,z:-7056543803065142e-20},position:{x:.042287605053138166,y:.07084555881144006,z:84.9936481249332}},{target:{x:-.32311849179209784,y:1.6075223740189952,z:-4.203116381275647},rotation:{x:.017226239328066405,y:.004095998785406282,z:-705654380306514e-19},position:{x:.06151950488709679,y:-.01003216830474285,z:89.68821467789131}},{target:{x:.49064905365178746,y:7.449549439769696,z:-3.8776896597857},rotation:{x:.05563813933552464,y:-.0034378877876218438,z:.00019147491815764132},position:{x:-.17134478435291756,y:-3.2584674166395198,z:188.3818907010532},duration:8e3}],t.currentIndex=0;var n=t.three,a=n.camera,s=n.scene,c=t.dummies[0];(e=a.position).set.apply(e,Object(o.default)(x()(c.position))),(r=a.rotation).set.apply(r,Object(o.default)(x()(c.rotation))),a.zoom=.8,a.updateProjectionMatrix();var l=t.three.controls;(i=l.target).set.apply(i,Object(o.default)(x()(c.target))),l.update();var u=2.2,h=new THREE.PlaneGeometry(u,3*u/4),d=new THREE.TextureLoader,p=new THREE.MeshBasicMaterial({map:d.setCrossOrigin(!0).load("/static/photo1.jpg")}),f=new THREE.Mesh(h,p);f.position.set(0,1.5,.01),s.add(f);var m=new THREE.PlaneGeometry(u,3*u/4),v=new THREE.TextureLoader,g=new THREE.MeshBasicMaterial({map:v.setCrossOrigin(!0).load("/static/photo2.jpg")}),y=new THREE.Mesh(m,g);y.position.set(5,-3,6.01),s.add(y);var E=new THREE.PlaneGeometry(2,1.5),b=new THREE.TextureLoader,w=new THREE.MeshBasicMaterial({map:b.setCrossOrigin(!0).load("/static/photo3.jpg")}),M=new THREE.Mesh(E,w);M.position.set(10,3,12.01),s.add(M);var _=new THREE.PlaneGeometry(2,1.5),S=new THREE.TextureLoader,R=new THREE.MeshBasicMaterial({map:S.setCrossOrigin(!0).load("/static/photo4.jpg")}),A=new THREE.Mesh(_,R);A.position.set(-5,-6,18.01),s.add(A);var z=document.getElementById("video1"),C=new THREE.VideoTexture(z),P=new THREE.MeshBasicMaterial({map:C}),L=new THREE.PlaneBufferGeometry(u,3*u/4);C.minFilter=THREE.LinearFilter;var D=new THREE.Mesh(L,P);D.position.set(-7.2,-3,19.51),s.add(D);var U=document.getElementById("video2"),H=new THREE.VideoTexture(U),O=new THREE.MeshBasicMaterial({map:H}),I=new THREE.PlaneBufferGeometry(u,3*u/4);H.minFilter=THREE.LinearFilter;var N=new THREE.Mesh(I,O);N.position.set(-10,10,24.01),s.add(N);var B=new THREE.PlaneGeometry(u,3*u/4),F=new THREE.TextureLoader,G=new THREE.MeshBasicMaterial({map:F.setCrossOrigin(!0).load("/static/photo5.jpg")}),V=new THREE.Mesh(B,G);V.position.set(-8.7,7.5,25.31),s.add(V);var j=document.getElementById("video3"),k=new THREE.VideoTexture(j),W=new THREE.MeshBasicMaterial({map:k}),X=new THREE.PlaneBufferGeometry(u,3*u/4);k.minFilter=THREE.LinearFilter,(q=new THREE.Mesh(X,W)).position.set(0,-6,30.01),s.add(q);var q,Y=new THREE.PlaneGeometry(u,3*u/4),Z=new THREE.TextureLoader,Q=new THREE.MeshBasicMaterial({map:Z.setCrossOrigin(!0).load("/static/photo5.jpg")});(q=new THREE.Mesh(Y,Q)).position.set(-8.7,7.5,25.31),s.add(q);Y=new THREE.PlaneGeometry(u,3*u/4),Z=new THREE.TextureLoader,Q=new THREE.MeshBasicMaterial({map:Z.setCrossOrigin(!0).load("/static/photo6_1.jpg")});var J=new THREE.Mesh(Y,Q);J.position.set(-3,-6,35.01),s.add(J);var K=new THREE.PlaneGeometry(u,3*u/4),$=new THREE.TextureLoader,ee=new THREE.MeshBasicMaterial({map:$.setCrossOrigin(!0).load("/static/photo6_2.jpg")}),te=new THREE.Mesh(K,ee);te.position.set(0,-9,37.01),s.add(te);var re=new THREE.PlaneGeometry(u,3*u/4),ie=new THREE.TextureLoader,ne=new THREE.MeshBasicMaterial({map:ie.setCrossOrigin(!0).load("/static/photo6_3.jpg")}),ae=new THREE.Mesh(re,ne);ae.position.set(1,-6,39.01),s.add(ae);var oe=document.getElementById("video4"),se=new THREE.VideoTexture(oe),ce=new THREE.MeshBasicMaterial({map:se}),le=new THREE.PlaneBufferGeometry(u,3*u/4);se.minFilter=THREE.LinearFilter;var ue=new THREE.Mesh(le,ce);ue.position.set(6,8,36.01),s.add(ue);var he=document.getElementById("video5"),de=new THREE.VideoTexture(he),pe=new THREE.MeshBasicMaterial({map:de}),fe=new THREE.PlaneBufferGeometry(u,3*u/4);de.minFilter=THREE.LinearFilter;var me=new THREE.Mesh(fe,pe);me.position.set(3,4,42.01),s.add(me);var ve=document.getElementById("video6"),ge=new THREE.VideoTexture(ve),ye=new THREE.MeshBasicMaterial({map:ge}),xe=new THREE.PlaneBufferGeometry(u,3*u/4);ge.minFilter=THREE.NearestFilter;var Ee=new THREE.Mesh(xe,ye);Ee.position.set(-3,1,48.01),s.add(Ee);var be=document.getElementById("video7"),we=new THREE.VideoTexture(be),Te=new THREE.MeshBasicMaterial({map:we}),Me=new THREE.PlaneBufferGeometry(u,3*u/4);we.minFilter=THREE.NearestFilter;var _e=new THREE.Mesh(Me,Te);_e.position.set(-6,-4,54.01),s.add(_e);var Se=document.getElementById("video8"),Re=new THREE.VideoTexture(Se),Ae=new THREE.MeshBasicMaterial({map:Re}),ze=new THREE.PlaneBufferGeometry(u,3*u/4);Re.minFilter=THREE.NearestFilter;var Ce=new THREE.Mesh(ze,Ae);Ce.position.set(3,-8,60.01),s.add(Ce);var Pe=new THREE.PlaneGeometry(u,3*u/4),Le=new THREE.TextureLoader,De=new THREE.MeshBasicMaterial({map:Le.setCrossOrigin(!0).load("/static/photo12.jpg")}),Ue=new THREE.Mesh(Pe,De);Ue.position.set(-10,5,66.01),s.add(Ue);var He=document.getElementById("video9"),Oe=new THREE.VideoTexture(He),Ie=new THREE.MeshBasicMaterial({map:Oe}),Ne=new THREE.PlaneBufferGeometry(u,3*u/4);Oe.minFilter=THREE.NearestFilter;var Be=new THREE.Mesh(Ne,Ie);Be.position.set(10,2,72.01),s.add(Be);var Fe=new THREE.PlaneGeometry(2,1.5),Ge=new THREE.TextureLoader,Ve=new THREE.MeshBasicMaterial({map:Ge.setCrossOrigin(!0).load("/static/photo14.jpg")});(je=new THREE.Mesh(Fe,Ve)).position.set(0,0,78.01),s.add(je);var je;Fe=new THREE.PlaneGeometry(2,1.5),Ge=new THREE.TextureLoader,Ve=new THREE.MeshBasicMaterial({map:Ge.setCrossOrigin(!0).load("/static/photo14.jpg")});(je=new THREE.Mesh(Fe,Ve)).position.set(0,0,78.01),s.add(je);var ke=new THREE.PlaneGeometry(2,1.5),We=new THREE.TextureLoader,Xe=new THREE.MeshBasicMaterial({map:We.setCrossOrigin(!0).load("/static/photo15.jpg")}),qe=new THREE.Mesh(ke,Xe);qe.position.set(0,0,81.01),s.add(qe);var Ye=new THREE.PlaneGeometry(2,1.5),Ze=new THREE.TextureLoader,Qe=new THREE.MeshBasicMaterial({map:Ze.setCrossOrigin(!0).load("/static/photo16.jpg")}),Je=new THREE.Mesh(Ye,Qe);Je.position.set(0,0,87.01),s.add(Je);var Ke=new THREE.CircleGeometry(1.5,64),$e=new THREE.MeshBasicMaterial({color:0}),et=new THREE.Mesh(Ke,$e);et.position.set(0,1.5,0),s.add(et);var tt=new THREE.CircleGeometry(1.5,64),rt=new THREE.MeshBasicMaterial({color:0}),it=new THREE.Mesh(tt,rt);it.position.set(5,-3,6),s.add(it);var nt=new THREE.CircleGeometry(1.5,64),at=new THREE.MeshBasicMaterial({color:0}),ot=new THREE.Mesh(nt,at);ot.position.set(10,3,12),s.add(ot);var st=new THREE.CircleGeometry(1.5,64),ct=new THREE.MeshBasicMaterial({color:0}),lt=new THREE.Mesh(st,ct);lt.position.set(-5,-6,18),s.add(lt);var ut=new THREE.CircleGeometry(1.5,64),ht=new THREE.MeshBasicMaterial({color:0}),dt=new THREE.Mesh(ut,ht);dt.position.set(-7.2,-3,19.5),s.add(dt);var pt=new THREE.CircleGeometry(1.5,64),ft=new THREE.MeshBasicMaterial({color:0}),mt=new THREE.Mesh(pt,ft);mt.position.set(-10,10,24),s.add(mt);new THREE.CircleGeometry(1.5,64);var vt=new THREE.MeshBasicMaterial({color:0}),gt=new THREE.Mesh(pt,vt);gt.position.set(-8.7,7.5,25.3),s.add(gt);var yt=new THREE.CircleGeometry(1.5,64),xt=new THREE.MeshBasicMaterial({color:0}),Et=new THREE.Mesh(yt,xt);Et.position.set(0,-6,30),s.add(Et);var bt=new THREE.CircleGeometry(1.5,64),wt=new THREE.MeshBasicMaterial({color:0}),Tt=new THREE.Mesh(bt,wt);Tt.position.set(-3,-6,35),s.add(Tt);var Mt=new THREE.CircleGeometry(1.5,64),_t=new THREE.MeshBasicMaterial({color:0}),St=new THREE.Mesh(Mt,_t);St.position.set(0,-9,37),s.add(St);var Rt=new THREE.CircleGeometry(1.5,64),At=new THREE.MeshBasicMaterial({color:0}),zt=new THREE.Mesh(Rt,At);zt.position.set(1,-6,39),s.add(zt);var Ct=new THREE.CircleGeometry(1.5,64),Pt=new THREE.MeshBasicMaterial({color:0}),Lt=new THREE.Mesh(Ct,Pt);Lt.position.set(6,8,36),s.add(Lt);var Dt=new THREE.CircleGeometry(1.5,64),Ut=new THREE.MeshBasicMaterial({color:0}),Ht=new THREE.Mesh(Dt,Ut);Ht.position.set(3,4,42),s.add(Ht);var Ot=new THREE.CircleGeometry(1.5,64),It=new THREE.MeshBasicMaterial({color:0}),Nt=new THREE.Mesh(Ot,It);Nt.position.set(-3,1,48),s.add(Nt);var Bt=new THREE.CircleGeometry(1.5,64),Ft=new THREE.MeshBasicMaterial({color:0}),Gt=new THREE.Mesh(Bt,Ft);Gt.position.set(-6,-4,54),s.add(Gt);var Vt=new THREE.CircleGeometry(1.5,64),jt=new THREE.MeshBasicMaterial({color:0}),kt=new THREE.Mesh(Vt,jt);kt.position.set(3,-8,60),s.add(kt);var Wt=new THREE.CircleGeometry(1.5,64),Xt=new THREE.MeshBasicMaterial({color:0}),qt=new THREE.Mesh(Wt,Xt);qt.position.set(-10,5,66),s.add(qt);var Yt=new THREE.CircleGeometry(1.5,64),Zt=new THREE.MeshBasicMaterial({color:0}),Qt=new THREE.Mesh(Yt,Zt);Qt.position.set(10,2,72),s.add(Qt);var Jt=new THREE.CircleGeometry(1.5,64),Kt=new THREE.MeshBasicMaterial({color:0}),$t=new THREE.Mesh(Jt,Kt);$t.position.set(0,0,78),s.add($t);var er=new THREE.CircleGeometry(1.5,64),tr=new THREE.MeshBasicMaterial({color:0}),rr=new THREE.Mesh(er,tr);rr.position.set(0,0,81),s.add(rr);var ir=new THREE.CircleGeometry(1.5,64),nr=new THREE.MeshBasicMaterial({color:0}),ar=new THREE.Mesh(ir,nr);ar.position.set(0,0,87),s.add(ar);for(var or=new THREE.CircleGeometry(.3,32),sr=0;sr<T.length;sr++){var cr=T[sr],lr=new THREE.MeshBasicMaterial({color:0}),ur=new THREE.Mesh(or,lr);ur.position.set(cr.x,cr.y,cr.z),s.add(ur)}var hr=new THREE.CatmullRomCurve3([new THREE.Vector3(0,1.2,77.9),new THREE.Vector3(11.5,3.7,70),new THREE.Vector3(-10.3,6.3,66),new THREE.Vector3(3.5,-7.2,60),new THREE.Vector3(-6,-2.8,54),new THREE.Vector3(-3,2.2,48),new THREE.Vector3(3,5.2,42),new THREE.Vector3(6,9.3,36),new THREE.Vector3(0,-5.2,30),new THREE.Vector3(-10,11.2,24),new THREE.Vector3(-5,-5,18),new THREE.Vector3(10,4.2,12),new THREE.Vector3(5,-1.95,6),new THREE.Vector3(0,2.7,0)]),dr=new THREE.TubeBufferGeometry(hr,400,.05,8,!1),pr=new THREE.MeshLambertMaterial({color:6710886,wireframe:!1,opacity:.5,transparent:!0}),fr=new THREE.Mesh(dr,pr);fr.material.opacity=0,s.add(fr),t.tube=fr}),Object(p.a)(Object(h.default)(t),"prev",function(){var e=t.three,r=e.camera,i=e.controls,n=t.dummies[t.currentIndex-1];n&&(new w.a.Tween(r.position).easing(w.a.Easing.Quadratic.InOut).to(n.position,800).start(),new w.a.Tween(r.rotation).easing(w.a.Easing.Quadratic.InOut).to(n.rotation,800).start(),new w.a.Tween(i.target).easing(w.a.Easing.Quadratic.InOut).to(n.target,800).start(),t.currentIndex=t.currentIndex-1,t.handleVideos())}),Object(p.a)(Object(h.default)(t),"next",function(){var e=t.three,r=e.camera,i=e.controls,n=t.dummies[t.currentIndex+1];n&&(new w.a.Tween(r.position).easing(w.a.Easing.Quadratic.InOut).to(n.position,n.duration||800).start(),new w.a.Tween(r.rotation).easing(w.a.Easing.Quadratic.InOut).to(n.rotation,n.duration||800).start(),new w.a.Tween(i.target).easing(w.a.Easing.Quadratic.InOut).to(n.target,n.duration||800).start(),new w.a.Tween(t.tube.material).easing(w.a.Easing.Quadratic.InOut).to({opacity:.5},800).start(),t.currentIndex=t.currentIndex+1,t.handleVideos())}),Object(p.a)(Object(h.default)(t),"handleVideos",function(){if(4===t.currentIndex){document.getElementById("video1").play()}else{var e=document.getElementById("video1");e.pause(),e.currentTime=0}if(5===t.currentIndex){document.getElementById("video2").play()}else{var r=document.getElementById("video2");r.pause(),r.currentTime=0}if(6===t.currentIndex||7===t.currentIndex||8===t.currentIndex||9===t.currentIndex){document.getElementById("video3").play()}else{var i=document.getElementById("video3");i.pause(),i.currentTime=0}if(10===t.currentIndex){document.getElementById("video4").play()}else{var n=document.getElementById("video4");n.pause(),n.currentTime=0}if(11===t.currentIndex){document.getElementById("video5").play()}else{var a=document.getElementById("video5");a.pause(),a.currentTime=0}if(12===t.currentIndex){document.getElementById("video6").play()}else{var o=document.getElementById("video6");o.pause(),o.currentTime=0}if(13===t.currentIndex){document.getElementById("video7").play()}else{var s=document.getElementById("video7");s.pause(),s.currentTime=0}if(14===t.currentIndex){document.getElementById("video8").play()}else{var c=document.getElementById("video8");c.pause(),c.currentTime=0}if(16===t.currentIndex){document.getElementById("video9").play()}else{var l=document.getElementById("video9");l.pause(),l.currentTime=0}}),t.three={},t.renderThree=t.renderThree.bind(Object(h.default)(t)),t.renderLoop=t.renderLoop.bind(Object(h.default)(t)),t.handleResize=g()(t.handleResize.bind(Object(h.default)(t)),100,!1),t}return Object(d.default)(r,t),Object(c.default)(r,[{key:"componentDidMount",value:function(){var t=Object(a.default)(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.results=[],window.addEventListener("resize",this.handleResize),window.addEventListener("keydown",this.handleKeyDown,!0),this.initThree(window.innerWidth,window.innerHeight),this.initScene(),this.initEffects(),this.initModel(),this.renderLoop();case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.renderLoop=function(){},window.removeEventListener("resize",this.handleResize),window.removeEventListener("keydown",this.handleKeyDown,!0)}},{key:"handleResize",value:function(){var e=this.three,t=e.renderer,r=e.camera,i=e.composer,n=window.innerWidth,a=window.innerHeight;console.log("width",n,"height",a),r.aspect=n/a,r.updateProjectionMatrix(),t.setSize(n,a),i.setSize(n,a)}},{key:"initThree",value:function(t,r){var i=new THREE.WebGLRenderer({canvas:this.canvas,alpha:!0,antialias:!0,preserveDrawingBuffer:!0});i.setClearColor(16777215),i.setPixelRatio(1),i.setSize(t,r),i.gammaInput=!0,i.gammaOutput=!0;var n,a=new THREE.PerspectiveCamera(50,t/r,1,1e4);a.lookAt(new THREE.Vector3),(n=new THREE.OrbitControls(a,this.canvas)).enableZoom=!0,n.enablePan=!0,n.enableDamping=!0,n.dampingFactor=.1,n.rotateSpeed=.12;var o=new THREE.Raycaster;this.three.renderer=i,this.three.camera=a,this.three.controls=n,this.three.raycaster=o,e.renderer=i,e.camera=a,e.controls=n,e.raycaster=o}},{key:"initScene",value:function(){var e=this.three.renderer,t=new THREE.Scene;t.background=new THREE.Color(16777215);var r=new THREE.GridHelper(100,100,13421772,4473924);r.rotateX(.1),r.translateZ(-.1),t.add(r);var i=new THREE.DirectionalLight(12303291);i.position.set(50,50,10),i.castShadow=!0,t.add(i),t.add(new THREE.AmbientLight(5592405));var n=new THREE.HemisphereLight(13421772,16777215,.5);n.groundColor.setHSL(1,0,.5),n.position.set(0,500,100),t.add(n),t.fog=new THREE.FogExp2(16777215,.03),e.setClearColor(t.fog.color),this.three.scene=t}},{key:"initEffects",value:function(){var e=this.three,t=e.scene,r=e.camera,i=e.renderer;i.setScissor(0,0,window.innerWidth,window.innerHeight);var n,a=new THREE.EffectComposer(i),o=new THREE.RenderPass(t,r);a.addPass(o),(n=new THREE.ShaderPass(THREE.VignetteShader)).uniforms.offset.value=.5,n.uniforms.darkness.value=4,n.renderToScreen=!0,a.addPass(n),this.three.composer=a}},{key:"renderThree",value:function(){var e=this.three,t=e.scene,r=e.renderer,i=e.composer,n=e.controls;t.updateMatrixWorld(),w.a.update(),n.update(),r.clear(),i.render(.01)}},{key:"renderLoop",value:function(){requestAnimationFrame(this.renderLoop),this.renderThree()}},{key:"render",value:function(){var e=this;return m.a.createElement(E.a,null,m.a.createElement("div",{style:{display:"flex"}},m.a.createElement("canvas",{className:"view-canvas",ref:function(t){return e.canvas=t}}),m.a.createElement("div",{className:"control-bar fixed top-0 left-0 white w-100 z-999 mb3 ph4 flex items-end content-end justify-between flex-wrap"},m.a.createElement("div",{className:"pointer"},m.a.createElement("a",{className:"pa1",onClick:this.prev},m.a.createElement("span",{className:"v-mid"},"Prev"))),m.a.createElement("div",{className:"pointer"},m.a.createElement("a",{className:"pa1",onClick:this.next},m.a.createElement("span",{className:"v-mid"},"Next"))))),m.a.createElement("video",{id:"video1",loop:!0,crossOrigin:"anonymous",style:{display:"none"}},m.a.createElement("source",{src:"/static/video1.mp4",type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'})),m.a.createElement("video",{id:"video2",loop:!0,crossOrigin:"anonymous",style:{display:"none"}},m.a.createElement("source",{src:"/static/video2.mp4",type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'})),m.a.createElement("video",{id:"video3",loop:!0,crossOrigin:"anonymous",style:{display:"none"}},m.a.createElement("source",{src:"/static/video3.mp4",type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'})),m.a.createElement("video",{id:"video4",loop:!0,crossOrigin:"anonymous",style:{display:"none"}},m.a.createElement("source",{src:"/static/video4.mp4",type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'})),m.a.createElement("video",{id:"video5",loop:!0,crossOrigin:"anonymous",style:{display:"none"}},m.a.createElement("source",{src:"/static/video5.mp4",type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'})),m.a.createElement("video",{id:"video6",loop:!0,crossOrigin:"anonymous",style:{display:"none"}},m.a.createElement("source",{src:"/static/video6.mp4",type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'})),m.a.createElement("video",{id:"video7",loop:!0,crossOrigin:"anonymous",style:{display:"none"}},m.a.createElement("source",{src:"/static/video7.mp4",type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'})),m.a.createElement("video",{id:"video8",loop:!0,crossOrigin:"anonymous",style:{display:"none"}},m.a.createElement("source",{src:"/static/video8.mp4",type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'})),m.a.createElement("video",{id:"video9",loop:!0,crossOrigin:"anonymous",style:{display:"none"}},m.a.createElement("source",{src:"/static/video9.mp4",type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'})))}}]),r}(m.a.Component);t.default=M}.call(this,r("yLpj"))},S8yY:function(e,t){THREE.ColorCorrectionShader={uniforms:{tDiffuse:{value:null},powRGB:{value:new THREE.Vector3(2,2,2)},mulRGB:{value:new THREE.Vector3(1,1,1)},addRGB:{value:new THREE.Vector3(0,0,0)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 powRGB;","uniform vec3 mulRGB;","uniform vec3 addRGB;","varying vec2 vUv;","void main() {","gl_FragColor = texture2D( tDiffuse, vUv );","gl_FragColor.rgb = mulRGB * pow( ( gl_FragColor.rgb + addRGB ), powRGB );","}"].join("\n")}},"UNi/":function(e,t){e.exports=function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}},UtEt:function(e,t){THREE.LuminosityHighPassShader={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{type:"t",value:null},luminosityThreshold:{type:"f",value:1},smoothWidth:{type:"f",value:1},defaultColor:{type:"c",value:new THREE.Color(0)},defaultOpacity:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","gl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")}},V6Ve:function(e,t,r){var i=r("kekF")(Object.keys,Object);e.exports=i},VOCu:function(e,t){THREE.UnrealBloomPass=function(e,t,r,i){THREE.Pass.call(this),this.strength=void 0!==t?t:1,this.radius=r,this.threshold=i,this.resolution=void 0!==e?new THREE.Vector2(e.x,e.y):new THREE.Vector2(256,256);var n={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var a=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);this.renderTargetBright=new THREE.WebGLRenderTarget(a,o,n),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var s=0;s<this.nMips;s++){var c;(c=new THREE.WebGLRenderTarget(a,o,n)).texture.name="UnrealBloomPass.h"+s,c.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(c),(c=new THREE.WebGLRenderTarget(a,o,n)).texture.name="UnrealBloomPass.v"+s,c.texture.generateMipmaps=!1,this.renderTargetsVertical.push(c),a=Math.round(a/2),o=Math.round(o/2)}void 0===THREE.LuminosityHighPassShader&&console.error("THREE.UnrealBloomPass relies on THREE.LuminosityHighPassShader");var l=THREE.LuminosityHighPassShader;this.highPassUniforms=THREE.UniformsUtils.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new THREE.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var u=[3,5,7,9,11];for(a=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2),s=0;s<this.nMips;s++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(u[s])),this.separableBlurMaterials[s].uniforms.texSize.value=new THREE.Vector2(a,o),a=Math.round(a/2),o=Math.round(o/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new THREE.Vector3(1,1,1),new THREE.Vector3(1,1,1),new THREE.Vector3(1,1,1),new THREE.Vector3(1,1,1),new THREE.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===THREE.CopyShader&&console.error("THREE.BloomPass relies on THREE.CopyShader");var h=THREE.CopyShader;this.copyUniforms=THREE.UniformsUtils.clone(h.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new THREE.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,blending:THREE.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new THREE.Color,this.oldClearAlpha=1,this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.UnrealBloomPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.UnrealBloomPass,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length();e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length();e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,t){var r=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(r,i);for(var n=0;n<this.nMips;n++)this.renderTargetsHorizontal[n].setSize(r,i),this.renderTargetsVertical[n].setSize(r,i),this.separableBlurMaterials[n].uniforms.texSize.value=new THREE.Vector2(r,i),r=Math.round(r/2),i=Math.round(i/2)},render:function(e,t,r,i,n){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var a=e.autoClear;e.autoClear=!1,e.setClearColor(new THREE.Color(0,0,0),0),n&&e.context.disable(e.context.STENCIL_TEST),this.highPassUniforms.tDiffuse.value=r.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.quad.material=this.materialHighPassFilter,e.render(this.scene,this.camera,this.renderTargetBright,!0);for(var o=this.renderTargetBright,s=0;s<this.nMips;s++)this.quad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[s].uniforms.direction.value=THREE.UnrealBloomPass.BlurDirectionX,e.render(this.scene,this.camera,this.renderTargetsHorizontal[s],!0),this.separableBlurMaterials[s].uniforms.colorTexture.value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms.direction.value=THREE.UnrealBloomPass.BlurDirectionY,e.render(this.scene,this.camera,this.renderTargetsVertical[s],!0),o=this.renderTargetsVertical[s];this.quad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.render(this.scene,this.camera,this.renderTargetsHorizontal[0],!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,n&&e.context.enable(e.context.STENCIL_TEST),e.render(this.scene,this.camera,r,!1),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=a},getSeperableBlurMaterial:function(e){return new THREE.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new THREE.Vector2(.5,.5)},direction:{value:new THREE.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(e){return new THREE.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t \t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),THREE.UnrealBloomPass.BlurDirectionX=new THREE.Vector2(1,0),THREE.UnrealBloomPass.BlurDirectionY=new THREE.Vector2(0,1)},VciW:function(e,t,r){(function(t){(function(){var r,i,n;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(r()-n)/1e6},i=t.hrtime,n=(r=function(){var e;return 1e9*(e=i())[0]+e[1]})()):Date.now?(e.exports=function(){return Date.now()-n},n=Date.now()):(e.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)}).call(this,r("8oxB"))},WFqU:function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r("yLpj"))},YJSH:function(e,t){THREE.EdgeShader2={uniforms:{tDiffuse:{value:null},aspect:{value:new THREE.Vector2(512,512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","uniform vec2 aspect;","vec2 texel = vec2(1.0 / aspect.x, 1.0 / aspect.y);","mat3 G[2];","const mat3 g0 = mat3( 1.0, 2.0, 1.0, 0.0, 0.0, 0.0, -1.0, -2.0, -1.0 );","const mat3 g1 = mat3( 1.0, 0.0, -1.0, 2.0, 0.0, -2.0, 1.0, 0.0, -1.0 );","void main(void)","{","mat3 I;","float cnv[2];","vec3 sample;","G[0] = g0;","G[1] = g1;","for (float i=0.0; i<3.0; i++)","for (float j=0.0; j<3.0; j++) {","sample = texture2D( tDiffuse, vUv + texel * vec2(i-1.0,j-1.0) ).rgb;","I[int(i)][int(j)] = length(sample);","}","for (int i=0; i<2; i++) {","float dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);","cnv[i] = dp3 * dp3; ","}","gl_FragColor = vec4(0.5 * sqrt(cnv[0]*cnv[0]+cnv[1]*cnv[1]));","} "].join("\n")}},Z0cm:function(e,t){var r=Array.isArray;e.exports=r},Z6NN:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=0);return t},e.exports=t.default},ZIIN:function(e,t){THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0,this.renderOrder=0},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0,this.renderOrder=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null,this.renderOrder=0},THREE.Projector=function(){var e,t,r,i,n,a,o,s,c,l,u,h=[],d=0,p=[],f=0,m=[],v=0,g=[],y=0,x=[],E=0,b={objects:[],lights:[],elements:[]},w=new THREE.Vector3,T=new THREE.Vector4,M=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),_=new THREE.Box3,S=new Array(3),R=new THREE.Matrix4,A=new THREE.Matrix4,z=new THREE.Matrix4,C=new THREE.Matrix3,P=new THREE.Frustum,L=new THREE.Vector4,D=new THREE.Vector4;this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")};var U=new function(){var e=[],t=[],i=[],a=null,s=null,c=new THREE.Matrix3;function l(e){var t=e.position,r=e.positionWorld,i=e.positionScreen;r.copy(t).applyMatrix4(u),i.copy(r).applyMatrix4(A);var n=1/i.w;i.x*=n,i.y*=n,i.z*=n,e.visible=i.x>=-1&&i.x<=1&&i.y>=-1&&i.y<=1&&i.z>=-1&&i.z<=1}function h(e,t,r){return!0===e.visible||!0===t.visible||!0===r.visible||(S[0]=e.positionScreen,S[1]=t.positionScreen,S[2]=r.positionScreen,M.intersectsBox(_.setFromPoints(S)))}function d(e,t,r){return(r.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(r.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0}return{setObject:function(r){s=(a=r).material,c.getNormalMatrix(a.matrixWorld),e.length=0,t.length=0,i.length=0},projectVertex:l,checkTriangleVisibility:h,checkBackfaceCulling:d,pushVertex:function(e,t,i){(r=I()).position.set(e,t,i),l(r)},pushNormal:function(t,r,i){e.push(t,r,i)},pushColor:function(e,r,i){t.push(e,r,i)},pushUv:function(e,t){i.push(e,t)},pushLine:function(e,r){var i=p[e],n=p[r];i.positionScreen.copy(i.position).applyMatrix4(z),n.positionScreen.copy(n.position).applyMatrix4(z),!0===G(i.positionScreen,n.positionScreen)&&(i.positionScreen.multiplyScalar(1/i.positionScreen.w),n.positionScreen.multiplyScalar(1/n.positionScreen.w),(o=B()).id=a.id,o.v1.copy(i),o.v2.copy(n),o.z=Math.max(i.positionScreen.z,n.positionScreen.z),o.renderOrder=a.renderOrder,o.material=a.material,a.material.vertexColors===THREE.VertexColors&&(o.vertexColors[0].fromArray(t,3*e),o.vertexColors[1].fromArray(t,3*r)),b.elements.push(o))},pushTriangle:function(t,r,o){var l=p[t],u=p[r],f=p[o];if(!1!==h(l,u,f)&&(s.side===THREE.DoubleSide||!0===d(l,u,f))){(n=N()).id=a.id,n.v1.copy(l),n.v2.copy(u),n.v3.copy(f),n.z=(l.positionScreen.z+u.positionScreen.z+f.positionScreen.z)/3,n.renderOrder=a.renderOrder,n.normalModel.fromArray(e,3*t),n.normalModel.applyMatrix3(c).normalize();for(var m=0;m<3;m++){var v=n.vertexNormalsModel[m];v.fromArray(e,3*arguments[m]),v.applyMatrix3(c).normalize(),n.uvs[m].fromArray(i,2*arguments[m])}n.vertexNormalsLength=3,n.material=a.material,b.elements.push(n)}}}};function H(r){(e=function(){if(t===d){var e=new THREE.RenderableObject;return h.push(e),d++,t++,e}return h[t++]}()).id=r.id,e.object=r,w.setFromMatrixPosition(r.matrixWorld),w.applyMatrix4(A),e.z=w.z,e.renderOrder=r.renderOrder,b.objects.push(e)}function O(e,t,r){var i=1/e.w;e.z*=i,e.z>=-1&&e.z<=1&&((c=function(){if(l===E){var e=new THREE.RenderableSprite;return x.push(e),E++,l++,e}return x[l++]}()).id=t.id,c.x=e.x*i,c.y=e.y*i,c.z=e.z,c.renderOrder=t.renderOrder,c.object=t,c.rotation=t.rotation,c.scale.x=t.scale.x*Math.abs(c.x-(e.x+r.projectionMatrix.elements[0])/(e.w+r.projectionMatrix.elements[12])),c.scale.y=t.scale.y*Math.abs(c.y-(e.y+r.projectionMatrix.elements[5])/(e.w+r.projectionMatrix.elements[13])),c.material=t.material,b.elements.push(c))}function I(){if(i===f){var e=new THREE.RenderableVertex;return p.push(e),f++,i++,e}return p[i++]}function N(){if(a===v){var e=new THREE.RenderableFace;return m.push(e),v++,a++,e}return m[a++]}function B(){if(s===y){var e=new THREE.RenderableLine;return g.push(e),y++,s++,e}return g[s++]}function F(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function G(e,t){var r=0,i=1,n=e.z+e.w,a=t.z+t.w,o=-e.z+e.w,s=-t.z+t.w;return n>=0&&a>=0&&o>=0&&s>=0||!(n<0&&a<0||o<0&&s<0)&&(n<0?r=Math.max(r,n/(n-a)):a<0&&(i=Math.min(i,n/(n-a))),o<0?r=Math.max(r,o/(o-s)):s<0&&(i=Math.min(i,o/(o-s))),!(i<r)&&(e.lerp(t,r),t.lerp(e,1-i),!0))}this.projectScene=function(e,r,c,h){a=0,s=0,l=0,b.elements.length=0,!0===e.autoUpdate&&e.updateMatrixWorld(),null===r.parent&&r.updateMatrixWorld(),R.copy(r.matrixWorldInverse.getInverse(r.matrixWorld)),A.multiplyMatrices(r.projectionMatrix,R),P.setFromMatrix(A),t=0,b.objects.length=0,b.lights.length=0,function e(t){if(!1!==t.visible){if(t instanceof THREE.Light)b.lights.push(t);else if(t instanceof THREE.Mesh||t instanceof THREE.Line||t instanceof THREE.Points){if(!1===t.material.visible)return;if(!0===t.frustumCulled&&!1===P.intersectsObject(t))return;H(t)}else if(t instanceof THREE.Sprite){if(!1===t.material.visible)return;if(!0===t.frustumCulled&&!1===P.intersectsSprite(t))return;H(t)}for(var r=t.children,i=0,n=r.length;i<n;i++)e(r[i])}}(e),!0===c&&b.objects.sort(F);for(var d=b.objects,f=0,m=d.length;f<m;f++){var v=d[f].object,g=v.geometry;if(U.setObject(v),u=v.matrixWorld,i=0,v instanceof THREE.Mesh){if(g instanceof THREE.BufferGeometry){var y=g.attributes,x=g.groups;if(void 0===y.position)continue;for(var E=0,M=(xe=y.position.array).length;E<M;E+=3)U.pushVertex(xe[E],xe[E+1],xe[E+2]);if(void 0!==y.normal){var _=y.normal.array;for(E=0,M=_.length;E<M;E+=3)U.pushNormal(_[E],_[E+1],_[E+2])}if(void 0!==y.uv){var S=y.uv.array;for(E=0,M=S.length;E<M;E+=2)U.pushUv(S[E],S[E+1])}if(null!==g.index){var V=g.index.array;if(x.length>0)for(var j=0;j<x.length;j++){var k=x[j];for(E=k.start,M=k.start+k.count;E<M;E+=3)U.pushTriangle(V[E],V[E+1],V[E+2])}else for(E=0,M=V.length;E<M;E+=3)U.pushTriangle(V[E],V[E+1],V[E+2])}else for(E=0,M=xe.length/3;E<M;E+=3)U.pushTriangle(E,E+1,E+2)}else if(g instanceof THREE.Geometry){var W=g.vertices,X=g.faces,q=g.faceVertexUvs[0];C.getNormalMatrix(u);for(var Y=v.material,Z=Array.isArray(Y),Q=0,J=W.length;Q<J;Q++){var K=W[Q];if(w.copy(K),!0===Y.morphTargets)for(var $=g.morphTargets,ee=v.morphTargetInfluences,te=0,re=$.length;te<re;te++){var ie=ee[te];if(0!==ie){var ne=$[te].vertices[Q];w.x+=(ne.x-K.x)*ie,w.y+=(ne.y-K.y)*ie,w.z+=(ne.z-K.z)*ie}}U.pushVertex(w.x,w.y,w.z)}for(var ae=0,oe=X.length;ae<oe;ae++){var se=X[ae];if(void 0!==(Y=!0===Z?v.material[se.materialIndex]:v.material)){var ce=Y.side,le=p[se.a],ue=p[se.b],he=p[se.c];if(!1!==U.checkTriangleVisibility(le,ue,he)){var de=U.checkBackfaceCulling(le,ue,he);if(ce!==THREE.DoubleSide){if(ce===THREE.FrontSide&&!1===de)continue;if(ce===THREE.BackSide&&!0===de)continue}(n=N()).id=v.id,n.v1.copy(le),n.v2.copy(ue),n.v3.copy(he),n.normalModel.copy(se.normal),!1!==de||ce!==THREE.BackSide&&ce!==THREE.DoubleSide||n.normalModel.negate(),n.normalModel.applyMatrix3(C).normalize();for(var pe=se.vertexNormals,fe=0,me=Math.min(pe.length,3);fe<me;fe++){var ve=n.vertexNormalsModel[fe];ve.copy(pe[fe]),!1!==de||ce!==THREE.BackSide&&ce!==THREE.DoubleSide||ve.negate(),ve.applyMatrix3(C).normalize()}n.vertexNormalsLength=pe.length;var ge=q[ae];if(void 0!==ge)for(var ye=0;ye<3;ye++)n.uvs[ye].copy(ge[ye]);n.color=se.color,n.material=Y,n.z=(le.positionScreen.z+ue.positionScreen.z+he.positionScreen.z)/3,n.renderOrder=v.renderOrder,b.elements.push(n)}}}}}else if(v instanceof THREE.Line){if(z.multiplyMatrices(A,u),g instanceof THREE.BufferGeometry){if(void 0!==(y=g.attributes).position){var xe;for(E=0,M=(xe=y.position.array).length;E<M;E+=3)U.pushVertex(xe[E],xe[E+1],xe[E+2]);if(void 0!==y.color){var Ee=y.color.array;for(E=0,M=Ee.length;E<M;E+=3)U.pushColor(Ee[E],Ee[E+1],Ee[E+2])}if(null!==g.index)for(E=0,M=(V=g.index.array).length;E<M;E+=2)U.pushLine(V[E],V[E+1]);else{var be=v instanceof THREE.LineSegments?2:1;for(E=0,M=xe.length/3-1;E<M;E+=be)U.pushLine(E,E+1)}}}else if(g instanceof THREE.Geometry){if(0===(W=v.geometry.vertices).length)continue;(le=I()).positionScreen.copy(W[0]).applyMatrix4(z);for(be=v instanceof THREE.LineSegments?2:1,Q=1,J=W.length;Q<J;Q++)(le=I()).positionScreen.copy(W[Q]).applyMatrix4(z),(Q+1)%be>0||(ue=p[i-2],L.copy(le.positionScreen),D.copy(ue.positionScreen),!0===G(L,D)&&(L.multiplyScalar(1/L.w),D.multiplyScalar(1/D.w),(o=B()).id=v.id,o.v1.positionScreen.copy(L),o.v2.positionScreen.copy(D),o.z=Math.max(L.z,D.z),o.renderOrder=v.renderOrder,o.material=v.material,v.material.vertexColors===THREE.VertexColors&&(o.vertexColors[0].copy(v.geometry.colors[Q]),o.vertexColors[1].copy(v.geometry.colors[Q-1])),b.elements.push(o)))}}else if(v instanceof THREE.Points){if(z.multiplyMatrices(A,u),g instanceof THREE.Geometry)for(Q=0,J=(W=v.geometry.vertices).length;Q<J;Q++){K=W[Q];T.set(K.x,K.y,K.z,1),T.applyMatrix4(z),O(T,v,r)}}else v instanceof THREE.Sprite&&(T.set(u.elements[12],u.elements[13],u.elements[14],1),T.applyMatrix4(A),O(T,v,r))}return!0===h&&b.elements.sort(F),b}}},ajxh:function(e,t){THREE.BokehPass=function(e,t,r){THREE.Pass.call(this),this.scene=e,this.camera=t;var i=void 0!==r.focus?r.focus:1,n=void 0!==r.aspect?r.aspect:t.aspect,a=void 0!==r.aperture?r.aperture:.025,o=void 0!==r.maxblur?r.maxblur:1,s=r.width||window.innerWidth||1,c=r.height||window.innerHeight||1;this.renderTargetColor=new THREE.WebGLRenderTarget(s,c,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat}),this.renderTargetColor.texture.name="BokehPass.color",this.renderTargetDepth=this.renderTargetColor.clone(),this.renderTargetDepth.texture.name="BokehPass.depth",this.materialDepth=new THREE.MeshDepthMaterial,void 0===THREE.BokehShader&&console.error("THREE.BokehPass relies on THREE.BokehShader");var l=THREE.BokehShader,u=THREE.UniformsUtils.clone(l.uniforms);u.tDepth.value=this.renderTargetDepth.texture,u.focus.value=i,u.aspect.value=n,u.aperture.value=a,u.maxblur.value=o,this.materialBokeh=new THREE.ShaderMaterial({uniforms:u,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.uniforms=u,this.needsSwap=!1,this.camera2=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new THREE.Scene,this.quad2=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2)},THREE.BokehPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.BokehPass,render:function(e,t,r,i,n){this.quad2.material=this.materialBokeh,this.scene.overrideMaterial=this.materialDepth,e.render(this.scene,this.camera,this.renderTargetDepth,!0),this.uniforms.tColor.value=r.texture,this.renderToScreen?e.render(this.scene2,this.camera2):e.render(this.scene2,this.camera2,t,this.clear),this.scene.overrideMaterial=null}})},b80T:function(e,t,r){var i=r("UNi/"),n=r("03A+"),a=r("Z0cm"),o=r("DSRE"),s=r("wJg7"),c=r("c6wG"),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),u=!r&&n(e),h=!r&&!u&&o(e),d=!r&&!u&&!h&&c(e),p=r||u||h||d,f=p?i(e.length,String):[],m=f.length;for(var v in e)!t&&!l.call(e,v)||p&&("length"==v||h&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,m))||f.push(v);return f}},bQgK:function(e,t,r){(function(t){(function(){var r,i,n,a,o,s;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(r()-o)/1e6},i=t.hrtime,a=(r=function(){var e;return 1e9*(e=i())[0]+e[1]})(),s=1e9*t.uptime(),o=a-s):Date.now?(e.exports=function(){return Date.now()-n},n=Date.now()):(e.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)}).call(this,r("8oxB"))},c6wG:function(e,t,r){var i=r("dD9F"),n=r("sEf8"),a=r("mdPL"),o=a&&a.isTypedArray,s=o?n(o):i;e.exports=s},cQXM:function(e,t){THREE.BokehShader={uniforms:{tColor:{value:null},tDepth:{value:null},focus:{value:1},aspect:{value:1},aperture:{value:.025},maxblur:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D tColor;","uniform sampler2D tDepth;","uniform float maxblur;","uniform float aperture;","uniform float focus;","uniform float aspect;","void main() {","vec2 aspectcorrect = vec2( 1.0, aspect );","vec4 depth1 = texture2D( tDepth, vUv );","float factor = depth1.x - focus;","vec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );","vec2 dofblur9 = dofblur * 0.9;","vec2 dofblur7 = dofblur * 0.7;","vec2 dofblur4 = dofblur * 0.4;","vec4 col = vec4( 0.0 );","col += texture2D( tColor, vUv.xy );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );","gl_FragColor = col / 41.0;","gl_FragColor.a = 1.0;","}"].join("\n")}},dD9F:function(e,t,r){var i=r("NykK"),n=r("shjB"),a=r("ExA7"),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&n(e.length)&&!!o[i(e)]}},eUgh:function(e,t){e.exports=function(e,t){for(var r=-1,i=null==e?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}},fXKH:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t,r,n,a,o,s){var c=r+(-a*(t-n)+-o*r)*e,l=t+c*e;if(Math.abs(c)<s&&Math.abs(l-n)<s)return i[0]=n,i[1]=0,i;return i[0]=l,i[1]=c,i};var i=[0,0];e.exports=t.default},gKUX:function(e,t){THREE.VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float v;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")}},iZPw:function(e,t){THREE.VerticalTiltShiftShader={uniforms:{tDiffuse:{value:null},v:{value:1/512},r:{value:.35}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float v;","uniform float r;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","float vv = v * abs( r - vUv.y );","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * vv ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * vv ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * vv ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * vv ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * vv ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * vv ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * vv ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * vv ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")}},kXpG:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t,r){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(0!==r[i])return!1;var n="number"==typeof t[i]?t[i]:t[i].val;if(e[i]!==n)return!1}return!0},e.exports=t.default},kekF:function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},lSCD:function(e,t,r){var i=r("NykK"),n=r("GoyQ"),a="[object AsyncFunction]",o="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";e.exports=function(e){if(!n(e))return!1;var t=i(e);return t==o||t==s||t==a||t==c}},"m+O+":function(e,t){THREE.ColladaLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ColladaLoader.prototype={constructor:THREE.ColladaLoader,load:function(e,t,r,i){var n=this;new THREE.FileLoader(n.manager).load(e,function(e){t(n.parse(e))},r,i)},options:{set convertUpAxis(e){console.log("ColladaLoder.options.convertUpAxis: TODO")}},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){function t(e,t){for(var r=[],i=e.childNodes,n=0,a=i.length;n<a;n++){var o=i[n];o.nodeName===t&&r.push(o)}return r}function r(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),i=0,n=t.length;i<n;i++)r[i]=parseFloat(t[i]);return r}function i(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),i=0,n=t.length;i<n;i++)r[i]=parseInt(t[i]);return r}function n(e){return e.substring(1)}function a(e){return void 0!==e?parseFloat(e.getAttribute("meter")):1}function o(e){return void 0!==e?e.textContent:"Y_UP"}function s(e,r,i,n){var a=t(e,r)[0];if(void 0!==a)for(var o=t(a,i),s=0;s<o.length;s++)n(o[s])}function c(e,t){for(var r in e){e[r].build=t(e[r])}}function l(e,t){return void 0!==e.build?e.build:(e.build=t(e),e.build)}function u(e){return void 0!==e.build?e.build:new Image}function h(e){for(var t={surfaces:{},samplers:{}},r=0,i=e.childNodes.length;r<i;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"newparam":d(n,t);break;case"technique":t.technique=m(n)}}return t}function d(e,t){for(var r=e.getAttribute("sid"),i=0,n=e.childNodes.length;i<n;i++){var a=e.childNodes[i];if(1===a.nodeType)switch(a.nodeName){case"surface":t.surfaces[r]=p(a);break;case"sampler2D":t.samplers[r]=f(a)}}}function p(e){for(var t={},r=0,i=e.childNodes.length;r<i;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"init_from":t.init_from=n.textContent}}return t}function f(e){for(var t={},r=0,i=e.childNodes.length;r<i;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"source":t.source=n.textContent}}return t}function m(e){for(var t={},r=0,i=e.childNodes.length;r<i;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=n.nodeName,t.parameters=v(n)}}return t}function v(e){for(var t={},r=0,i=e.childNodes.length;r<i;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"emission":case"diffuse":case"specular":case"shininess":case"transparent":case"transparency":t[n.nodeName]=g(n)}}return t}function g(e){for(var t={},i=0,n=e.childNodes.length;i<n;i++){var a=e.childNodes[i];if(1===a.nodeType)switch(a.nodeName){case"color":t[a.nodeName]=r(a.textContent);break;case"float":t[a.nodeName]=parseFloat(a.textContent);break;case"texture":t[a.nodeName]={id:a.getAttribute("texture"),extra:y(a)}}}return t}function y(e){for(var t={},r=0,i=e.childNodes.length;r<i;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"extra":t=x(n)}}return t}function x(e){for(var t={},r=0,i=e.childNodes.length;r<i;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"technique":t[n.nodeName]=E(n)}}return t}function E(e){for(var t={},r=0,i=e.childNodes.length;r<i;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t[n.nodeName]=parseFloat(n.textContent);break;case"wrapU":case"wrapV":t[n.nodeName]=parseInt(n.textContent)}}return t}function b(e){return e}function w(e){var t,r,i=(t=e.url,l(J.effects[t],b)),n=i.profile.technique;switch(n.type){case"phong":case"blinn":r=new THREE.MeshPhongMaterial;break;case"lambert":r=new THREE.MeshLambertMaterial;break;default:r=new THREE.MeshBasicMaterial}function a(e){var t,r=i.profile.samplers[e.id];if(void 0!==r){var n=i.profile.surfaces[r.source],a=new THREE.Texture((t=n.init_from,l(J.images[t],u))),o=e.extra;if(void 0!==o&&void 0!==o.technique){var s=o.technique;a.wrapS=s.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,a.wrapT=s.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,a.offset.set(s.offsetU,s.offsetV),a.repeat.set(s.repeatU,s.repeatV)}else a.wrapS=THREE.RepeatWrapping,a.wrapT=THREE.RepeatWrapping;return a.needsUpdate=!0,a}return console.error("ColladaLoder: Undefined sampler",e.id),null}r.name=e.name;var o=n.parameters;for(var s in o){var c=o[s];switch(s){case"diffuse":c.color&&r.color.fromArray(c.color),c.texture&&(r.map=a(c.texture));break;case"specular":c.color&&r.specular&&r.specular.fromArray(c.color);break;case"shininess":c.float&&r.shininess&&(r.shininess=c.float);break;case"emission":c.color&&r.emissive&&r.emissive.fromArray(c.color);break;case"transparent":r.transparent=!0;break;case"transparency":void 0!==c.float&&(r.opacity=c.float),r.transparent=!0}}return r}function T(e){return l(J.materials[e],w)}function M(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];switch(r.nodeName){case"technique_common":return _(r)}}return{}}function _(e){for(var t={},r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];switch(i.nodeName){case"perspective":case"orthographic":t.technique=i.nodeName,t.parameters=S(i)}}return t}function S(e){for(var t={},r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];switch(i.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[i.nodeName]=parseFloat(i.textContent)}}return t}function R(e){var t;switch(e.optics.technique){case"perspective":t=new THREE.PerspectiveCamera(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":t=new THREE.OrthographicCamera;break;default:t=new THREE.PerspectiveCamera}return t.name=e.name,t}function A(e){for(var t={},r=0,i=e.childNodes.length;r<i;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=n.nodeName,t.parameters=z(n)}}return t}function z(e){for(var t={},i=0,n=e.childNodes.length;i<n;i++){var a=e.childNodes[i];if(1===a.nodeType)switch(a.nodeName){case"color":var o=r(a.textContent);t.color=(new THREE.Color).fromArray(o);break;case"falloff_angle":t.falloffAngle=parseFloat(a.textContent);break;case"quadratic_attenuation":var s=parseFloat(a.textContent);t.distance=s?Math.sqrt(1/s):0}}return t}function C(e){var t;switch(e.technique){case"directional":t=new THREE.DirectionalLight;break;case"point":t=new THREE.PointLight;break;case"spot":t=new THREE.SpotLight;break;case"ambient":t=new THREE.AmbientLight}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function P(e){return l(J.lights[e],C)}function L(e){for(var i={array:[],stride:3},n=0;n<e.childNodes.length;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"float_array":i.array=r(a.textContent);break;case"technique_common":var o=t(a,"accessor")[0];void 0!==o&&(i.stride=parseInt(o.getAttribute("stride")));break;default:console.log(a)}}return i}function D(e){for(var t={},r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];1===i.nodeType&&(t[i.getAttribute("semantic")]=n(i.getAttribute("source")))}return t}function U(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),inputs:{},stride:0},r=0,a=e.childNodes.length;r<a;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"input":var s=n(o.getAttribute("source")),c=o.getAttribute("semantic"),l=parseInt(o.getAttribute("offset"));t.inputs[c]={id:s,offset:l},t.stride=Math.max(t.stride,l+1);break;case"vcount":t.vcount=i(o.textContent);break;case"p":t.p=i(o.textContent)}}return t}var H=new THREE.LineBasicMaterial,O=new THREE.MeshPhongMaterial;function I(e){var t={},r=e.sources,i=e.vertices,n=e.primitives;if(0===n.length)return t;for(var a=0;a<n.length;a++){var o,s=n[a],c=s.inputs,l=new THREE.BufferGeometry;for(var u in e.name&&(l.name=e.name),c){var h=c[u];switch(u){case"VERTEX":for(var d in i)l.addAttribute(d.toLowerCase(),N(s,r[i[d]],h.offset));break;case"NORMAL":l.addAttribute("normal",N(s,r[h.id],h.offset));break;case"COLOR":l.addAttribute("color",N(s,r[h.id],h.offset));break;case"TEXCOORD":l.addAttribute("uv",N(s,r[h.id],h.offset))}}switch(s.type){case"lines":o=new THREE.LineSegments(l,H);break;case"linestrips":o=new THREE.Line(l,H);break;case"triangles":case"polylist":o=new THREE.Mesh(l,O)}t[s.material]=o}return t}function N(e,t,r){var i=e.p,n=e.stride,a=e.vcount;function o(e){for(var t=i[e+r]*l,n=t+l;t<n;t++)u.push(c[t])}var s=0,c=t.array,l=t.stride,u=[];if(void 0!==e.vcount){for(var h=0,d=0,p=a.length;d<p;d++){var f=a[d];if(4===f){var m=h+1*n,v=h+2*n,g=h+3*n;o(h+0*n),o(m),o(g),o(m),o(v),o(g)}else if(3===f){m=h+1*n,v=h+2*n;o(h+0*n),o(m),o(v)}else s=Math.max(s,f);h+=n*f}s>0&&console.log("ColladaLoader: Geometry has faces with more than 4 vertices.")}else for(d=0,p=i.length;d<p;d+=n)o(d);return new THREE.Float32BufferAttribute(u,l)}function B(e){return l(J.geometries[e],I)}var F=new THREE.Matrix4,G=new THREE.Vector3;function V(e){for(var t={name:e.getAttribute("name"),matrix:new THREE.Matrix4,nodes:[],instanceCameras:[],instanceLights:[],instanceGeometries:[],instanceNodes:[]},i=0;i<e.childNodes.length;i++){var a=e.childNodes[i];if(1===a.nodeType)switch(a.nodeName){case"node":a.hasAttribute("id")&&(t.nodes.push(a.getAttribute("id")),V(a));break;case"instance_camera":t.instanceCameras.push(n(a.getAttribute("url")));break;case"instance_light":t.instanceLights.push(n(a.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(j(a));break;case"instance_node":t.instanceNodes.push(n(a.getAttribute("url")));break;case"matrix":var o=r(a.textContent);t.matrix.multiply(F.fromArray(o).transpose());break;case"translate":o=r(a.textContent);G.fromArray(o),t.matrix.multiply(F.makeTranslation(G.x,G.y,G.z));break;case"rotate":o=r(a.textContent);var s=THREE.Math.degToRad(o[3]);t.matrix.multiply(F.makeRotationAxis(G.fromArray(o),s));break;case"scale":o=r(a.textContent);t.matrix.scale(G.fromArray(o));break;case"extra":break;default:console.log(a)}}return e.hasAttribute("id")&&(J.nodes[e.getAttribute("id")]=t),t}function j(e){for(var t={id:n(e.getAttribute("url")),materials:{}},r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if("bind_material"===i.nodeName){for(var a=i.getElementsByTagName("instance_material"),o=0;o<a.length;o++){var s=a[o],c=s.getAttribute("symbol"),l=s.getAttribute("target");t.materials[c]=n(l)}break}}return t}function k(e){for(var t,r=[],i=e.matrix,n=e.nodes,a=e.instanceCameras,o=e.instanceLights,s=e.instanceGeometries,c=e.instanceNodes,u=0,h=n.length;u<h;u++)r.push(W(n[u]).clone());for(u=0,h=a.length;u<h;u++)r.push((t=a[u],l(J.cameras[t],R)).clone());for(u=0,h=o.length;u<h;u++)r.push(P(o[u]).clone());for(u=0,h=s.length;u<h;u++){var d=s[u],p=B(d.id);for(var f in p){var m=p[f].clone();void 0!==d.materials[f]&&(m.material=T(d.materials[f])),r.push(m)}}for(u=0,h=c.length;u<h;u++)r.push(W(c[u]).clone());if(0===n.length&&1===r.length)m=r[0];else{m=new THREE.Group;for(u=0;u<r.length;u++)m.add(r[u])}return m.name=e.name,m.matrix.copy(i),m.matrix.decompose(m.position,m.quaternion,m.scale),m}function W(e){return l(J.nodes[e],k)}function X(e){var t=new THREE.Group;t.name=e.name;for(var r=e.children,i=0;i<r.length;i++)t.add(k(r[i]));return t}if(console.time("ColladaLoader"),0===e.length)return{scene:new THREE.Scene};console.time("ColladaLoader: DOMParser");var q=(new DOMParser).parseFromString(e,"application/xml");console.timeEnd("ColladaLoader: DOMParser");var Y=t(q,"COLLADA")[0],Z=Y.getAttribute("version");console.log("ColladaLoader: File version",Z);var Q=function(e){return{unit:a(t(e,"unit")[0]),upAxis:o(t(e,"up_axis")[0])}}(t(Y,"asset")[0]),J={images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{}};console.time("ColladaLoader: Parse"),s(Y,"library_images","image",function(e){var r={init_from:t(e,"init_from")[0].textContent};J.images[e.getAttribute("id")]=r}),s(Y,"library_effects","effect",function(e){for(var t={},r=0,i=e.childNodes.length;r<i;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"profile_COMMON":t.profile=h(n)}}J.effects[e.getAttribute("id")]=t}),s(Y,"library_materials","material",function(e){for(var t={name:e.getAttribute("name")},r=0,i=e.childNodes.length;r<i;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"instance_effect":t.url=n(a.getAttribute("url"))}}J.materials[e.getAttribute("id")]=t}),s(Y,"library_cameras","camera",function(e){for(var t={name:e.getAttribute("name")},r=0,i=e.childNodes.length;r<i;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"optics":t.optics=M(n)}}J.cameras[e.getAttribute("id")]=t}),s(Y,"library_lights","light",function(e){for(var t={},r=0,i=e.childNodes.length;r<i;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"technique_common":t=A(n)}}J.lights[e.getAttribute("id")]=t}),s(Y,"library_geometries","geometry",function(e){for(var r={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},i=t(e,"mesh")[0],n=0;n<i.childNodes.length;n++){var a=i.childNodes[n];if(1===a.nodeType){var o=a.getAttribute("id");switch(a.nodeName){case"source":r.sources[o]=L(a);break;case"vertices":r.vertices=D(a);break;case"polygons":console.warn("ColladaLoader: Unsupported primitive type: ",a.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":r.primitives.push(U(a));break;default:console.log(a)}}}J.geometries[e.getAttribute("id")]=r}),s(Y,"library_nodes","node",V),s(Y,"library_visual_scenes","visual_scene",function(e){for(var r={name:e.getAttribute("name"),children:[]},i=t(e,"node"),n=0;n<i.length;n++)r.children.push(V(i[n]));J.visualScenes[e.getAttribute("id")]=r}),console.timeEnd("ColladaLoader: Parse"),console.time("ColladaLoader: Build"),c(J.images,u),c(J.effects,b),c(J.materials,w),c(J.cameras,R),c(J.lights,C),c(J.geometries,I),c(J.visualScenes,X),console.timeEnd("ColladaLoader: Build");var K=function(e){var r,i=t(e,"instance_visual_scene")[0];return r=n(i.getAttribute("url")),l(J.visualScenes[r],X)}(t(Y,"scene")[0]);return"Z_UP"===Q.upAxis&&(K.rotation.x=-Math.PI/2),K.scale.multiplyScalar(Q.unit),console.timeEnd("ColladaLoader"),{animations:[],kinematics:{joints:[]},library:J,scene:K}}}},mdPL:function(e,t,r){(function(e){var i=r("WFqU"),n=t&&!t.nodeType&&t,a=n&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===n&&i.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=s}).call(this,r("YuTi")(e))},nmnc:function(e,t,r){var i=r("Kz5y").Symbol;e.exports=i},ojlb:function(e,t){THREE.BlendShader={uniforms:{tDiffuse1:{value:null},tDiffuse2:{value:null},mixRatio:{value:.5},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform float mixRatio;","uniform sampler2D tDiffuse1;","uniform sampler2D tDiffuse2;","varying vec2 vUv;","void main() {","vec4 texel1 = texture2D( tDiffuse1, vUv );","vec4 texel2 = texture2D( tDiffuse2, vUv );","gl_FragColor = opacity * mix( texel1, texel2, mixRatio );","}"].join("\n")}},p9CH:function(e,t,r){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function a(e){return e&&e.__esModule?e:{default:e}}var o=a(r("Z6NN")),s=a(r("u461")),c=a(r("fXKH")),l=a(r("pwmp")),u=a(r("VciW")),h=a(r("xEkU")),d=a(r("kXpG")),p=a(r("q1tI")),f=a(r("17x9")),m=1e3/60;function v(e,t,r){var i=t;return null==i?e.map(function(e,t){return{key:e.key,data:e.data,style:r[t]}}):e.map(function(e,t){for(var n=0;n<i.length;n++)if(i[n].key===e.key)return{key:i[n].key,data:i[n].data,style:r[t]};return{key:e.key,data:e.data,style:r[t]}})}function g(e,t,r,i,n,a,s,c,u){for(var h=l.default(i,n,function(e,i){var n=t(i);return null==n?(r({key:i.key,data:i.data}),null):d.default(a[e],n,s[e])?(r({key:i.key,data:i.data}),null):{key:i.key,data:i.data,style:n}}),p=[],f=[],m=[],v=[],g=0;g<h.length;g++){for(var y=h[g],x=null,E=0;E<i.length;E++)if(i[E].key===y.key){x=E;break}if(null==x){var b=e(y);p[g]=b,m[g]=b;var w=o.default(y.style);f[g]=w,v[g]=w}else p[g]=a[x],m[g]=c[x],f[g]=s[x],v[g]=u[x]}return[h,p,f,m,v]}var y=function(e){function t(r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,r),this.unmounting=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=g(n.props.willEnter,n.props.willLeave,n.props.didLeave,n.state.mergedPropsStyles,e,n.state.currentStyles,n.state.currentVelocities,n.state.lastIdealStyles,n.state.lastIdealVelocities),r=t[0],a=t[1],o=t[2],s=t[3],c=t[4],l=0;l<e.length;l++){var u=e[l].style,h=!1;for(var d in u)if(Object.prototype.hasOwnProperty.call(u,d)){var p=u[d];"number"==typeof p&&(h||(h=!0,a[l]=i({},a[l]),o[l]=i({},o[l]),s[l]=i({},s[l]),c[l]=i({},c[l]),r[l]={key:r[l].key,data:r[l].data,style:i({},r[l].style)}),a[l][d]=p,o[l][d]=0,s[l][d]=p,c[l][d]=0,r[l].style[d]=p)}}n.setState({currentStyles:a,currentVelocities:o,mergedPropsStyles:r,lastIdealStyles:s,lastIdealVelocities:c})},this.startAnimationIfNecessary=function(){n.unmounting||(n.animationID=h.default(function(e){if(!n.unmounting){var t=n.props.styles,r="function"==typeof t?t(v(n.state.mergedPropsStyles,n.unreadPropStyles,n.state.lastIdealStyles)):t;if(function(e,t,r,i){if(i.length!==t.length)return!1;for(var n=0;n<i.length;n++)if(i[n].key!==t[n].key)return!1;for(n=0;n<i.length;n++)if(!d.default(e[n],t[n].style,r[n]))return!1;return!0}(n.state.currentStyles,r,n.state.currentVelocities,n.state.mergedPropsStyles))return n.animationID=null,void(n.accumulatedTime=0);var i=e||u.default(),a=i-n.prevTime;if(n.prevTime=i,n.accumulatedTime=n.accumulatedTime+a,n.accumulatedTime>10*m&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();for(var o=(n.accumulatedTime-Math.floor(n.accumulatedTime/m)*m)/m,s=Math.floor(n.accumulatedTime/m),l=g(n.props.willEnter,n.props.willLeave,n.props.didLeave,n.state.mergedPropsStyles,r,n.state.currentStyles,n.state.currentVelocities,n.state.lastIdealStyles,n.state.lastIdealVelocities),h=l[0],p=l[1],f=l[2],y=l[3],x=l[4],E=0;E<h.length;E++){var b=h[E].style,w={},T={},M={},_={};for(var S in b)if(Object.prototype.hasOwnProperty.call(b,S)){var R=b[S];if("number"==typeof R)w[S]=R,T[S]=0,M[S]=R,_[S]=0;else{for(var A=y[E][S],z=x[E][S],C=0;C<s;C++){var P=c.default(m/1e3,A,z,R.val,R.stiffness,R.damping,R.precision);A=P[0],z=P[1]}var L=c.default(m/1e3,A,z,R.val,R.stiffness,R.damping,R.precision),D=L[0],U=L[1];w[S]=A+(D-A)*o,T[S]=z+(U-z)*o,M[S]=A,_[S]=z}}y[E]=M,x[E]=_,p[E]=w,f[E]=T}n.animationID=null,n.accumulatedTime-=s*m,n.setState({currentStyles:p,currentVelocities:f,lastIdealStyles:y,lastIdealVelocities:x,mergedPropsStyles:h}),n.unreadPropStyles=null,n.startAnimationIfNecessary()}}))},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,null,[{key:"propTypes",value:{defaultStyles:f.default.arrayOf(f.default.shape({key:f.default.string.isRequired,data:f.default.any,style:f.default.objectOf(f.default.number).isRequired})),styles:f.default.oneOfType([f.default.func,f.default.arrayOf(f.default.shape({key:f.default.string.isRequired,data:f.default.any,style:f.default.objectOf(f.default.oneOfType([f.default.number,f.default.object])).isRequired}))]).isRequired,children:f.default.func.isRequired,willEnter:f.default.func,willLeave:f.default.func,didLeave:f.default.func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(e){return s.default(e.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,r=e.styles,i=e.willEnter,n=e.willLeave,a=e.didLeave,c="function"==typeof r?r(t):r,l=void 0;l=null==t?c:t.map(function(e){for(var t=0;t<c.length;t++)if(c[t].key===e.key)return c[t];return e});var u=null==t?c.map(function(e){return s.default(e.style)}):t.map(function(e){return s.default(e.style)}),h=null==t?c.map(function(e){return o.default(e.style)}):t.map(function(e){return o.default(e.style)}),d=g(i,n,a,l,c,u,h,u,h),p=d[0];return{currentStyles:d[1],currentVelocities:d[2],lastIdealStyles:d[3],lastIdealVelocities:d[4],mergedPropsStyles:p}},t.prototype.componentDidMount=function(){this.prevTime=u.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(v(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=u.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){this.unmounting=!0,null!=this.animationID&&(h.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=v(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&p.default.Children.only(t)},t}(p.default.Component);t.default=y,e.exports=t.default},pwmp:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t,r){for(var i={},n=0;n<e.length;n++)i[e[n].key]=n;for(var a={},n=0;n<t.length;n++)a[t[n].key]=n;for(var o=[],n=0;n<t.length;n++)o[n]=t[n];for(var n=0;n<e.length;n++)if(!Object.prototype.hasOwnProperty.call(a,e[n].key)){var s=r(n,e[n]);null!=s&&o.push(s)}return o.sort(function(e,r){var n=a[e.key],o=a[r.key],s=i[e.key],c=i[r.key];if(null!=n&&null!=o)return a[e.key]-a[r.key];if(null!=s&&null!=c)return i[e.key]-i[r.key];if(null!=n){for(var l=0;l<t.length;l++){var u=t[l].key;if(Object.prototype.hasOwnProperty.call(i,u)){if(n<a[u]&&c>i[u])return-1;if(n>a[u]&&c<i[u])return 1}}return 1}for(var l=0;l<t.length;l++){var u=t[l].key;if(Object.prototype.hasOwnProperty.call(i,u)){if(o<a[u]&&s>i[u])return 1;if(o>a[u]&&s<i[u])return-1}}return-1})},e.exports=t.default},r5Cq:function(e,t){THREE.OrbitControls=function(e,t){var r,i,n,a,o;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(c),s.update(),d=h.NONE},this.update=(r=new THREE.Vector3,i=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),n=i.clone().inverse(),a=new THREE.Vector3,o=new THREE.Quaternion,function(){var e=s.object.position;return r.copy(e).sub(s.target),r.applyQuaternion(i),f.setFromVector3(r),s.autoRotate&&d===h.NONE&&z(2*Math.PI/60/60*s.autoRotateSpeed),f.theta+=m.theta,f.phi+=m.phi,f.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,f.theta)),f.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=v,f.radius=Math.max(s.minDistance,Math.min(s.maxDistance,f.radius)),s.target.add(g),r.setFromSpherical(f),r.applyQuaternion(n),e.copy(s.target).add(r),s.object.lookAt(s.target),!0===s.enableDamping?(m.theta*=1-s.dampingFactor,m.phi*=1-s.dampingFactor):m.set(0,0,0),v=1,g.set(0,0,0),!!(y||a.distanceToSquared(s.object.position)>p||8*(1-o.dot(s.object.quaternion))>p)&&(s.dispatchEvent(c),a.copy(s.object.position),o.copy(s.object.quaternion),y=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",W,!1),s.domElement.removeEventListener("mousedown",I,!1),s.domElement.removeEventListener("wheel",F,!1),s.domElement.removeEventListener("touchstart",V,!1),s.domElement.removeEventListener("touchend",k,!1),s.domElement.removeEventListener("touchmove",j,!1),document.removeEventListener("mousemove",N,!1),document.removeEventListener("mouseup",B,!1),window.removeEventListener("keydown",G,!1)};var s=this,c={type:"change"},l={type:"start"},u={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},d=h.NONE,p=1e-6,f=new THREE.Spherical,m=new THREE.Spherical,v=1,g=new THREE.Vector3,y=!1,x=new THREE.Vector2,E=new THREE.Vector2,b=new THREE.Vector2,w=new THREE.Vector2,T=new THREE.Vector2,M=new THREE.Vector2,_=new THREE.Vector2,S=new THREE.Vector2,R=new THREE.Vector2;function A(){return Math.pow(.95,s.zoomSpeed)}function z(e){m.theta-=e}function C(e){m.phi-=e}var P,L=(P=new THREE.Vector3,function(e,t){P.setFromMatrixColumn(t,0),P.multiplyScalar(-e),g.add(P)}),D=function(){var e=new THREE.Vector3;return function(t,r){e.setFromMatrixColumn(r,1),e.multiplyScalar(t),g.add(e)}}(),U=function(){var e=new THREE.Vector3;return function(t,r){var i=s.domElement===document?s.domElement.body:s.domElement;if(s.object instanceof THREE.PerspectiveCamera){var n=s.object.position;e.copy(n).sub(s.target);var a=e.length();a*=Math.tan(s.object.fov/2*Math.PI/180),L(2*t*a/i.clientHeight,s.object.matrix),D(2*r*a/i.clientHeight,s.object.matrix)}else s.object instanceof THREE.OrthographicCamera?(L(t*(s.object.right-s.object.left)/s.object.zoom/i.clientWidth,s.object.matrix),D(r*(s.object.top-s.object.bottom)/s.object.zoom/i.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function H(e){s.object instanceof THREE.PerspectiveCamera?v/=e:s.object instanceof THREE.OrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function O(e){s.object instanceof THREE.PerspectiveCamera?v*=e:s.object instanceof THREE.OrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function I(e){if(!1!==s.enabled){switch(e.preventDefault(),e.button){case s.mouseButtons.ORBIT:if(!1===s.enableRotate)return;!function(e){x.set(e.clientX,e.clientY)}(e),d=h.ROTATE;break;case s.mouseButtons.ZOOM:if(!1===s.enableZoom)return;!function(e){_.set(e.clientX,e.clientY)}(e),d=h.DOLLY;break;case s.mouseButtons.PAN:if(!1===s.enablePan)return;!function(e){w.set(e.clientX,e.clientY)}(e),d=h.PAN}d!==h.NONE&&(document.addEventListener("mousemove",N,!1),document.addEventListener("mouseup",B,!1),s.dispatchEvent(l))}}function N(e){if(!1!==s.enabled)switch(e.preventDefault(),d){case h.ROTATE:if(!1===s.enableRotate)return;!function(e){E.set(e.clientX,e.clientY),b.subVectors(E,x);var t=s.domElement===document?s.domElement.body:s.domElement;z(2*Math.PI*b.x/t.clientWidth*s.rotateSpeed),C(2*Math.PI*b.y/t.clientHeight*s.rotateSpeed),x.copy(E),s.update()}(e);break;case h.DOLLY:if(!1===s.enableZoom)return;!function(e){S.set(e.clientX,e.clientY),R.subVectors(S,_),R.y>0?H(A()):R.y<0&&O(A()),_.copy(S),s.update()}(e);break;case h.PAN:if(!1===s.enablePan)return;!function(e){T.set(e.clientX,e.clientY),M.subVectors(T,w),U(M.x,M.y),w.copy(T),s.update()}(e)}}function B(e){!1!==s.enabled&&(document.removeEventListener("mousemove",N,!1),document.removeEventListener("mouseup",B,!1),s.dispatchEvent(u),d=h.NONE)}function F(e){!1===s.enabled||!1===s.enableZoom||d!==h.NONE&&d!==h.ROTATE||(e.preventDefault(),e.stopPropagation(),function(e){e.deltaY<0?O(A()):e.deltaY>0&&H(A()),s.update()}(e),s.dispatchEvent(l),s.dispatchEvent(u))}function G(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){switch(e.keyCode){case s.keys.UP:U(0,s.keyPanSpeed),s.update();break;case s.keys.BOTTOM:U(0,-s.keyPanSpeed),s.update();break;case s.keys.LEFT:U(s.keyPanSpeed,0),s.update();break;case s.keys.RIGHT:U(-s.keyPanSpeed,0),s.update()}}(e)}function V(e){if(!1!==s.enabled){switch(e.touches.length){case 1:if(!1===s.enableRotate)return;!function(e){x.set(e.touches[0].pageX,e.touches[0].pageY)}(e),d=h.TOUCH_ROTATE;break;case 2:if(!1===s.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);_.set(0,i)}(e),d=h.TOUCH_DOLLY;break;case 3:if(!1===s.enablePan)return;!function(e){w.set(e.touches[0].pageX,e.touches[0].pageY)}(e),d=h.TOUCH_PAN;break;default:d=h.NONE}d!==h.NONE&&s.dispatchEvent(l)}}function j(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===s.enableRotate)return;if(d!==h.TOUCH_ROTATE)return;!function(e){E.set(e.touches[0].pageX,e.touches[0].pageY),b.subVectors(E,x);var t=s.domElement===document?s.domElement.body:s.domElement;z(2*Math.PI*b.x/t.clientWidth*s.rotateSpeed),C(2*Math.PI*b.y/t.clientHeight*s.rotateSpeed),x.copy(E),s.update()}(e);break;case 2:if(!1===s.enableZoom)return;if(d!==h.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);S.set(0,i),R.subVectors(S,_),R.y>0?O(A()):R.y<0&&H(A()),_.copy(S),s.update()}(e);break;case 3:if(!1===s.enablePan)return;if(d!==h.TOUCH_PAN)return;!function(e){T.set(e.touches[0].pageX,e.touches[0].pageY),M.subVectors(T,w),U(M.x,M.y),w.copy(T),s.update()}(e);break;default:d=h.NONE}}function k(e){!1!==s.enabled&&(s.dispatchEvent(u),d=h.NONE)}function W(e){e.preventDefault()}s.domElement.addEventListener("contextmenu",W,!1),s.domElement.addEventListener("mousedown",I,!1),s.domElement.addEventListener("wheel",F,!1),s.domElement.addEventListener("touchstart",V,!1),s.domElement.addEventListener("touchend",k,!1),s.domElement.addEventListener("touchmove",j,!1),window.addEventListener("keydown",G,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})},"s/Gw":function(e,t){THREE.DeviceOrientationControls=function(e){var t=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alpha=0,this.alphaOffsetAngle=0;var r,i,n,a,o=function(e){t.deviceOrientation=e},s=function(){t.screenOrientation=window.orientation||0},c=(r=new THREE.Vector3(0,0,1),i=new THREE.Euler,n=new THREE.Quaternion,a=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(e,t,o,s,c){i.set(o,t,-s,"YXZ"),e.setFromEuler(i),e.multiply(a),e.multiply(n.setFromAxisAngle(r,-c))});this.connect=function(){s(),window.addEventListener("orientationchange",s,!1),window.addEventListener("deviceorientation",o,!1),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",s,!1),window.removeEventListener("deviceorientation",o,!1),t.enabled=!1},this.update=function(){if(!1!==t.enabled){var e=t.deviceOrientation.alpha?THREE.Math.degToRad(t.deviceOrientation.alpha)+this.alphaOffsetAngle:0,r=t.deviceOrientation.beta?THREE.Math.degToRad(t.deviceOrientation.beta):0,i=t.deviceOrientation.gamma?THREE.Math.degToRad(t.deviceOrientation.gamma):0,n=t.screenOrientation?THREE.Math.degToRad(t.screenOrientation):0;c(t.object.quaternion,e,r,i,n),this.alpha=e}},this.updateAlphaOffsetAngle=function(e){this.alphaOffsetAngle=e,this.update()},this.dispose=function(){this.disconnect()},this.connect()}},sEf8:function(e,t){e.exports=function(e){return function(t){return e(t)}}},sEfC:function(e,t,r){var i=r("GoyQ"),n=r("QIyF"),a=r("tLB3"),o="Expected a function",s=Math.max,c=Math.min;e.exports=function(e,t,r){var l,u,h,d,p,f,m=0,v=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError(o);function x(t){var r=l,i=u;return l=u=void 0,m=t,d=e.apply(i,r)}function E(e){var r=e-f;return void 0===f||r>=t||r<0||g&&e-m>=h}function b(){var e=n();if(E(e))return w(e);p=setTimeout(b,function(e){var r=t-(e-f);return g?c(r,h-(e-m)):r}(e))}function w(e){return p=void 0,y&&l?x(e):(l=u=void 0,d)}function T(){var e=n(),r=E(e);if(l=arguments,u=this,f=e,r){if(void 0===p)return function(e){return m=e,p=setTimeout(b,t),v?x(e):d}(f);if(g)return p=setTimeout(b,t),x(f)}return void 0===p&&(p=setTimeout(b,t)),d}return t=a(t)||0,i(r)&&(v=!!r.leading,h=(g="maxWait"in r)?s(a(r.maxWait)||0,t):h,y="trailing"in r?!!r.trailing:y),T.cancel=function(){void 0!==p&&clearTimeout(p),m=0,l=f=u=p=void 0},T.flush=function(){return void 0===p?d:w(n())},T}},shjB:function(e,t){var r=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},tLB3:function(e,t,r){var i=r("GoyQ"),n=r("/9aa"),a=NaN,o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(n(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var r=c.test(e);return r||l.test(e)?u(e.slice(2),r?2:8):s.test(e)?a:+e}},tYRH:function(e,t,r){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};t.default=function(e,t){return i({},s,t,{val:e})};var n,a=r("LQNH"),o=(n=a)&&n.__esModule?n:{default:n},s=i({},o.default.noWobble,{precision:.01});e.exports=t.default},u461:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]="number"==typeof e[r]?e[r]:e[r].val);return t},e.exports=t.default},unm8:function(e,t,r){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function a(e){return e&&e.__esModule?e:{default:e}}var o=a(r("Z6NN")),s=a(r("u461")),c=a(r("fXKH")),l=a(r("VciW")),u=a(r("xEkU")),h=a(r("kXpG")),d=a(r("q1tI")),p=a(r("17x9")),f=1e3/60;var m=function(e){function t(r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,r),this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=n.state,r=t.currentStyles,a=t.currentVelocities,o=t.lastIdealStyles,s=t.lastIdealVelocities,c=!1,l=0;l<e.length;l++){var u=e[l],h=!1;for(var d in u)if(Object.prototype.hasOwnProperty.call(u,d)){var p=u[d];"number"==typeof p&&(h||(h=!0,c=!0,r[l]=i({},r[l]),a[l]=i({},a[l]),o[l]=i({},o[l]),s[l]=i({},s[l])),r[l][d]=p,a[l][d]=0,o[l][d]=p,s[l][d]=0)}}c&&n.setState({currentStyles:r,currentVelocities:a,lastIdealStyles:o,lastIdealVelocities:s})},this.startAnimationIfNecessary=function(){n.animationID=u.default(function(e){var t=n.props.styles(n.state.lastIdealStyles);if(function(e,t,r){for(var i=0;i<e.length;i++)if(!h.default(e[i],t[i],r[i]))return!1;return!0}(n.state.currentStyles,t,n.state.currentVelocities))return n.animationID=null,void(n.accumulatedTime=0);var r=e||l.default(),i=r-n.prevTime;if(n.prevTime=r,n.accumulatedTime=n.accumulatedTime+i,n.accumulatedTime>10*f&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();for(var a=(n.accumulatedTime-Math.floor(n.accumulatedTime/f)*f)/f,o=Math.floor(n.accumulatedTime/f),s=[],u=[],d=[],p=[],m=0;m<t.length;m++){var v=t[m],g={},y={},x={},E={};for(var b in v)if(Object.prototype.hasOwnProperty.call(v,b)){var w=v[b];if("number"==typeof w)g[b]=w,y[b]=0,x[b]=w,E[b]=0;else{for(var T=n.state.lastIdealStyles[m][b],M=n.state.lastIdealVelocities[m][b],_=0;_<o;_++){var S=c.default(f/1e3,T,M,w.val,w.stiffness,w.damping,w.precision);T=S[0],M=S[1]}var R=c.default(f/1e3,T,M,w.val,w.stiffness,w.damping,w.precision),A=R[0],z=R[1];g[b]=T+(A-T)*a,y[b]=M+(z-M)*a,x[b]=T,E[b]=M}}d[m]=g,p[m]=y,s[m]=x,u[m]=E}n.animationID=null,n.accumulatedTime-=o*f,n.setState({currentStyles:d,currentVelocities:p,lastIdealStyles:s,lastIdealVelocities:u}),n.unreadPropStyles=null,n.startAnimationIfNecessary()})},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,null,[{key:"propTypes",value:{defaultStyles:p.default.arrayOf(p.default.objectOf(p.default.number)),styles:p.default.func.isRequired,children:p.default.func.isRequired},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,r=e.styles,i=t||r().map(s.default),n=i.map(function(e){return o.default(e)});return{currentStyles:i,currentVelocities:n,lastIdealStyles:i,lastIdealVelocities:n}},t.prototype.componentDidMount=function(){this.prevTime=l.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=l.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(u.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyles);return e&&d.default.Children.only(e)},t}(d.default.Component);t.default=m,e.exports=t.default},vB4Q:function(e,t){THREE.DotScreenShader={uniforms:{tDiffuse:{value:null},tSize:{value:new THREE.Vector2(256,256)},center:{value:new THREE.Vector2(.5,.5)},angle:{value:1.57},scale:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec2 center;","uniform float angle;","uniform float scale;","uniform vec2 tSize;","uniform sampler2D tDiffuse;","varying vec2 vUv;","float pattern() {","float s = sin( angle ), c = cos( angle );","vec2 tex = vUv * tSize - center;","vec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;","return ( sin( point.x ) * sin( point.y ) ) * 4.0;","}","void main() {","vec4 color = texture2D( tDiffuse, vUv );","float average = ( color.r + color.g + color.b ) / 3.0;","gl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );","}"].join("\n")}},vYYK:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var i=r("hfKm"),n=r.n(i);function a(e,t,r){return t in e?n()(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},vlRD:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){var e=r("RNiq");return{page:e.default||e}}])},wJg7:function(e,t){var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}},"xCC/":function(e,t,r){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function a(e){return e&&e.__esModule?e:{default:e}}var o=a(r("Z6NN")),s=a(r("u461")),c=a(r("fXKH")),l=a(r("VciW")),u=a(r("xEkU")),h=a(r("kXpG")),d=a(r("q1tI")),p=a(r("17x9")),f=1e3/60,m=function(e){function t(r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,r),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(e){var t=!1,r=n.state,a=r.currentStyle,o=r.currentVelocity,s=r.lastIdealStyle,c=r.lastIdealVelocity;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var u=e[l];"number"==typeof u&&(t||(t=!0,a=i({},a),o=i({},o),s=i({},s),c=i({},c)),a[l]=u,o[l]=0,s[l]=u,c[l]=0)}t&&n.setState({currentStyle:a,currentVelocity:o,lastIdealStyle:s,lastIdealVelocity:c})},this.startAnimationIfNecessary=function(){n.animationID=u.default(function(e){var t=n.props.style;if(h.default(n.state.currentStyle,t,n.state.currentVelocity))return n.wasAnimating&&n.props.onRest&&n.props.onRest(),n.animationID=null,n.wasAnimating=!1,void(n.accumulatedTime=0);n.wasAnimating=!0;var r=e||l.default(),i=r-n.prevTime;if(n.prevTime=r,n.accumulatedTime=n.accumulatedTime+i,n.accumulatedTime>10*f&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();var a=(n.accumulatedTime-Math.floor(n.accumulatedTime/f)*f)/f,o=Math.floor(n.accumulatedTime/f),s={},u={},d={},p={};for(var m in t)if(Object.prototype.hasOwnProperty.call(t,m)){var v=t[m];if("number"==typeof v)d[m]=v,p[m]=0,s[m]=v,u[m]=0;else{for(var g=n.state.lastIdealStyle[m],y=n.state.lastIdealVelocity[m],x=0;x<o;x++){var E=c.default(f/1e3,g,y,v.val,v.stiffness,v.damping,v.precision);g=E[0],y=E[1]}var b=c.default(f/1e3,g,y,v.val,v.stiffness,v.damping,v.precision),w=b[0],T=b[1];d[m]=g+(w-g)*a,p[m]=y+(T-y)*a,s[m]=g,u[m]=y}}n.animationID=null,n.accumulatedTime-=o*f,n.setState({currentStyle:d,currentVelocity:p,lastIdealStyle:s,lastIdealVelocity:u}),n.unreadPropStyle=null,n.startAnimationIfNecessary()})},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,null,[{key:"propTypes",value:{defaultStyle:p.default.objectOf(p.default.number),style:p.default.objectOf(p.default.oneOfType([p.default.number,p.default.object])).isRequired,children:p.default.func.isRequired,onRest:p.default.func},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyle,r=e.style,i=t||s.default(r),n=o.default(i);return{currentStyle:i,currentVelocity:n,lastIdealStyle:i,lastIdealVelocity:n}},t.prototype.componentDidMount=function(){this.prevTime=l.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=l.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(u.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyle);return e&&d.default.Children.only(e)},t}(d.default.Component);t.default=m,e.exports=t.default},xEkU:function(e,t,r){(function(t){for(var i=r("bQgK"),n="undefined"==typeof window?t:window,a=["moz","webkit"],o="AnimationFrame",s=n["request"+o],c=n["cancel"+o]||n["cancelRequest"+o],l=0;!s&&l<a.length;l++)s=n[a[l]+"Request"+o],c=n[a[l]+"Cancel"+o]||n[a[l]+"CancelRequest"+o];if(!s||!c){var u=0,h=0,d=[];s=function(e){if(0===d.length){var t=i(),r=Math.max(0,1e3/60-(t-u));u=r+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(r){setTimeout(function(){throw r},0)}},Math.round(r))}return d.push({handle:++h,callback:e,cancelled:!1}),h},c=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return s.call(n,e)},e.exports.cancel=function(){c.apply(n,arguments)},e.exports.polyfill=function(e){e||(e=n),e.requestAnimationFrame=s,e.cancelAnimationFrame=c}}).call(this,r("yLpj"))},yIj5:function(e,t){THREE.FilmShader={uniforms:{tDiffuse:{value:null},time:{value:0},nIntensity:{value:.5},sIntensity:{value:.05},sCount:{value:4096},grayscale:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","uniform float time;","uniform bool grayscale;","uniform float nIntensity;","uniform float sIntensity;","uniform float sCount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 cTextureScreen = texture2D( tDiffuse, vUv );","float dx = rand( vUv + time );","vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );","vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );","cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;","cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );","if( grayscale ) {","cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );","}","gl_FragColor =  vec4( cResult, cTextureScreen.a );","}"].join("\n")}},zJg2:function(e,t){THREE.GlitchPass=function(e){THREE.Pass.call(this),void 0===THREE.DigitalGlitch&&console.error("THREE.GlitchPass relies on THREE.DigitalGlitch");var t=THREE.DigitalGlitch;this.uniforms=THREE.UniformsUtils.clone(t.uniforms),null==e&&(e=64),this.uniforms.tDisp.value=this.generateHeightmap(e),this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.goWild=!1,this.curF=0,this.generateTrigger()},THREE.GlitchPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.GlitchPass,render:function(e,t,r,i,n){this.uniforms.tDiffuse.value=r.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=THREE.Math.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=THREE.Math.randFloat(-1,1),this.uniforms.seed_y.value=THREE.Math.randFloat(-1,1),this.uniforms.distortion_x.value=THREE.Math.randFloat(0,1),this.uniforms.distortion_y.value=THREE.Math.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=THREE.Math.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=THREE.Math.randFloat(0,1),this.uniforms.distortion_y.value=THREE.Math.randFloat(0,1),this.uniforms.seed_x.value=THREE.Math.randFloat(-.3,.3),this.uniforms.seed_y.value=THREE.Math.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)},generateTrigger:function(){this.randX=THREE.Math.randInt(120,240)},generateHeightmap:function(e){for(var t=new Float32Array(e*e*3),r=e*e,i=0;i<r;i++){var n=THREE.Math.randFloat(0,1);t[3*i+0]=n,t[3*i+1]=n,t[3*i+2]=n}var a=new THREE.DataTexture(t,e,e,THREE.RGBFormat,THREE.FloatType);return a.needsUpdate=!0,a}})}},[["vlRD",1,0,6]]]);